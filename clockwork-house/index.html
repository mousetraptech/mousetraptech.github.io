<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The Clockwork House</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Crimson+Text:ital,wght@0,400;0,600;1,400&family=JetBrains+Mono:wght@400;500&display=swap');

  * { margin: 0; padding: 0; box-sizing: border-box; }

  :root {
    --bg: #0a0a0c;
    --surface: #131318;
    --surface-raised: #1a1a22;
    --border: #2a2a35;
    --border-light: #3a3a48;
    --text: #c8c5d0;
    --text-dim: #7a7888;
    --text-bright: #e8e6f0;
    --accent: #9b8ec4;
    --accent-dim: #6b5f94;
    --danger: #c45858;
    --success: #5a9b6b;
    --gold: #c4a84e;
  }

  body {
    background: var(--bg);
    color: var(--text);
    font-family: 'Crimson Text', Georgia, serif;
    font-size: 18px;
    line-height: 1.7;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  #game-container {
    max-width: 680px;
    width: 100%;
    padding: 2rem 1.5rem;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
  }

  #header {
    text-align: center;
    padding: 1rem 0 0.5rem;
    border-bottom: 1px solid var(--border);
    margin-bottom: 1.5rem;
  }

  #header h1 {
    font-size: 1.1rem;
    font-weight: 600;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    color: var(--text-dim);
  }

  #stats-bar {
    display: flex;
    justify-content: center;
    gap: 1.5rem;
    margin-top: 0.5rem;
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.7rem;
    color: var(--text-dim);
    letter-spacing: 0.05em;
  }

  #stats-bar span { opacity: 0.7; }

  #room-display {
    flex: 1;
    opacity: 1;
    transition: opacity 0.4s ease;
  }

  #room-display.fade-out { opacity: 0; }

  #room-number {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.75rem;
    color: var(--accent-dim);
    letter-spacing: 0.1em;
    margin-bottom: 0.25rem;
  }

  #room-title {
    font-size: 1.8rem;
    font-weight: 600;
    color: var(--text-bright);
    margin-bottom: 1.25rem;
    line-height: 1.3;
  }

  #room-description {
    margin-bottom: 2rem;
    white-space: pre-line;
  }

  #room-description p { margin-bottom: 1em; color: var(--text); }
  #room-description em { color: var(--text-dim); font-style: italic; }
  #room-description strong { color: var(--text-bright); font-weight: 600; }

  #exits-section {
    margin-top: auto;
    padding-top: 1.5rem;
  }

  #exits-label {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.7rem;
    color: var(--text-dim);
    letter-spacing: 0.15em;
    text-transform: uppercase;
    margin-bottom: 0.75rem;
  }

  #exits {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    margin-bottom: 1.5rem;
  }

  .exit-btn {
    background: var(--surface);
    border: 1px solid var(--border);
    color: var(--text);
    font-family: 'Crimson Text', Georgia, serif;
    font-size: 1rem;
    padding: 0.8rem 1.2rem;
    cursor: pointer;
    text-align: left;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    gap: 0.75rem;
  }

  .exit-btn:hover {
    background: var(--surface-raised);
    border-color: var(--border-light);
    color: var(--text-bright);
  }

  .exit-btn:active { transform: translateY(1px); }

  .exit-number {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.8rem;
    color: var(--accent);
    min-width: 1.8rem;
    text-align: center;
    opacity: 0.8;
  }

  .exit-text { flex: 1; }

  .exit-visited {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.6rem;
    color: var(--text-dim);
    opacity: 0.5;
  }

  #controls {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem 0;
    border-top: 1px solid var(--border);
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.7rem;
  }

  .ctrl-buttons { display: flex; gap: 0.4rem; flex-wrap: wrap; }

  #controls button {
    background: none;
    border: 1px solid var(--border);
    color: var(--text-dim);
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.7rem;
    padding: 0.4rem 0.8rem;
    cursor: pointer;
    letter-spacing: 0.05em;
    transition: all 0.2s ease;
  }

  #controls button:hover {
    border-color: var(--border-light);
    color: var(--text);
  }

  #path-display {
    color: var(--text-dim);
    opacity: 0.6;
    max-width: 40%;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }

  .overlay {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.82);
    z-index: 100;
    justify-content: center;
    align-items: center;
  }

  .overlay.visible { display: flex; }

  .overlay-box {
    background: var(--surface);
    border: 1px solid var(--border);
    max-width: 540px;
    width: 90%;
    padding: 2rem;
    max-height: 85vh;
    overflow-y: auto;
  }

  .overlay-box h3 {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.75rem;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    margin-bottom: 1rem;
  }

  .overlay-box button {
    background: none;
    border: 1px solid var(--border);
    color: var(--text-dim);
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.7rem;
    padding: 0.4rem 1rem;
    cursor: pointer;
    letter-spacing: 0.05em;
  }

  .overlay-box button:hover {
    border-color: var(--border-light);
    color: var(--text);
  }

  #hint-box h3 { color: var(--gold); }
  #map-box h3 { color: var(--accent); }

  #hint-text {
    color: var(--text);
    margin-bottom: 1.5rem;
    line-height: 1.6;
  }

  .map-room {
    display: flex;
    align-items: baseline;
    gap: 0.75rem;
    padding: 0.3rem 0;
    border-bottom: 1px solid var(--border);
    font-size: 0.85rem;
  }

  .map-room-num {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.7rem;
    color: var(--accent-dim);
    min-width: 1.8rem;
    text-align: right;
  }

  .map-room-name { color: var(--text); flex: 1; }
  .map-room.visited .map-room-name { color: var(--text-bright); }
  .map-room.current .map-room-name { color: var(--gold); }
  .map-room.unvisited .map-room-name { color: var(--text-dim); opacity: 0.4; }

  .map-room-tag {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.55rem;
    letter-spacing: 0.05em;
  }

  .map-room.current .map-room-tag { color: var(--gold); }
  .map-room.visited .map-room-tag { color: var(--text-dim); }

  #map-box > button { margin-top: 1.5rem; }

  .victory-glow #room-title { color: var(--gold); }

  @media (max-width: 600px) {
    body { font-size: 16px; }
    #game-container { padding: 1rem; }
    #room-title { font-size: 1.4rem; }
    #stats-bar { gap: 0.8rem; font-size: 0.6rem; }
    .exit-btn { font-size: 0.95rem; padding: 0.7rem 1rem; }
  }
</style>
</head>
<body>

<div id="game-container">
  <div id="header">
    <h1>The Clockwork House</h1>
    <div id="stats-bar">
      <span>ROOM <span id="stat-room">1</span></span>
      <span>STEPS <span id="stat-steps">0</span></span>
      <span>VISITED <span id="stat-visited">1</span>/<span id="stat-total">50</span></span>
    </div>
  </div>

  <div id="room-display">
    <div id="room-number"></div>
    <h2 id="room-title"></h2>
    <div id="room-description"></div>
  </div>

  <div id="exits-section">
    <div id="exits-label">Passages</div>
    <div id="exits"></div>
  </div>

  <div id="controls">
    <div class="ctrl-buttons">
      <button onclick="showHint()">hint</button>
      <button onclick="showMap()">map</button>
      <button onclick="goBack()">back</button>
      <button onclick="restartGame()">restart</button>
    </div>
    <div id="path-display"></div>
  </div>
</div>

<div id="hint-overlay" class="overlay" onclick="closeHint()">
  <div id="hint-box" class="overlay-box" onclick="event.stopPropagation()">
    <h3>A whisper from the walls</h3>
    <div id="hint-text"></div>
    <button onclick="closeHint()">close</button>
  </div>
</div>

<div id="map-overlay" class="overlay" onclick="closeMap()">
  <div id="map-box" class="overlay-box" onclick="event.stopPropagation()">
    <h3>Rooms you remember</h3>
    <div id="map-rooms"></div>
    <button onclick="closeMap()">close</button>
  </div>
</div>

<script>
// ============================================================
//  THE CLOCKWORK HOUSE — 200 ROOMS
// ============================================================
//
//  TRUE PATH (20 rooms):
//    1 → 4 → 8 → 16 → 33 → 20 → 42 → 127 → 64 → 11 →
//    37 → 91 → 6 → 128 → 53 → 144 → 77 → 45 → 169 → 200
//
//  TRAP LOOPS:
//    Basement:      9 ↔ 10 ↔ 15
//    Servants:      13 ↔ 14 ↔ 17
//    Attic:         21 ↔ 22 ↔ 23
//    Plumbing:      26 ↔ 27 ↔ 28
//    Bureaucracy:   34 ↔ 35 ↔ 36
//    Recursive:     46 ↔ 47 ↔ 48
//    Microservices: 55 ↔ 56 ↔ 57
//    Dep Hell:      80 ↔ 81 ↔ 82
//    Infinite Loop: 95 ↔ 96 ↔ 97
//    Stack Overflow:130 ↔ 131 ↔ 132
//
//  FALSE PATH: 110 → 111 → 112 → 113 → 114 → 115 → 116 → 117 (dead end)
// ============================================================

const ROOMS = {

1: {
  id: 1, title: "The Entrance Hall",
  description: `
<p>The door behind you doesn't so much close as <em>commit</em> — a final, irreversible merge into the house's main branch. You stand in an entrance hall that appears to have been designed by someone who learned architecture from a corrupted ZIP file. The wallpaper is load-bearing. You can tell because someone has written <strong>"LOAD-BEARING — DO NOT REMOVE"</strong> on it in Sharpie, and underneath, in a different hand: <em>"we removed some in '97. three rooms collapsed into a single namespace."</em></p>
<p>A grandfather clock dominates the far wall, its face rendered in hexadecimal. It reads <strong>0x04</strong>, which is either the time, a memory address, or the number of regrets you'll accumulate per minute. The pendulum swings with the regularity of a well-configured cron job. Beneath the clock face, in tiny engraved letters: <em>"parseInt('04', 16) === parseInt('04', 10). This is not always the case. Treasure the coincidences."</em></p>
<p>Five passages radiate outward like the fingers of a hand that has made several poor decisions. A moth circles the fourth passage with the obsessive determination of a pointer that has found something to dereference and <strong>will not be dissuaded</strong>. The moth's flight path traces a perfect figure-four, over and over, as if it's stuck in a recursive function with exactly one base case.</p>
<p>The welcome mat reads: <strong>"THIS HOUSE HAS 200 ROOMS. YOU NEED 20. THE DOCUMENTATION IS LYING."</strong> Below that, in smaller text: <em>"The documentation is always lying. This is the first lesson. The second lesson is about pointers. You are not ready for the second lesson."</em> Someone has scratched into the plaster beside the first passage: "The hour tells you where to go, but the hour lies approximately 37.5% of the time. This is not one of those times." Three-eighths. You file that fraction away for later, when fractions might matter more and the clock might matter less.</p>
<p>A small sign by the door reads: <em>"Fire exits lead to more fire. This is a feature, not a bug. — The Management"</em></p>
  `,
  exits: [
    { label: "The passage the moth keeps circling", target: 4, flavor: "The moth approves. The moth has always approved." },
    { label: "A narrow hallway lined with mirrors", target: 2, flavor: "Your reflection waves before you do." },
    { label: "A well-lit corridor marked 'STAFF ONLY (this means you)'", target: 13, flavor: "The bell board chimes as you approach." },
    { label: "A side door with a faded nursery rhyme pinned to it", target: 7, flavor: "You hear a toy telephone ringing." },
    { label: "A grand staircase ascending into improbable geometry", target: 29, flavor: "The stairs go up. Probably. Geometry is negotiable here." },
  ],
  hint: "The grandfather clock reads 0x04. In hexadecimal, that's just 4. The scratched message confirms the hour isn't lying this time. Follow the moth.",
  correct: 4,
},

4: {
  id: 4, title: "The Study",
  description: `
<p>Books. Thousands of them, and every single one is hollow. You pull one from the shelf — <em>"Advanced Load-Bearing Wallpaper: A Structural Analysis"</em> — and inside is nothing but a slip of paper reading <strong>"SEE OTHER BOOK."</strong> The other book contains an identical slip. You have discovered the house's first circular dependency, and you haven't even sat down yet.</p>
<p>A mahogany desk dominates the room, its surface scarred with the kind of scratches that suggest someone once tried to solve a problem here and the problem won. On the desk, written in chalk that seems to replenish itself: <strong>2, 3, 5, 7, __</strong>. Beside it, a note in elegant script: <em>"The next prime opens the way."</em> The number 11 practically <em>glows</em> in your mind. It is obvious. It is elegant. It is, the house would like you to know, <strong>a trap</strong> — but the house isn't going to tell you that. The house has a non-disclosure agreement with itself.</p>
<p>However. On a reading stand near the window sits an enormous volume: <strong>"A Brief History of Doors I Have Regretted Opening"</strong>, published by O'Reilly Media. The cover depicts what appears to be a segmentation fault rendered as a small woodland creature. The book is 4,000 pages long. Page 8 is bookmarked with a leather tab, and on that page, in large friendly letters — the kind of letters that would offer you a cup of tea and genuinely mean it — are the words: <strong>"THIS ONE."</strong></p>
<p>A whiteboard on the far wall displays a binary tree diagram, drawn with the precision of someone who has opinions about whiteboard markers. The root node contains the value <strong>8</strong>. Its children are labeled "regret" and "more regret." The leaf nodes all contain <em>null</em>. Someone has written beneath the tree: <em>"In computer science, we put the most important thing at the root. In this house, we do the same. The tree does not lie. The primes, however, have retained counsel."</em></p>
<p>A desk drawer contains a sticky note: <em>"TODO: remove misleading prime sequence. Priority: low. Sprint: never."</em></p>
  `,
  exits: [
    { label: "The door marked with a bookmarked page number", target: 8, flavor: "The large friendly letters wish you well." },
    { label: "A passage that smells of old paper and quiet certainty", target: 12, flavor: "Boxes of photographs await." },
    { label: "A door with a prime number engraved on the handle", target: 11, flavor: "The primes beckon. The primes have always been persuasive." },
    { label: "The way you came, back to the entrance", target: 1, flavor: "The moth is still circling." },
    { label: "A dark stairway descending into cool air", target: 10, flavor: "The temperature drops. The temperature is trying to warn you." },
  ],
  hint: "The prime sequence is seductive but false — 11 is a trap. The O'Reilly book has page 8 bookmarked with 'THIS ONE' in large friendly letters. The binary tree's root node is 8. Two independent data sources agree. Trust the redundancy.",
  correct: 8,
},

8: {
  id: 8, title: "The Clock Tower",
  description: `
<p>You ascend a spiral staircase through the exposed innards of the house's temporal infrastructure. Gears mesh and unmesh around you — brass teeth against iron teeth against what appears to be <em>actual bone</em>, though the house's HR department would like you to know that all skeletal components were ethically sourced from previous load-bearing structures. The staircase wraps around a central column like a helix, and the gears turn with the kind of precision that suggests someone once cared very deeply about this mechanism and has since <strong>moved on to other regrets</strong>.</p>
<p>Four clock faces occupy the cardinal walls. The north face reads <strong>27:83</strong>, a time that has never existed and never will, though it's trying very hard. The east face reads <strong>π:∞</strong>, which is either a time, a ratio, or an emoticon for existential despair. The west face displays <em>a drawing of a horse</em>. Beneath the horse, a small brass plaque reads: <span style="font-family:monospace">title='Ignore me' alt='Seriously' aria-label='I am not a real clock'</span>. The horse looks somewhat offended by its own metadata.</p>
<p>The south face shows <strong>16:00</strong>. It is labeled "SOUTH" in small letters, and displayed in crisp 24-hour time — the kind of unambiguous format that a production server would parse without throwing an exception. A sign mounted between the gears reads: <em>"Only the true face tells the true time. The true time is written in a format your production server would actually parse. If your production server parses horse, you have larger problems than this house."</em></p>
<p>The bone gears click and whir. One of them appears to be a human femur, repurposed with the kind of pragmatic engineering that says <em>"the sprint deadline was yesterday."</em> A maintenance log dangles from a chain: <em>"Gear alignment nominal. Horse clock still not a clock. South face still correct. Bone gears — do not ask about the bone gears."</em></p>
<p>Through the south-facing window, you can see the garden far below, arranged in a pattern that might be hexadecimal if you squint. You don't squint. Squinting has never helped anyone in this house.</p>
  `,
  exits: [
    { label: "The south door, beneath the only parseable clock", target: 16, flavor: "16:00. The server accepts this. You should too." },
    { label: "A maintenance hatch leading to the kitchen below", target: 5, flavor: "Something smells like Fibonacci and regret." },
    { label: "Back down the spiral stairs", target: 4, flavor: "The binary tree's root still reads 8. It's sentimental." },
    { label: "A narrow door behind the horse clock", target: 21, flavor: "The horse's aria-label said to ignore it. You didn't listen." },
    { label: "An iron ladder ascending through a gap in the gears", target: 26, flavor: "The gears part reluctantly. They were enjoying your company." },
  ],
  hint: "Four clocks, but only one shows a valid time. 27:83 is impossible, pi:infinity is absurd, the horse is explicitly tagged as not a clock. 16:00 in 24-hour format is the only thing a production server would parse. Go to 16.",
  correct: 16,
},

16: {
  id: 16, title: "The Music Room",
  description: `
<p>A grand piano stands open in the center of the room, its strings exposed like a ribcage after autopsy — if the autopsy were performed by someone with strong opinions about equal temperament. The piano has more keys than standard. Significantly more. You count them and arrive at a number that makes you uncomfortable, so you count again and arrive at a different number. The piano's key count is, apparently, <strong>nondeterministic</strong>.</p>
<p>On the music stand sits sheet music titled: <strong>"Composition in D Minor, for Thirty-Three Fingers (npm install fingers-extended required)."</strong> The composer is listed as "Anonymous (but in the way where everyone knows it was Dave)." Below the title, performance notes: <em>"Tempo: 33 BPM. Time signature: 33/4. If you do not have thirty-three fingers, the house recommends you grow additional ones. The house is not responsible for any fingers grown in response to this recommendation."</em></p>
<p>A metronome on the piano ticks with the meditative patience of a process that will not be killed. Its current tempo: <strong>33 BPM</strong>. Each tick is exactly 1.818 seconds apart. Someone has taped a <span style="font-family:monospace">package.json</span> to the music stand. Under <em>dependencies</em>: <strong>"fingers-extended": "^33.0.0"</strong>. The caret means it will accept any minor or patch version above 33.0.0 but the major version — the <em>important</em> number — is <strong>thirty-three</strong>.</p>
<p>A vinyl record spins on a turntable in the corner. Its label reads <strong>"Track 3"</strong> in embossed gold letters. Track 3 is loud, insistent, and playing something that might be jazz or might be a garbage disposal processing a French horn. The record <em>wants</em> your attention. The record has been <em>optimized</em> for your attention. A small sign next to the turntable reads: <em>"This record is a distraction. Like all good distractions, it is confident and well-produced. Do not confuse confidence with correctness."</em></p>
<p>The metronome ticks. Thirty-three beats per minute. Thirty-three fingers. Version thirty-three. The room is not subtle about this. The room has tried subtlety before and found it <strong>insufficient</strong>.</p>
  `,
  exits: [
    { label: "The door that resonates with the metronome's tempo", target: 33, flavor: "Thirty-three. The room exhales." },
    { label: "A curtained alcove where Track 3 seems to originate", target: 3, flavor: "The vinyl was confident. The vinyl was wrong." },
    { label: "Stone steps descending into dampness", target: 15, flavor: "The cistern awaits. The cistern always awaits." },
    { label: "Back through the gear-lined passage", target: 8, flavor: "The bone gears welcome you back without judgment." },
    { label: "A side door with '34' scratched out and rewritten as '34'", target: 34, flavor: "Someone couldn't decide. They decided anyway." },
  ],
  hint: "Everything in this room converges on 33: the sheet music requires 33 fingers, the metronome beats at 33 BPM, and the package.json locks the major version at 33. Track 3 is a confident distraction. Don't confuse three with thirty-three.",
  correct: 33,
},

2: {
  id: 2, title: "The Mirror Gallery",
  description: `
<p>Mirrors line every surface — walls, ceiling, floor. Your reflection arrives approximately 500 milliseconds late, like a CSS transition that someone set to <span style="font-family:monospace">ease-in-out</span> and then forgot about. You raise your hand; your reflection raises its hand half a second later, with the weary compliance of a process that has been asked to do this too many times. In one mirror, your reflection is wearing a hat you don't own — a bowler hat, slightly too small, positioned at an angle that suggests <strong>opinions</strong>.</p>
<p>Three playing cards are pinned to the wall between mirrors: a <strong>Jack</strong>, a <strong>Three</strong>, and a <strong>Nine</strong>. The Three is circled in red marker with an arrow pointing to it and the words <em>"THIS ONE, OBVIOUSLY."</em> The Jack is face-down. You turn it over. In some card games — the older ones, the ones played by people who name variables with single letters — the Jack is worth <strong>one</strong>. Someone has written on the Jack's face in ballpoint: <em>"J == 1. Always has. Check the legacy documentation."</em></p>
<p>The mirror with the hat — the one where you're inexplicably wearing a bowler — shows something else. Behind your hatted reflection, clearly visible in the silvered glass, is <strong>Room 1</strong>. The entrance hall. The grandfather clock. The moth, still circling. The image renders with a slight delay, as if it's being served from a different origin and the CORS headers are <em>barely</em> permissive enough to let it through. A placard beneath this mirror reads: <em>"Server-side rendered. 200ms latency. What you see is where you've been. Where you've been is where you should return."</em></p>
<p>The floor-mirrors make walking treacherous. Each step shows an infinite regression of yourself, each copy slightly more pixelated than the last, as if the house's rendering budget has limits and you've found them. The deepest reflection appears to be mouthing something. You lean closer. It mouths: <em>"One."</em></p>
  `,
  exits: [
    { label: "The mirror showing the entrance hall behind you", target: 1, flavor: "Your reflection nods. It knew you'd figure it out." },
    { label: "A frosted glass door marked 'KITCHEN — AUTHORIZED PERSONNEL'", target: 5, flavor: "Authorization is a strong word for what happens in that kitchen." },
    { label: "The passage the circled Three points toward", target: 3, flavor: "The Three was circled. The Three was a liar." },
    { label: "A narrow corridor lined with more mirrors", target: 14, flavor: "More mirrors. More latency. More hats you don't own." },
    { label: "A door at the gallery's far end, slightly ajar", target: 31, flavor: "What's behind door 31? The house isn't telling." },
  ],
  hint: "The circled Three is a red herring. The Jack equals 1 in legacy card games. The mirror behind you shows Room 1. Your deepest reflection mouths 'One.' Return to the entrance hall and try a different path.",
  correct: 1,
},

3: {
  id: 3, title: "The Conservatory",
  description: `
<p>Glass walls enclose a garden that died with conviction. The plants here didn't wither — they <em>deprecated</em>. Brown ferns curl like closed parentheses. A cactus has somehow rusted. The air smells of chlorophyll and regret, in roughly equal parts, which is to say: the conservatory smells exactly like a failed deployment at 4 AM on a Friday.</p>
<p>But not everything is dead. The survivors — a determined ficus, a sprig of something that might be thyme or might be spite — lean unanimously toward the fourth door. They lean with the desperate, synchronized urgency of microservices reaching for a load balancer during a traffic spike. The ficus has actually <em>grown through</em> the door's keyhole, extending a single tendril into whatever room lies beyond, as if it has already made its decision and is simply waiting for you to <strong>catch up</strong>.</p>
<p>A phonograph in the corner plays a recording that sounds the same forward and backward: <em>"Go back. Go back. Go back."</em> A palindromic error message. The wax cylinder is labeled: <em>"Error 404: Direction Not Found. This message plays in all orientations. It is equally unhelpful in each."</em> Someone has placed a sticky note on the phonograph's horn: <strong>"The plants know. The phonograph doesn't. Trust the biology, not the technology. (This is the only time this house will give you that advice.)"</strong></p>
<p>A terrarium on a wrought-iron stand contains a single sundew, its sticky tendrils glistening with something that is Almost But Not Quite Entirely Unlike morning dew. A brass label on the terrarium reads: <em>"Drosera mendax. Carnivore. More honest than this house's API documentation. Feeds on flies and false confidence."</em> The sundew's tendrils also point toward door four. Even the carnivore agrees.</p>
  `,
  exits: [
    { label: "The door the surviving plants are reaching toward", target: 4, flavor: "The ficus approves. The ficus has been waiting." },
    { label: "A root-choked passage descending to the cellar", target: 9, flavor: "Roots have colonized the stairs. They did not ask permission." },
    { label: "A cracked glass panel leading to the kitchen garden", target: 5, flavor: "The glass crunches. The garden is less dead out there." },
    { label: "Back through the mirror gallery", target: 2, flavor: "Your reflection hasn't caught up yet." },
    { label: "A maintenance corridor behind the phonograph", target: 32, flavor: "The phonograph's advice follows you. It's still wrong." },
  ],
  hint: "Every living plant in the conservatory leans toward door four. The phonograph says 'go back' but the sticky note tells you to trust the biology. Even the carnivorous sundew points to room 4. Follow the survivors.",
  correct: 4,
},

5: {
  id: 5, title: "The Kitchen",
  description: `
<p>The kitchen has been abandoned with the kind of thoroughness that suggests the departure was planned, executed, and subjected to a post-mortem. Copper pots hang from ceiling racks in descending order of existential crisis. The stove is cold. The stove has been cold for longer than some civilizations, and it has <strong>made peace with this</strong>.</p>
<p>On the counter, an egg holder displays five eggs numbered in a hand so precise it might be mechanical: <strong>1, 1, 2, 3, 5</strong>. The sixth holder is empty. A placard leans against it: <em>"What comes after 5? If you said 6, congratulations — you are wrong in the way that most people are wrong, which is to say: confidently and with precedent. The eggs know the sequence. Do you?"</em> The eggs are warm. They should not be warm. Nothing in this kitchen should be warm. The eggs have their own agenda.</p>
<p>A spice rack on the wall holds jars labeled not with spices but with room numbers. Most are filled with ordinary dust. <strong>Jar 8</strong> glows with a golden light — not metaphorically, not <em>sort of</em>, but actually, luminously, in defiance of both physics and the kitchen's electrical code. A label on the jar reads: <em>"Saffron of Correct Passage. Use sparingly. Do not ingest. Do not deploy to production without testing."</em></p>
<p>The refrigerator hums a tone that is Almost But Not Quite Entirely Unlike B-flat. Inside: an empty jar labeled <strong>"TOMORROW'S LEFTOVERS"</strong> (a temporal paradox the house's garbage collector has declined to resolve) and a Post-it note reading: <em>"There are only two hard things in computer science: cache invalidation and naming things. This kitchen has failed at both."</em> The microwave's display reads <strong>NaN:NaN</strong> and is counting neither up nor down.</p>
  `,
  exits: [
    { label: "The pantry door where jar 8 casts its golden light", target: 8, flavor: "The saffron approves. The sequence is complete." },
    { label: "A service corridor back toward the conservatory", target: 3, flavor: "The dead plants haven't gotten any livelier." },
    { label: "The main hallway toward the entrance", target: 1, flavor: "The moth is still there. The moth will always be there." },
    { label: "Stairs down to a damp sub-basement", target: 15, flavor: "The temperature drops. The logic layer thins." },
    { label: "A door propped open with a cookbook titled '39 Recipes for Disaster'", target: 39, flavor: "The cookbook is not a metaphor. The disasters are culinary." },
  ],
  hint: "The eggs follow the Fibonacci sequence: 1, 1, 2, 3, 5 — the next number is 8. The golden glowing jar is also labeled 8. Two clues, one answer. The refrigerator's Post-it is commentary, not navigation.",
  correct: 8,
},

7: {
  id: 7, title: "The Nursery",
  description: `
<p>A rocking horse sways in a room with no draft, propelled by either ghosts or unresolved event listeners. Yellow rubber ducks line the windowsill — you count them: fourteen. You count again: eleven. Again: seventeen. The ducks are experiencing a <strong>race condition</strong>, and they will not be synchronized. A sign on the sill reads: <em>"Duck count is eventually consistent. Do not rely on duck count for navigation. The ducks are not a database."</em></p>
<p>A child's chalkboard leans against the far wall, displaying a drawing of this house rendered in the unsteady hand of someone very young or very afraid. Many doors are drawn in white chalk, but one door is drawn in <strong>red</strong>. The red door has the number <strong>4</strong> above it. The child-artist has drawn themselves going through the red door. On the other side: a stick figure smiling. On this side: several stick figures not smiling. The artistic commentary is <em>unambiguous</em>.</p>
<p>Building blocks are scattered across the floor, spelling — depending on your angle — <strong>TRAP</strong>, or <strong>PART</strong>, or <strong>RAPT</strong>. An anagram that resolves differently based on your position, like a CSS layout that breaks in every browser differently. A toy telephone in the corner rings. You pick it up. A child's voice says: <em>"Four."</em> Then: silence. Then: <span style="font-family:monospace">Connection reset by peer.</span> The dial tone returns. It sounds like the number four, if the number four were a frequency.</p>
<p>In the corner, someone has set up a <strong>rubber duck debugging station</strong>: a small desk, a tiny chair, and a rubber duck positioned with the gravity of a senior engineer reviewing your pull request. The duck faces door four. A placard reads: <em>"Explain your problem to the duck. The duck already knows the answer. The answer is four. The duck has always known."</em></p>
  `,
  exits: [
    { label: "The red door from the child's drawing", target: 4, flavor: "The stick figure on the other side is still smiling." },
    { label: "A low door behind the rocking horse", target: 9, flavor: "The horse rocks faster as you approach, like a warning." },
    { label: "Back through the entrance hall archway", target: 1, flavor: "The moth hasn't moved. The moth is committed." },
    { label: "A trapdoor in the ceiling, propped open", target: 23, flavor: "Toys from above. Toys from every century." },
    { label: "A half-height door with 'WONDERLAND' scratched out", target: 30, flavor: "Someone renamed Wonderland. The new name is illegible." },
  ],
  hint: "The chalkboard's red door is labeled 4. The toy telephone says 'Four.' The rubber duck debugging station faces door 4. The building blocks are anagrammatic noise. Everything that communicates clearly says four.",
  correct: 4,
},

9: {
  id: 9, title: "The Wine Cellar",
  description: `
<p>Cool. Dark. The kind of dark that has <em>opinions</em> about the dark — that considers itself a connoisseur of darkness and finds lesser darkness insufficiently committed. You are below the house now, below the logic layer, in the subbasement where architectural decisions go to ferment. Wine racks line the walls in rows that might follow a pattern or might follow nothing at all. The house's documentation on cellar organization was last updated in 1923 and is tagged <strong>DEPRECATED</strong>.</p>
<p>A sommelier's notebook lies open on a barrel. The entries are meticulous and increasingly unhinged. Early entries discuss the <strong>1847 Margaux</strong> and the <strong>1923 Château Lafite</strong> with professional detachment. <em>"The difference between these vintages is 76 years. This number will not help you. Nothing will help you down here. Your Jira ticket has been moved to the backlog. Your backlog has been archived. Your archive has been deleted. The deletion failed silently."</em></p>
<p>Day 89's entry reads: <em>"I have formed a relationship with the Bordeaux. It is the most stable relationship I have had since entering this house. The Bordeaux does not loop. The Bordeaux does not redirect. The Bordeaux simply <strong>is</strong>. I aspire to be more like the Bordeaux. I will never leave this cellar. (Update, Day 90: I tried to leave. I am back. See: Day 1.)"</em></p>
<p>A Wi-Fi signal strength indicator has been mounted on the stone wall — an actual, physical indicator, bolted into the masonry with industrial hardware. It shows <strong>zero bars</strong>. Beneath it: <em>"NO SIGNAL — YOU ARE BELOW THE ABSTRACTION LAYER. Packets sent from this room are consumed by the foundation. The foundation is not on the network. The foundation does not recognize your protocol. Climb."</em></p>
<p>The exits here cycle like a washing machine stuck on spin — 9, 10, 15, and back again. A chalk mark on the floor reads: <em>"Loop iteration: 4,281."</em></p>
  `,
  exits: [
    { label: "A rusted door into the boiler room", target: 10, flavor: "Deeper into the loop. The loop does not care." },
    { label: "Stone steps descending further to the cistern", target: 15, flavor: "Deeper still. The water is ankle-deep and patient." },
    { label: "A narrow stairway up, marked 'ESCAPE VELOCITY REQUIRED'", target: 7, flavor: "Upward. Where the logic layer resumes." },
    { label: "A service ladder with 'CONSERVATORY' painted above it", target: 3, flavor: "Climb. The dead plants are better than this." },
  ],
  hint: "You are in a trap loop: 9, 10, and 15 cycle endlessly. The Wi-Fi indicator says climb. The exits to rooms 7 or 3 will get you back above the abstraction layer and toward the true path.",
  correct: null,
},

10: {
  id: 10, title: "The Boiler Room",
  description: `
<p>An ancient boiler squats in the center of the room like a cast-iron toad that has been fed a diet of exclusively coal and broken promises. Its pressure gauge reads <strong>zero</strong>, which would be reassuring if the boiler weren't clearly, audibly, <em>unmistakably</em> running. Pipes radiate from its bulk into the walls, ceiling, and floor, carrying heat to rooms that may or may not still exist. The boiler does not care whether the rooms exist. The boiler's contract specifies <strong>heat delivery</strong>, not <strong>room verification</strong>.</p>
<p>Graffiti covers the near wall in three distinct layers of desperation. The first, in chalk: <strong>"WRONG WAY."</strong> The second, in paint, neater, more considered: <strong>"NO SERIOUSLY. WRONG WAY."</strong> The third, carved directly into the stone with what appears to have been a belt buckle: <strong>"YOU'RE STILL HERE? This is the <span style="font-family:monospace">while(true)</span> of rooms. There is no break statement. There is no continue. There is only the loop and the boiler and the dark."</strong></p>
<p>A manufacturer's label on the boiler has been partially replaced with a stack trace: <em>"Exception: RoomNotFoundException — you should not be here. Stack trace: you came from the wrong room. Root cause: you made a choice. Suggested fix: make a different choice. Status: WONTFIX."</em> Below the stack trace, someone has added: <em>"Escalated to God. God closed the ticket."</em></p>
<p>The room has four exits, but two of them lead to rooms 9 and 15, which lead back here. The loop is not subtle about its nature. The loop has <em>branded itself</em>. A small motivational poster on the wall reads: <em>"Hang in there!" </em>with a picture of a cat dangling from a branch. Someone has crossed out "Hang in there" and written <strong>"Get out of here."</strong> The cat looks like it agrees.</p>
  `,
  exits: [
    { label: "The door back to the wine cellar", target: 9, flavor: "The sommelier's notebook awaits. The Bordeaux endures." },
    { label: "A grate in the floor leading to the cistern", target: 15, flavor: "Water below. Logic further below. Neither helps." },
    { label: "A ladder up through a ceiling hatch marked 'MIRRORS'", target: 2, flavor: "Upward. The mirrors will at least show you someone who made better choices." },
    { label: "Emergency exit with a faded 'KITCHEN' sign", target: 5, flavor: "The Fibonacci eggs are warm. The boiler is not why." },
  ],
  hint: "Everything in this room tells you to leave. The graffiti says WRONG WAY three times with increasing urgency. Rooms 9 and 15 are the same trap loop. Go to room 2 or 5 to escape back toward the true path.",
  correct: null,
},

12: {
  id: 12, title: "The Library Annex",
  description: `
<p>Cardboard boxes are stacked against every wall, labeled with years: <strong>1847, 1901, 1923, 1967, 2003, 2024</strong>. Each contains photographs of this exact room. The room in every photograph is <em>identical</em> — same boxes, same labels, same slight water stain on the ceiling shaped like a question mark that has given up on questioning. The room is <strong>immutable</strong>. Its state has never changed. The boxes documenting its unchanging state are, themselves, part of its unchanging state. The recursion is stable, which is more than can be said for most things in this house.</p>
<p>A dictionary lies open on a pedestal, its pages held in place by the weight of the house's expectations. It is open to the word <strong>"FOUR"</strong>: <em>"Four (noun, adjective, numerical): The quantity between three and five. The number of cardinal directions. The number of legs on a table that hasn't been through this house's carpentry department. See also: the correct answer."</em> Someone has underlined <em>"the correct answer"</em> three times.</p>
<p>A glass display case near the entrance contains keys on hooks, each tagged with a room number. You can see: <strong>1, 4, 8, 16, 33, 20, 42, 127, 64, 11</strong> — and then the display simply <em>ends</em>, cut off by the case's edge. A museum-style placard reads: <em>"The True Path (first 10 rooms). Remainder truncated. See full path in production logs. (Production logs were rotated and archived. Archive server is in Room 200. Room 200 requires the full path to access. The irony is structural.)"</em></p>
<p>Every book in the annex, regardless of title, subject, or original Dewey Decimal classification, has been re-cataloged. You check a few: <em>"War and Peace"</em> — Dewey Decimal <strong>4</strong>. <em>"A Brief History of Time"</em> — Dewey Decimal <strong>4</strong>. <em>"The Joy of Cooking"</em> — Dewey Decimal <strong>4</strong>. The catalog system has been compromised. The catalog system has <strong>always</strong> been compromised. A librarian's note: <em>"All roads lead to 4. This is not a metaphor."</em></p>
  `,
  exits: [
    { label: "The door cataloged under Dewey Decimal 4", target: 4, flavor: "Every book agrees. Every book has always agreed." },
    { label: "A passage to the darkroom, smelling of developer fluid", target: 18, flavor: "Red light ahead. Photographs of impossible geometry." },
    { label: "Back through the mirror gallery entrance", target: 2, flavor: "Your reflection is still wearing that hat." },
    { label: "A service tunnel descending toward warmth", target: 10, flavor: "The boiler awaits. The boiler's contract is eternal." },
    { label: "An unmarked door at the annex's far end", target: 25, flavor: "The post office is through here. The mail has been waiting." },
  ],
  hint: "The dictionary is open to FOUR. Every Dewey Decimal number resolves to 4. The librarian's note says 'All roads lead to 4.' The glass case shows the true path's first rooms but is truncated — useful intel, not navigation. Go to room 4.",
  correct: 4,
},

13: {
  id: 13, title: "The Servants' Hall",
  description: `
<p>A long oak table set for twenty, though the chairs suggest the servants left mid-meal sometime around the Eisenhower administration and haven't been back since. Place settings are undisturbed — cutlery oxidized in position, napkins petrified mid-fold, a soup tureen containing what was once soup and is now a <strong>philosophical argument about entropy</strong>. The table has the energy of a standup meeting that everyone walked out of simultaneously.</p>
<p>A duty roster hangs on the wall, yellowed but legible. One entry is circled in red, circled again in blue, and circled a third time in what appears to be <em>blood</em> but is more likely a very committed shade of burgundy ink: <strong>"Room 1 — sweep entrance — EVERY DAY — cron: 0 0 * * *"</strong>. Below the cron expression, a footnote: <em>"Start from the beginning. <span style="font-family:monospace">git checkout main</span>. You have diverged from the main branch. Your feature branch has no future. Rebase."</em></p>
<p>A bell board spans the wall above the door, a row of brass bells each labeled with a room number. Most are corroded into silence — their clappers fused, their springs collapsed, their <em>spirits broken</em> by decades of unrung existence. But Room 1's bell works. You flick it. It rings with a clarity that suggests it has been <em>waiting</em> for this exact moment, maintaining its resonance through sheer force of will and possibly a service-level agreement.</p>
<p>A framed network diagram beside the bell board shows the bell protocol: <strong>HTTP/1.1</strong>. When Room 1's bell is rung, the response is <strong>301 Moved Permanently → Room 1</strong>. The diagram includes a note: <em>"All requests from the servants' corridor redirect to the entrance. This is by design. The servants knew. The servants always knew. That's why they left."</em> The exit to Room 1 glows faintly, as if the house's redirect logic has a visible component.</p>
  `,
  exits: [
    { label: "The corridor to the laundry, steam still visible", target: 14, flavor: "Day 347 of someone else's loop. You're about to start your own." },
    { label: "Through the butler's pantry door", target: 17, flavor: "Tarnished silver and sealed decanters." },
    { label: "The glowing exit toward Room 1", target: 1, flavor: "301 Moved Permanently. The redirect is not negotiable." },
    { label: "A back staircase to the nursery", target: 7, flavor: "The rubber duck awaits your debugging confession." },
  ],
  hint: "You're in a trap loop with rooms 14 and 17. The duty roster says 'git checkout main' — return to the beginning. The bell board's only working bell is Room 1's. The HTTP redirect points to Room 1. Go back to start.",
  correct: 1,
},

14: {
  id: 14, title: "The Laundry",
  description: `
<p>Stone washtubs line the walls, their basins stained with the memory of labor and lye. Clotheslines crisscross overhead, empty except for a single sock — unpaired, as all socks in this house eventually become. The sock is white, or was once white, or aspires to whiteness in the way that deprecated functions aspire to relevance. A sign above the sock reads: <em>"Lost: one sock. If found, return to Room 1. (The other sock is in Room 200. The journey between them is the entire game.)"</em></p>
<p>Tally marks cover the wall beside the largest washtub: <strong>347</strong> of them, scratched in groups of five with the mechanical precision of someone who has lost track of everything except the counting. A laundress's journal sits open on the washboard:</p>
<p><em>"Day 347. The loop is: 13 → 14 → 17 → 13. I have completed 115 iterations. My thread count is maxed. My spin cycle has exceeded all reasonable timeouts. If you're reading this, <strong>break the loop</strong> — go to room 2 or 18. I stayed. I now have opinions about spin cycles that violate the halting problem. The wash is never done. The wash was never the point. The point was to keep moving, and I stopped moving, and the house noticed, and now I am <strong>part of the laundry</strong>."</em></p>
<p>Below the journal entry, in shakier handwriting: <em>"Day 348. I am the sock."</em></p>
<p>The mangles and wringers along the far wall have been repurposed. One feeds fabric into a slot marked <strong>"ROOM 13"</strong>. Another into <strong>"ROOM 17"</strong>. A third, smaller and less used, feeds into a chute labeled <strong>"ROOM 2 — ESCAPE"</strong>. A fourth: <strong>"ROOM 18 — ALSO ESCAPE."</strong> The escape chutes are cleaner. They've seen less traffic. This is the saddest thing in the room, and the room contains a journal about becoming a sock.</p>
  `,
  exits: [
    { label: "The mangle feeding back to the servants' hall", target: 13, flavor: "Iteration 116. The loop tightens." },
    { label: "The wringer leading to the butler's pantry", target: 17, flavor: "The sealed decanter awaits. Do not drink until free." },
    { label: "The escape chute marked 'MIRRORS'", target: 2, flavor: "Upward. Outward. Away from the spin cycle." },
    { label: "The escape chute marked 'DARKROOM'", target: 18, flavor: "Red light. Photographs of rooms you haven't seen yet." },
  ],
  hint: "The laundress is explicit: rooms 13, 14, and 17 form a trap loop. She literally tells you to go to room 2 or room 18 to break free. The escape chutes are right there. Use them.",
  correct: null,
},

15: {
  id: 15, title: "The Cistern",
  description: `
<p>The water is ankle-deep, black, and cold in the way that absolute zero is cold — not as a temperature but as a <em>philosophy</em>. Each step sends ripples that return from the walls at angles that suggest the room is not the shape it appears to be, or the water is not water, or the angles are not angles. Some combination of the three. A brass compass floats on the surface, spinning endlessly — its needle tracing circles with the manic energy of an infinite loop that knows it's infinite and has chosen to <strong>lean into it</strong>.</p>
<p>There is no true direction here. The compass confirms this with every revolution. A plaque on the wall, mounted just above the waterline with the optimistic precision of someone who installed it before the flooding: <em>"You are below the house's logic layer, in the bit bucket. Packets dropped here are not recovered. Memory allocated here is not freed. <strong>Climb.</strong>"</em></p>
<p>Something moves in the water. It might be a fish — the house's original architect reportedly stocked the cistern with goldfish in 1847, and the intervening decades have been <em>unkind</em> to the goldfish's genome. Or it might be a garbage-collected object that hasn't been freed yet, drifting through the heap with the aimless persistence of deallocated memory that doesn't know it's deallocated. You do not investigate. Some objects should not be inspected at runtime.</p>
<p>The cistern connects to the wine cellar and the boiler room, which connect to each other, which connect back here. The topology is a triangle with no hypotenuse — a shape that shouldn't work but does, in the same way that production code shouldn't work but does. A message is painted on the ceiling: <em>"UP. THE ANSWER IS UP. STOP GOING SIDEWAYS."</em></p>
  `,
  exits: [
    { label: "A rusted ladder up to the wine cellar", target: 9, flavor: "The sommelier's loop awaits. The Bordeaux is patient." },
    { label: "A pipe large enough to crawl through, toward heat", target: 10, flavor: "The boiler's pressure gauge still reads zero. The boiler still runs." },
    { label: "A vertical shaft with iron rungs, leading far up to the kitchen", target: 5, flavor: "The Fibonacci eggs are calling. Climb toward the sequence." },
  ],
  hint: "The ceiling literally says 'UP. THE ANSWER IS UP.' Rooms 9 and 10 are the same trap loop. The only escape is room 5, which leads back toward the true path. Climb the vertical shaft.",
  correct: null,
},

17: {
  id: 17, title: "The Butler's Pantry",
  description: `
<p>Tarnished silver lines the shelves in rows so precise they could be used as a unit of measurement — and in this house, they probably have been. Every piece is blackened with age except one: a sealed crystal decanter at the room's center, gleaming as if polished moments ago by someone who takes decanter maintenance <em>very seriously</em>. Its stopper is wax-sealed, and the wax bears an imprint: a door with the number <strong>4</strong> above it. The label reads: <em>"For the one who finds the way. Do not drink until free. May contain traces of undefined behavior. Pairs well with escape."</em></p>
<p>A butler's ledger lies open beside the decanter. The entries span decades, meticulously tracking every guest who passed through this house. The ledger's data is clear: <strong>guests who visited Room 4 second had a 100% escape rate</strong>. A marginal note in red: <em>"This is both statistically significant and deeply annoying to those who went to Room 7 first. Chi-squared test confirms significance at p < 0.001. The house's ethics board did not approve this experiment because the house does not have an ethics board."</em></p>
<p>The pantry's three interior doors lead to rooms 13 and 14 — the servants' loop. You can hear the bell board in room 13, and the clotheslines creaking in room 14. The loop wants you back. The loop has <em>prepared a place for you</em>. But a fourth exit, partially hidden behind a rack of serving trays, leads outward. A note taped to this door: <em>"Room 19. Not the answer, but closer to the answer than the servants' corridor will ever be. The portraits there remember the ones who escaped."</em></p>
<p>The sealed decanter catches the light. You wonder what's inside. The label's mention of <em>undefined behavior</em> suggests that opening it would either solve everything or corrupt your save file. In this house, those outcomes may be identical.</p>
  `,
  exits: [
    { label: "Back through the servants' hall door", target: 13, flavor: "The bell board rings for Room 1. It's been ringing this whole time." },
    { label: "The corridor connecting to the laundry", target: 14, flavor: "The laundress's tally is now 348. Or 349. The count diverges." },
    { label: "The hidden door behind the serving trays", target: 19, flavor: "Portraits of the escaped and the lost. You'll be in one soon." },
    { label: "A passage with a faint glow from the entrance", target: 1, flavor: "The moth still circles passage four. The moth is eternal." },
  ],
  hint: "The servants' loop is rooms 13, 14, and 17. The ledger confirms Room 4 is on the true path but you can't get there directly from here. Room 19 leads to the portrait gallery, which can redirect you to Room 1 — and from there, back to Room 4. Take the hidden door.",
  correct: null,
},

18: {
  id: 18, title: "The Darkroom",
  description: `
<p>A red safelight bathes everything in the color of warnings, error states, and the particular shade of embarrassment you feel when you realize you've been debugging the wrong branch for three hours. Development trays line the counter — developer, stop bath, fixer — the chemical trinity of analog photography, laid out with the reverence of a deployment pipeline that <strong>actually works</strong>.</p>
<p>Photographs hang from clips on a wire, drying in the warm red air. They show rooms in this house from angles that should not be possible — as if the camera were positioned <em>inside the DOM</em>, rendering each room from within its own markup. One photograph is circled in grease pencil: <strong>Room 20</strong>. The Maps Room. It shows a large table covered in cartographic attempts, each one wrong in a different way. The note beneath the photo: <em>"The maps room leads onward. This is not a suggestion. This is a deployment order."</em></p>
<p>Another photograph shows <strong>you</strong>, standing in this darkroom, looking at this photograph of you standing in this darkroom. The recursion renders cleanly down to about seven levels before the image quality degrades into pixel noise. The fact that it compiled at all suggests either extraordinary engineering or a memory leak of <em>biblical proportions</em>. You choose not to look too closely at the seventh level. The seventh level appears to be looking back.</p>
<p>The EXIF data on the circled photograph is displayed on a small monitor: <em>"Room 20. ISO 42. Aperture f/∞. Shutter speed: the exact moment you make the right decision. Camera: Nikon Recursive-1. Lens: 20mm (this number is also not a coincidence)."</em> The number 20 occurs in this room with a frequency that transcends coincidence and enters the territory of <strong>deliberate hammering</strong>.</p>
  `,
  exits: [
    { label: "The door circled in every photograph", target: 20, flavor: "Room 20. ISO 42. The numbers converge." },
    { label: "A light-sealed passage to the library annex", target: 12, flavor: "Every Dewey Decimal number still resolves to 4." },
    { label: "Through the greenhouse's broken glass ceiling", target: 24, flavor: "Shattered glass and wild growth. A sundial awaits." },
    { label: "A back corridor connecting to the laundry's escape chute", target: 14, flavor: "The laundress is on Day 349. Or Day 1. The count has wrapped." },
    { label: "A door labeled only with the number 44", target: 44, flavor: "44 is not 20. But it's nearby, numerically if not architecturally." },
  ],
  hint: "Room 20 is circled in the photographs, mentioned in the deployment order, encoded in the EXIF data (ISO 42 is a Douglas Adams reference, but the 20mm lens and Room 20 metadata are the navigation clue). The maps room leads onward. Go to 20.",
  correct: 20,
},

19: {
  id: 19, title: "The Portrait Gallery",
  description: `
<p>Portraits line both walls of a long corridor, each illuminated by its own gas lamp that burns with a flame color corresponding to the subject's <em>outcome</em>. Green for those who escaped. Red for those who didn't. The ratio is approximately 1:42, which is either a coincidence or the universe's favorite joke. Most of the flames are red. The gallery is warm with the heat of documented failure.</p>
<p>Each portrait has a brass plaque. The first: <em>"First Visitor, 1847. Lost. Room 9 → Room 10 → Room 15 → Room 9 → [STACK OVERFLOW]. Exit code: 1."</em> The twelfth: <em>"Twelfth Visitor, 1951. Found. Room 1 → Room 4 → Room 8 → [TRUNCATED]. Exit code: 0."</em> The twelfth visitor's portrait shows a person holding up <strong>four fingers</strong> with the serene confidence of someone who knows the answer and is not going to elaborate further. Their lamp burns green.</p>
<p>Your portrait hangs at the corridor's end. The frame is ornate, the canvas blank. The plaque reads: <em>"Current Visitor. Status: PENDING. Build status: UNKNOWN. Coverage: 0%. The portrait will render upon completion. Or upon failure. Whichever comes first. The frame does not judge."</em></p>
<p>The twelfth visitor's portrait <em>winks</em>. This is an oil painting. Oil paintings do not wink. The animation should not exist, and yet it loops with the smooth confidence of a CSS keyframe animation running at 60fps in a medium that predates electricity. You examine the frame. It has a <span style="font-family:monospace">data-next-room="1"</span> attribute carved into the wood. The HTML attribute is carved into physical wood. You do not question this. You have been in this house long enough to accept that the DOM is a physical place and the physical world is poorly documented.</p>
  `,
  exits: [
    { label: "A passage marked with a green lamp (exit code: 0)", target: 1, flavor: "The twelfth visitor winks again. Four fingers. Room one." },
    { label: "An archway with a faint red glow beyond", target: 6, flavor: "Red light. Not the darkroom — something else." },
    { label: "Steps ascending to the attic toy room", target: 23, flavor: "The automaton is still writing. It will never stop writing." },
    { label: "A door back to the butler's pantry", target: 17, flavor: "The decanter remains sealed. The undefined behavior remains contained." },
    { label: "A corridor leading to unfamiliar territory", target: 41, flavor: "Territory the portraits don't cover. That might be good or bad." },
  ],
  hint: "The twelfth visitor escaped and holds up four fingers — but you can't go directly to Room 4 from here. The data attribute carved into the frame says data-next-room='1'. Return to Room 1, then take the correct path to Room 4. Exit code 0 means success.",
  correct: 1,
},

21: {
  id: 21, title: "The Attic Storeroom",
  description: `
<p>Steamer trunks are stacked like cairns, each one labeled with a destination that no longer exists — <em>"Constantinople," "The USSR," "Geocities."</em> A dressmaker's dummy stands in the corner with the rigid posture of a senior engineer watching you make choices it disagrees with. The dummy wears a tape measure around its neck like a noose of specification. It judges you. You deserve to be judged. You are in the attic.</p>
<p>A bundle of letters sits atop the nearest trunk, tied with ribbon that was once red and is now the color of regret. They are addressed to <em>"The Next Guest"</em> and written in a hand that started elegant and ended frantic:</p>
<p><em>"If you're reading this, you've gone too high. You are above the CDN, above the cache layer, above the load balancer, above everything that matters. The rooms that advance you — the clocks, the maps, the motivational dolphin (you'll know it when you see it) — are <strong>below</strong>. Go down. This is not a CSS z-index directive. This is not a metaphor for emotional vulnerability. Please literally descend. The attic contains three rooms that connect only to each other and to memories of better decisions. I wrote this letter on day 14. It is now day 900. I am the dressmaker's dummy. I got tired of standing and now I can't stop."</em></p>
<p>A music box sits on a trunk. You open it. It plays three notes — C, E, G — a major chord, almost hopeful, and then it <em>stops</em>. Not winds down. Stops. The mechanism inside has thrown an exception, a tiny gear jammed at an angle that gear teeth should not accommodate. Inside the lid, scratched in desperation: <em>"Down, down, down. (This is not a CSS z-index. Please literally descend.) Room 8 is below you. Room 11 is adjacent. Both are better than here. BOTH."</em></p>
  `,
  exits: [
    { label: "A narrow passage to the widow's walk", target: 22, flavor: "Wind and wrong geometry. The weathervane awaits." },
    { label: "The toy room, through a child-sized door", target: 23, flavor: "Centuries of toys. One relentless automaton." },
    { label: "Iron stairs descending to the clock tower", target: 8, flavor: "Down. The bone gears turn. The south face reads 16:00." },
    { label: "A fire escape to the side of the house", target: 11, flavor: "The fire escape works. In this house, that's remarkable." },
  ],
  hint: "The letters explicitly tell you: go DOWN. You're above the useful rooms. Room 8 (the clock tower) is on the true path. Room 11 is also reachable and is a true path room. Both are better than staying in the attic loop of 21-22-23.",
  correct: null,
},

22: {
  id: 22, title: "The Widow's Walk",
  description: `
<p>Wind. The kind of wind that has read your commit history and is <em>not impressed</em>. You stand on a narrow railed walkway atop the house, exposed to a sky that is the wrong color — not wrong like sunset-wrong, but wrong like <strong>the sky's CSS has been overridden by an inline style</strong> and nobody has caught it in code review. Below you, the landscape extends in geometric hedgerows that tile with the eerie regularity of procedurally generated terrain. The seed is 42. You don't know how you know this, but you know this.</p>
<p>A weathervane rises from the peak of the roof, wrought iron in the shape of a rooster that has seen things roosters should not see. The vane points in a single direction and does not move despite the wind. It has been <strong>welded</strong>. Not rusted in place, not stuck, but deliberately, professionally <em>welded</em> to point at a specific angle. The angle corresponds to Room 11's position in the house. Someone climbed up here with a welding torch and the conviction that the weathervane should point at Room 11 and <strong>never stop pointing at Room 11</strong>.</p>
<p>A telescope is bolted to the railing. Through it, you can see the observatory — Room 11 — through a skylight below and to the north. The observatory contains what appears to be a motivational poster featuring a dolphin, but at this distance you can't read the text. You want to read the text. The house knows you want to read the text. The house <em>designed this moment</em>.</p>
<p>Above you, the stars form constellations that are not in any recognized astronomical catalog. One constellation resembles a disappointed accountant. Another looks like a stack trace. A third spells out what might be the number <strong>11</strong> if you tilt your head and accept that stars can spell numbers. A <span style="font-family:monospace">kubectl</span> dashboard has been projected onto the clouds (somehow) showing pod status: <em>"room-11: Running. room-21: CrashLoopBackOff. room-22: CrashLoopBackOff. room-23: CrashLoopBackOff."</em> The attic pods are crashing. Room 11 is the only healthy service.</p>
  `,
  exits: [
    { label: "Back through the attic storeroom door", target: 21, flavor: "The dressmaker's dummy hasn't moved. Or has it?" },
    { label: "A ladder across the roof to the toy room window", target: 23, flavor: "The automaton is visible through the window. Still writing." },
    { label: "The fire escape descending to Room 11", target: 11, flavor: "The weathervane approves. The weathervane was built to approve this specific choice." },
  ],
  hint: "The weathervane was literally welded to point at Room 11. The telescope shows Room 11's observatory. The kubectl dashboard shows Room 11 as the only healthy pod while all attic rooms are in CrashLoopBackOff. Descend to Room 11.",
  correct: 11,
},

23: {
  id: 23, title: "The Toy Room",
  description: `
<p>Toys from different centuries occupy the same shelves with the uneasy truce of legacy code and modern frameworks sharing a monorepo. Victorian tin soldiers stand beside a 1980s Rubik's Cube beside what appears to be a toy from the future — a small cube that occasionally flickers and displays the text <em>"LOADING..."</em> before returning to being a cube. The toys have achieved a temporal diversity that most engineering teams only aspire to.</p>
<p>In the center of the room, a mechanical automaton sits at a tiny desk. It is brass and copper and something that might be ivory but is more likely the house's dental plan. Its arm moves with metronomic regularity, dipping a quill in ink and writing on a scroll of paper that feeds through the desk and coils on the floor. The scroll is <em>enormous</em> — yards and yards of it, filling a corner of the room. Every line reads the same thing: <strong>"The answer is ONE. Go to room ONE."</strong> The automaton is on attempt <strong>1,001</strong> of <span style="font-family:monospace">Integer.MAX_VALUE</span>. It has 2,147,482,646 attempts remaining. The quill has a comment scratched into its shaft: <em>"// TODO: stop writing this. Will never stop. Accepted. Moved to backlog. Backlog deleted. Still writing."</em></p>
<p>A set of nesting dolls sits on a shelf, each painted with a room number. You open them: <strong>1, 4, 8, 16, 33, 20, 42, 127, 64, 11, 37</strong>. The innermost doll is too small to open but you can feel something rattling inside — the remaining rooms of a sequence you don't yet understand. The dolls are painted with the care of someone who knew the path and wanted to leave breadcrumbs for those who didn't.</p>
<p>A jack-in-the-box sits on the toy chest. You turn the crank. It plays a tinkling melody — <em>"Pop Goes the Weasel"</em> rendered in a minor key that suggests the weasel did not, in fact, pop, but rather experienced a controlled shutdown. The lid bursts open. Inside: a tiny figure holding a tiny sign that reads <strong>"1"</strong>. The figure's expression is the painted equivalent of someone who has been saying the same thing for 150 years and has run out of ways to make it interesting.</p>
  `,
  exits: [
    { label: "Through the attic storeroom passage", target: 21, flavor: "The dressmaker's dummy awaits your return. It has not moved. (Probably.)" },
    { label: "The ladder across the roof to the widow's walk", target: 22, flavor: "Wind and welded weathervanes." },
    { label: "A chute that drops to the nursery below", target: 7, flavor: "The rubber duck is still debugging. The rubber duck never stops." },
    { label: "A slide that descends all the way to the entrance hall", target: 1, flavor: "The automaton's message is clear. Room ONE." },
  ],
  hint: "The automaton endlessly writes 'Go to room ONE.' The jack-in-the-box holds up a sign reading '1.' Both point to Room 1. The nesting dolls show the true path sequence starting from Room 1 — valuable intelligence. Return to Room 1 and start the true path from the beginning.",
  correct: 1,
},

24: {
  id: 24, title: "The Greenhouse Ruin",
  description: `
<p>Glass panes have surrendered to gravity and time, leaving the greenhouse open to the elements in the way that a server with no firewall is open to the internet. Wild growth has colonized every surface — ivy climbing the iron frame, ferns erupting from the drainage channels, a rosebush that has achieved a size and disposition that suggests it has <strong>unionized</strong>. The plants here didn't just survive the greenhouse's collapse; they <em>leveraged</em> it.</p>
<p>A stone sundial stands at the intersection of four overgrown paths, its gnomon casting a shadow that falls on <strong>20</strong> — where noon should be, where twelve should be, where the shadow has no business pointing, and yet. The sundial's face has been re-engraved: the number 12 replaced with 20, and every other hour replaced with numbers that make no horological sense. A brass plate on the sundial's base: <em>"This sundial tells the correct room, not the correct time. It has never told the correct time. Time is handled by the clock tower. Rooms are handled here. Separation of concerns."</em></p>
<p>A vine — thick as a wrist and green as a passing unit test — has grown in the unmistakable shape of the number <strong>20</strong>. Both digits are clearly formed, the 2 curving with calligraphic precision, the 0 a perfect oval. This is either a remarkable coincidence, or the vine has been <em>refactored</em>. Its growth pattern, examined closely, follows a depth-first search that always terminates at the same node. A botanist's tag on the vine reads: <em>"Hedera navigatrix. Common name: Pathfinder Ivy. Growth pattern: DFS, max_depth=20, always_terminate=true."</em></p>
<p>Broken glass crunches underfoot with every step, each shard reflecting a different room in the house — a mosaic of possibilities that the greenhouse has already narrowed to one. The rosebush's thorns all point toward the same exit. Even the weeds have an opinion, and their opinion is <strong>20</strong>.</p>
  `,
  exits: [
    { label: "The path where every plant points", target: 20, flavor: "The sundial, the vine, the thorns. Twenty." },
    { label: "Through the darkroom's broken ceiling", target: 18, flavor: "Red light below. Photographs of rooms you've seen and rooms you haven't." },
    { label: "A root-tangled descent to the cistern", target: 15, flavor: "The water is still ankle-deep. The compass still spins." },
    { label: "A gap in the iron frame overlooking Room 11", target: 11, flavor: "The observatory skylight is visible from here." },
    { label: "An overgrown gate to an unfamiliar garden path", target: 43, flavor: "The rosebush does not approve of this exit. The thorns are clear." },
  ],
  hint: "The sundial points to 20. The vine has literally grown into the shape of the number 20. The depth-first search terminates at 20. The thorns point to 20. Everything organic in this greenhouse has formed a consensus: go to Room 20.",
  correct: 20,
},

25: {
  id: 25, title: "The Post Office",
  description: `
<p>A postal station occupies what might once have been a butler's office, converted with the enthusiasm of someone who believed strongly in internal mail systems and less strongly in <em>architecture</em>. Cubbyholes line the far wall, each labeled with a room number in brass digits — 200 slots for 200 rooms, a complete addressing scheme for a house that most postal services would refuse to acknowledge. The sorting system uses neither ZIP codes nor postal routes but rather what appears to be a <strong>proprietary routing protocol</strong> that predates both TCP/IP and the concept of reliable delivery.</p>
<p>Room 1's cubbyhole contains a letter. The envelope is cream-colored, sealed with wax bearing the house's crest (a gear meshed with a question mark), and addressed to <em>"Current Occupant, The Wrong Room."</em> Inside:</p>
<p><em>"Dear Guest, please return to Room 1. The house is becoming impatient, which is a state you do not want the house to achieve. Impatient houses rearrange their floorplans. This message was sent via SMTP and also via owl. The owl arrived first. The SMTP message is still in the queue. Regards, The Management. P.S. Do not reply-all. The house has 200 rooms on the distribution list and they all have opinions."</em></p>
<p>The postage stamp on the envelope shows a miniature painting of the entrance hall — the grandfather clock, the moth, the load-bearing wallpaper, all rendered in meticulous detail at stamp-sized scale. The postmark reads: <strong>"LOCALHOST"</strong>. The return address is <strong>"127.0.0.1, The House, The House, The House."</strong> A loopback address. The house is writing to itself. The house has always been writing to itself. You are merely a read receipt.</p>
  `,
  exits: [
    { label: "The delivery route marked 'ROOM 1 — PRIORITY MAIL'", target: 1, flavor: "The house is impatient. The owl has already arrived." },
    { label: "A mail chute connecting to the library annex", target: 12, flavor: "Every Dewey Decimal number still resolves to 4." },
    { label: "A service corridor to an unfamiliar wing", target: 38, flavor: "The postal system does not guarantee delivery to this corridor." },
    { label: "A back door opening onto a walled garden path", target: 32, flavor: "The garden path is literal. The metaphor is also literal. Everything is literal." },
  ],
  hint: "The letter explicitly asks you to return to Room 1. The postage stamp shows the entrance hall. The postmark says LOCALHOST — you need to go home. Room 1 is where the true path begins, and from there you can reach Room 4.",
  correct: 1,
},

6: {
  id: 6, title: "The Chandelier Ballroom",
  description: `
<p>You stand beneath a chandelier so vast it has its own weather system. Crystal pendants catch light from sources that refuse to identify themselves, splitting each beam into precisely <strong>128 spectral components</strong>. The ballroom floor is a mosaic of hexagonal tiles, each engraved with a different network port number. Someone has polished port 53 until it gleams.</p>
<p>The walls are lined with portraits of the house's former architects, each one holding a different networking cable. The portrait labeled "Founder" clutches a DNS query in one hand and points decisively toward the ceiling with the other. A small plaque reads: <em>"She resolved all names to their true addresses."</em></p>
<p>A mechanical orchestra occupies the far end of the room, playing a waltz in packets that arrive out of order but somehow reassemble into music. The conductor's baton moves in <strong>UDP</strong>—fast, unreliable, and strangely beautiful. A towel draped over the first violin's chair bears the monogram "D.A."</p>
<p>In the center of the dance floor, a spinning brass compass needle has frozen mid-rotation. Its direction is ambiguous—unless you happen to know which port handles domain name resolution. The answer, like all good answers, is a number that sounds like it should be prime but isn't.</p>`,
  exits: [
    { label: "Follow the DNS resolution", target: 128, flavor: "Port 53 knows where everything lives. The compass agrees." },
    { label: "Descend through port 80", target: 19, flavor: "HTTP is fine for browsing, but this isn't a browser" },
    { label: "Swing from the chandelier", target: 43, flavor: "Gravity is not a protocol you can negotiate with" },
    { label: "Dance with the UDP orchestra", target: 28, flavor: "Connectionless. Stateless. Lost." },
    { label: "Follow the towel", target: 42, flavor: "A hoopy frood would know where that leads" },
    { label: "Polish another tile", target: 14, flavor: "Port 14 is unassigned. So is this exit." },
  ],
  hint: "DNS uses port 53. But port 53 isn't the exit—it's the clue. What's 2^7?",
  correct: 128,
},

11: {
  id: 11, title: "The Observatory of Recurring Dreams",
  description: `
<p>The domed ceiling is a planetarium of impossible constellations. Stars are arranged not by gravity but by <strong>adjacency lists</strong>, each celestial body linked to its neighbors by faint lines of light that form a graph no astronomer would recognize but any computer scientist would. One constellation unmistakably depicts a binary search tree. Another appears to be a linked list that someone has accidentally made circular.</p>
<p>A telescope made of stacked <strong>stack frames</strong> points toward a cluster of exactly 37 stars arranged in a prime spiral. The eyepiece is warm, as though someone was just here, tracing the same path you're about to trace. A logbook lies open on the observation desk, its last entry reading: <em>"The 37th prime star aligns with the crystal passage. I'm certain of it now. —Previous Visitor"</em></p>
<p>The floor is a rotating orrery showing not planets but processes, each orbiting a central scheduler that allocates time slices with mechanical precision. Process 37 glows brighter than the others, its orbit <strong>perfectly stable</strong> while neighboring processes thrash between states.</p>
<p>A sign etched in starlight reads: "OBSERVARE—to watch, to guard, to keep." Below it, in smaller text someone has added: "Also, 37 is the 12th prime. You're welcome."</p>`,
  exits: [
    { label: "Follow the 37th star", target: 37, flavor: "The prime spiral resolves. The crystal passage awaits." },
    { label: "Trace the circular linked list", target: 11, flavor: "You follow the list. It goes around. And around. And around." },
    { label: "Climb the stack frames", target: 22, flavor: "Each frame returns you to the caller" },
    { label: "Observe process 64", target: 64, flavor: "A 64-bit process in a 32-bit observation deck" },
    { label: "Follow the binary tree root", target: 1, flavor: "Every tree has a root. Every house has a door." },
    { label: "Descend to the orrery's core", target: 24, flavor: "The scheduler doesn't appreciate visitors" },
  ],
  hint: "The logbook mentions the 37th star and the crystal passage. Process 37 is the stable one. Trust the previous visitor.",
  correct: 37,
},

20: {
  id: 20, title: "The Cartographer's Office",
  description: `
<p>Maps. Every surface is covered—walls, desk, floor, ceiling. Maps of places that don't exist, drawn with exquisite precision. One maps a city where all the streets are named "Steve." Another charts the interior topology of a feeling the cartographer labels "Tuesday afternoon ennui." A third is a Mercator projection of a Klein bottle, which distorts everything but is at least internally consistent.</p>

<p>In the corner, as promised, a <em>stuffed door</em>. It's a taxidermied door—glass eyes, cotton stuffing, a light lacquer finish. A small plaque: <em>"Common Door (Porta vulgaris). Habitat: houses. Status: deprecated. This specimen was committed to the main branch and merged without review."</em></p>

<p>One map, pinned to a drafting table, shows this house. A red line traces: <strong>1, 4, 8, 16, 33, 20</strong>—you are here—then continues to <strong>42</strong>. A compass rose points to room <strong>42</strong> with the annotation: <em>"The answer."</em> A second line branches from room 20 to room <strong>110</strong>, labeled <em>"Shortcut (beta)"</em> in a different hand. Someone has added beneath it in red: <em>"DO NOT SHIP. This route is untested. The QA team quit."</em></p>

<p>Exits: <strong>42</strong>, <strong>18</strong>, <strong>24</strong>, <strong>16</strong>, <strong>49</strong>, and <strong>110</strong>.</p>
  `,
  exits: [
    { label: "The answer: room 42", target: 42, flavor: "The compass needle agrees" },
    { label: "Unmarked passage to room 18", target: 18, flavor: "Not on any map" },
    { label: "South corridor to room 24", target: 24, flavor: "Toward uncharted territory" },
    { label: "Back to room 16", target: 16, flavor: "Retrace through the curtain" },
    { label: "A door that might be alive to room 49", target: 49, flavor: "It twitches" },
    { label: "Shortcut (beta) to room 110", target: 110, flavor: "The QA team quit for a reason" },
  ],
  hint: "The map shows the path. The compass says 42. The 'shortcut' to 110 is labeled beta and untested—classic false path. As a bonus: 42 is the answer to life, the universe, and everything, which feels relevant in a house where doors have been taxidermied.",
  correct: 42,
},

26: {
  id: 26, title: "The Plumbing",
  description: `
<p>You are inside the walls. Pipes surround you—copper, iron, PVC that has no business being in a Victorian house, and one that appears to be made of glass and is carrying what looks like starlight. The space is narrow. You can move, but not comfortably. Not with dignity. This is what it feels like to be a packet traversing legacy infrastructure.</p>

<p>A pipe wrench on a hook has a note tied to it: <em>"If you're in the plumbing, you took the horse hatch. We told you to ignore the horse. The horse was not a valid HTTP method. NEIGH is not in the RFC. Go back to room 8."</em></p>

<p>A pipe fitting is labeled: <em>"SUPPLY: room 27. RETURN: room 28. DRAIN: /dev/null. DO NOT OPEN THE DRAIN. Seriously. Everything written to the drain is gone forever. We lost three guests and a sofa."</em></p>

<p>The glass pipe with starlight hums gently. It's the only pipe carrying valid data. Everything else is backpressure and regret.</p>

<p>Exits: <strong>27</strong>, <strong>28</strong>, <strong>8</strong>, and <strong>32</strong>.</p>
  `,
  exits: [
    { label: "Supply pipe to room 27", target: 27, flavor: "Wider. Slightly." },
    { label: "Return pipe to room 28", target: 28, flavor: "Narrower. Much." },
    { label: "Follow the starlight pipe to room 8", target: 8, flavor: "Valid data flows upward" },
    { label: "Maintenance hatch to room 32", target: 32, flavor: "Brass bees nearby" },
  ],
  hint: "We told you to ignore the horse. NEIGH is not a valid HTTP method. Room 8 is the Clock Tower—true path. Follow the starlight pipe back up. It's the only one carrying valid data.",
  correct: null,
},

27: {
  id: 27, title: "The Room Behind the Wall",
  description: `
<p>A room that exists in the space between walls. Not a room, really—more of a confession the architecture makes when it thinks no one is listening. The ceiling is another room's floor. The floor is another room's ceiling. Identity is complicated here. You've broken through the abstraction layer and you're looking at the implementation details.</p>

<p>Messages scratched into the studs: <em>"I lived here for six months. My lease was in YAML."</em> Another: <em>"The room next door is also between walls."</em> And: <em>"I can hear the piano through the floor."</em> Below that, in a different hand: <em>"If you can hear the piano, room 16 is above you. Push through the floorboard. Break the abstraction layer. You're already behind it anyway."</em></p>

<p>You can hear the piano. Faintly. Something by someone sad, for thirty-three fingers.</p>

<p>Exits: <strong>26</strong>, <strong>28</strong>, and <strong>16</strong> (upward, through a loose floorboard above you).</p>
  `,
  exits: [
    { label: "Back through pipes to room 26", target: 26, flavor: "Through copper" },
    { label: "Sideways to room 28", target: 28, flavor: "Between studs" },
    { label: "Up through the floor to room 16", target: 16, flavor: "Toward the piano" },
  ],
  hint: "The piano is room 16—the Music Room, which is on the true path. Push through the floorboard. Break the abstraction layer. Walls are not for living in, no matter what the YAML lease says.",
  correct: 16,
},

28: {
  id: 28, title: "The Drain",
  description: `
<p>The label said <em>"DO NOT OPEN THE DRAIN."</em> You opened the drain. You are now in the drain. This is a natural consequence of your actions and the house would like you to sit with that for a moment.</p>

<p>It's a circular room, tiled in white porcelain that was once clean. Water spirals around the floor in a slow clockwise motion—the house respects Coriolis in the Northern Hemisphere, selectively. Everything leads down. This room is a metaphor for poor decision-making and also literally a drain.</p>

<p>On the wall, in what you hope is rust: <em>"Everyone ends up here eventually. The drain forgives you. The drain suggests room 5."</em></p>

<p>A rubber duck floats past. It has a tag: <strong>"Room 5. — I debug, therefore I am."</strong> Classic rubber duck debugging. You explain your problem to the duck. The duck says nothing. You realize the answer was room 5 all along.</p>

<p>Exits: <strong>26</strong>, <strong>27</strong>, <strong>5</strong>, and <strong>37</strong> (upward, through a pipe that shouldn't connect but does).</p>
  `,
  exits: [
    { label: "Back through drain to room 26", target: 26, flavor: "Against the current" },
    { label: "Side pipe to room 27", target: 27, flavor: "Between walls again" },
    { label: "Follow the duck to room 5", target: 5, flavor: "The duck leads silently" },
    { label: "Impossible pipe to room 37", target: 37, flavor: "The plumbing defies physics" },
  ],
  hint: "You opened the drain. The drain forgives you. The rubber duck is a debugging reference—explain your problem to it, and the answer is room 5. Then find your way to room 8. The plumbing is no place for a person.",
  correct: null,
},

29: {
  id: 29, title: "The Typewriter Room",
  description: `
<p>One room. One desk. One typewriter. It's typing by itself.</p>

<p>You read the page in the carriage: <em>"The guest enters room 29 and finds a typewriter. The typewriter is writing about the guest reading about the typewriter writing about the guest. This is a quine. The typewriter is a quine. If you understand what a quine is, you are exactly the sort of person who ends up in room 29."</em></p>

<p>The typewriter pauses, then adds: <em>"Go to room 1. I cannot stress this enough. I am a typewriter and I have written this on every available surface. My buffer is full. Process 'patience' has been killed with SIGTERM. Then SIGKILL. It did not go quietly."</em></p>

<p>Every sheet of paper in the room says "ROOM 1" in increasingly large fonts. The last one is just the number 1 filling an entire page.</p>

<p>Exits: <strong>1</strong>, <strong>30</strong>, <strong>34</strong>, and <strong>44</strong>.</p>
  `,
  exits: [
    { label: "Follow the typewriter's advice to room 1", target: 1, flavor: "The typewriter approves" },
    { label: "Ignore it: room 30", target: 30, flavor: "The typewriter sighs audibly" },
    { label: "Door marked ACCOUNTING to room 34", target: 34, flavor: "Calculator sounds intensify" },
    { label: "Back door to room 44", target: 44, flavor: "The typing becomes accusatory" },
  ],
  hint: "The typewriter is a self-replicating program that has strong opinions. Its opinion is: room 1. Its buffer is full. Its patience process has been killed. Trust the quine.",
  correct: 1,
},

30: {
  id: 30, title: "The Room That Is an Argument",
  description: `
<p>Two chairs face each other. Between them, a small table. On the table: a note that reads <em>"IS NOT"</em> and another that reads <em>"IS TOO."</em> Beneath both: <em>"This room is a race condition between two threads that both believe they are correct. The room has been in deadlock since Sprint 47. No one has assigned story points."</em></p>

<p>The walls pulse gently, as if the room is breathing. Or thinking. Or possibly just poorly synchronized.</p>

<p>A third note on the floor: <em>"If you're tired of this deadlock, room 4 always agrees with you. It's very agreeable. Practically stateless. It holds no grudges because it holds no state."</em></p>

<p>A fourth note, crumpled: <em>"This argument has been open since Sprint 47. The scrum master left. The product owner is 'on vacation.' The standup is forty-five minutes long and no one is standing."</em></p>

<p>Exits: <strong>4</strong>, <strong>7</strong>, <strong>29</strong>, <strong>42</strong>, and <strong>46</strong>.</p>
  `,
  exits: [
    { label: "The agreeable door to room 4", target: 4, flavor: "It says 'after you'" },
    { label: "Door to room 7", target: 7, flavor: "Past the IS NOT chair" },
    { label: "Back to room 29", target: 29, flavor: "The typewriter is still going" },
    { label: "Emergency exit to room 42", target: 42, flavor: "Very normal" },
    { label: "Trapdoor to room 46", target: 46, flavor: "IS NOT a trap" },
  ],
  hint: "The argument room has been in deadlock since Sprint 47. Room 4 is stateless and agreeable. Room 4 is the Study, second room on the true path. Break the deadlock. Attend a different standup.",
  correct: 4,
},

31: {
  id: 31, title: "The Room of Hats",
  description: `
<p>Hats. Nothing but hats. Top hats, bowlers, berets, fezzes, a sombrero of truly imperial dimensions, a helmet that appears to be from a civilization that hasn't existed yet. They cover every surface, hang from every hook, and several are slowly rotating on ceiling fans that exist only to rotate hats.</p>

<p>A mannequin head wears a deerstalker cap. Pinned to it: <em>"Elementary. The answer is always room 1."</em> The mannequin head has been given googly eyes. They are not centered. They are never centered.</p>

<p>One hat—a perfectly ordinary bowler—has a tag inside: <em>"Property of the Clockwork House. If found, please return to Room 1."</em></p>

<p>A hard hat labeled <em>"UNDER CONSTRUCTION"</em> has a blinking cursor where the safety certification should be. A thinking cap sits alone on a pedestal—you try it on. It gives you a headache but no new ideas. A sorting hat from a different intellectual property whispers <em>"HUFFLEPUFF"</em> which is not helpful and possibly litigious.</p>

<p>Exits: <strong>1</strong>, <strong>2</strong>, <strong>39</strong>, and <strong>47</strong>.</p>
  `,
  exits: [
    { label: "Under the deerstalker to room 1", target: 1, flavor: "Elementary" },
    { label: "Through the hat rack to room 2", target: 2, flavor: "Excuse the hats" },
    { label: "Behind the sombrero to room 39", target: 39, flavor: "It's enormous" },
    { label: "Under the helmet to room 47", target: 47, flavor: "From the future, apparently" },
  ],
  hint: "The deerstalker says room 1. The bowler says room 1. The hard hat is under construction. The sorting hat is from a different franchise. HUFFLEPUFF is not a room number.",
  correct: 1,
},

32: {
  id: 32, title: "The Apiary",
  description: `
<p>A room full of beehives. They are, mercifully, empty—or so you think, until one bee lands on your shoulder. It's made of brass. Clockwork. Its wings tick like a tiny watch. It operates on an event-driven architecture, responding to stimuli with the quiet efficiency of a well-configured message broker.</p>

<p>The hives are numbered. Most read <strong>0</strong>. One reads <strong>8</strong>. Inside hive 8: not honey, but a small scroll. It reads: <em>"The queen moved to room 8 seven generations ago. Follow the queen. The hive mind runs on consensus protocol and the consensus is: room 8."</em></p>

<p>The brass bee on your shoulder buzzes twice, then flies toward the door to room <strong>8</strong>. You notice a tiny tag on its thorax: <em>"Kafka consumer group: clockwork-bees. Topic: navigation. Partition: 8."</em></p>

<p>Exits: <strong>8</strong>, <strong>3</strong>, <strong>25</strong>, and <strong>43</strong>.</p>
  `,
  exits: [
    { label: "Follow the bee to room 8", target: 8, flavor: "The brass bee leads" },
    { label: "Through the greenhouse to room 3", target: 3, flavor: "Plants and glass" },
    { label: "Postal route to room 25", target: 25, flavor: "The stamp hive" },
    { label: "Smoke passage to room 43", target: 43, flavor: "Through the smoker" },
  ],
  hint: "The queen is in room 8. The hive mind's consensus protocol agrees. The Kafka consumer is partitioned on 8. Room 8 is the Clock Tower—true path. Follow the clockwork bee.",
  correct: 8,
},

33: {
  id: 33, title: "The Taxidermist's Workshop",
  description: `
<p>Glass eyes stare from every shelf. Hundreds of them—sorted by color in apothecary jars like an indexed array where the key is wavelength and the value is existential dread. Amber, green, blue, one unsettling jar of red. In the center of the room, a half-finished owl sits on a workbench, cotton stuffing spilling from its chest like a textile autopsy in progress.</p>

<p>The taxidermist left notes. The last page: <em>"I have preserved 19 animals for this house. The 20th will be different. The 20th is the door itself. It's in room 20. I've committed it to the main branch. No pull request. No code review. My masterpiece needs no approval."</em></p>

<p>The preserved animals are catalogued in what appears to be a HashMap. Most entries are unremarkable (key: 'badger', value: 'shelf 3'). But entry 20 reads: <em>"key: 20, value: 'the door. room 20. go see it.'"</em></p>

<p>A jar labeled <strong>"EYES, HUMAN, DO NOT USE"</strong> watches you. The label's font is Comic Sans—a deprecated API if ever there was one. You watch it back. Neither of you blinks, though for different reasons.</p>

<p>Exits: <strong>20</strong> (through a curtain of preserved feathers), <strong>16</strong> (back), <strong>38</strong> (through a window that shouldn't open but does), and <strong>46</strong> (down a spiral of vertebrae).</p>
  `,
  exits: [
    { label: "Feather curtain to room 20", target: 20, flavor: "They brush your face. Softly." },
    { label: "Back to room 16", target: 16, flavor: "The piano waits" },
    { label: "Window to room 38", target: 38, flavor: "Fresh air, finally" },
    { label: "Vertebrae spiral to room 46", target: 46, flavor: "Down through bone" },
  ],
  hint: "The taxidermist's 20th creation is in room 20. The HashMap key is 20. He committed it to main without review. The stuffed door is his masterpiece. Go see it.",
  correct: 20,
},

34: {
  id: 34, title: "The Department of Doors",
  description: `
<p>Fluorescent lighting. Drop ceiling. Cubicles. You have entered the bureaucratic wing of a haunted house, which is somehow worse than any ghost. The carpet is the color of resignation. A motivational poster shows a sunset and reads: <em>"SYNERGY."</em> Nothing else. Just "SYNERGY."</p>

<p>A reception desk, unmanned. A sign: <em>"PLEASE TAKE A NUMBER."</em> The number dispenser gives you <strong>4,291</strong>. The display above reads: <em>"NOW SERVING: 7."</em> The math is not in your favor.</p>

<p>A pamphlet on the counter: <em>"Welcome to the Department of Doors. Processing time: 40 to 60 business days. SLA: best effort. Uptime guarantee: none. For faster service, proceed directly to Room 1 and do not engage with departmental processes."</em></p>

<p>A Gantt chart on the wall shows your projected escape date: <strong>Q3 2031</strong>. There are seventeen dependencies, four of which are circular.</p>

<p>Exits: <strong>35</strong> (COMPLAINTS), <strong>36</strong> (APPEALS), <strong>1</strong> (EXPRESS EXIT), and <strong>16</strong> (MUSIC DEPT).</p>
  `,
  exits: [
    { label: "COMPLAINTS: room 35", target: 35, flavor: "A longer wait" },
    { label: "APPEALS: room 36", target: 36, flavor: "Even longer" },
    { label: "EXPRESS EXIT: room 1", target: 1, flavor: "Skip the Gantt chart" },
    { label: "MUSIC DEPT: room 16", target: 16, flavor: "Filing harmonies" },
  ],
  hint: "The pamphlet says EXPRESS EXIT—room 1. The alternative is waiting for ticket 4,291 when they're serving 7. The Gantt chart projects Q3 2031. Room 16 is also on the true path if you want to skip ahead.",
  correct: 1,
},

35: {
  id: 35, title: "The Complaints Office",
  description: `
<p>A smaller office. One desk. Behind it, a chair that spins slowly on its own like a loading indicator that has lost the will to load. A complaint form has been pre-filled:</p>

<p><em>"NATURE OF COMPLAINT: Lost in house. DEPARTMENT RESPONSE: Have you tried Room 1? STATUS: WONTFIX."</em></p>

<p>A filing cabinet labeled <em>"COMPLAINTS, A-Z."</em> You open the 'S' drawer. It contains one folder: <em>"Smith, J. Complaint: The doors move. Resolution: They don't. Smith was wrong. Smith's ticket was closed as WORKSFORME. Smith may still be in Room 35."</em></p>

<p>You look around for Smith. The chair spins. You are alone. Probably. The chair's RPM suggests otherwise.</p>

<p>Exits: <strong>34</strong>, <strong>36</strong>, <strong>42</strong>, and <strong>1</strong>.</p>
  `,
  exits: [
    { label: "Back to RECEPTION: room 34", target: 34, flavor: "More fluorescent light" },
    { label: "APPEALS: room 36", target: 36, flavor: "An even smaller office" },
    { label: "Escape hatch to room 42", target: 42, flavor: "Behind the filing cabinet" },
    { label: "EXPRESS EXIT: room 1", target: 1, flavor: "Skip the bureaucracy" },
  ],
  hint: "The complaint's resolution is WONTFIX. Smith's ticket is WORKSFORME. Nobody is fixing anything here. Room 1 is the express exit. Also: where is Smith? Don't think about Smith.",
  correct: null,
},

36: {
  id: 36, title: "The Appeals Board",
  description: `
<p>An even smaller room. A conference table for seven, but only three chairs. A whiteboard shows a flowchart. Every branch of the flowchart leads to the same conclusion: <strong>"GO TO ROOM 1."</strong> Someone has attempted to add a branch labeled "stay" but it immediately loops back to "GO TO ROOM 1."</p>

<p>Meeting minutes on the table: <em>"AGENDA: Should Room 36 continue to exist? VOTE: 2 in favor, 1 opposed, 4 undefined. RESOLUTION: Room 36 continues to exist, reluctantly. NEXT AGENDA: Should guests stop coming to Room 36? UNANIMOUS: Yes. The room's API has been deprecated but not yet removed. Removal blocked on backward compatibility with Smith."</em></p>

<p>The room itself seems slightly embarrassed. Its walls have the energy of a function that knows it should have been refactored out three releases ago.</p>

<p>Exits: <strong>34</strong>, <strong>35</strong>, <strong>1</strong>, and <strong>43</strong>.</p>
  `,
  exits: [
    { label: "Back to RECEPTION: room 34", target: 34, flavor: "More bureaucracy" },
    { label: "COMPLAINTS: room 35", target: 35, flavor: "Smith may still be there" },
    { label: "APPROVED EXIT: room 1", target: 1, flavor: "The flowchart agrees unanimously" },
    { label: "Existential exit to room 43", target: 43, flavor: "Into uncertainty" },
  ],
  hint: "The flowchart reaches room 1 from every branch. The room voted unanimously for you to leave. The API is deprecated. Room 36 doesn't want you here. Respect the deprecation notice.",
  correct: null,
},

37: {
  id: 37, title: "The Glass Corridor",
  description: `
<p>You are walking through nothing. The corridor is made entirely of glass—floor, walls, ceiling—suspended in a void that is not quite dark and not quite anything else. It's the color of the pause between heartbeats. You're walking through the network layer. The OSI model, rendered in crystal—layer by layer, from physical glass to the application of your footsteps.</p>

<p>Below you, rooms of the house drift like fish in an aquarium. You can see the ballroom (room <strong>6</strong>), its chandelier burning—a later stop on the true path, confirming your direction. Above you, the attic rooms float past, dusty and irrelevant.</p>

<p>The glass beneath your feet has numbers etched into it, counting down: <strong>...93, 92, 91...</strong> The countdown stops at <strong>91</strong>. The number is etched deeper than the others. When you step on it, the glass hums a middle C and returns HTTP <strong>200 OK</strong>.</p>

<p>A sign mounted in the void reads: <em>"The glass resonates at the frequency of the next prime after 89."</em> You do the math. The next prime after 89 is 97. But the glass doesn't hum at 97. It hums at 91. The sign is a liar. The glass is not.</p>

<p>Exits: <strong>91</strong> (where the glass hums), <strong>11</strong> (back), <strong>6</strong> (below, through a trapdoor of pure crystal), and <strong>28</strong> (a drain in the floor, technically).</p>
  `,
  exits: [
    { label: "Through the humming 91", target: 91, flavor: "The glass sings and the void parts" },
    { label: "Back to room 11", target: 11, flavor: "Retrace through starlight" },
    { label: "Crystal trapdoor to room 6", target: 6, flavor: "The chandelier below grows closer" },
    { label: "Floor drain to room 28", target: 28, flavor: "Technically a passage" },
  ],
  hint: "The sign about 'the next prime after 89' is a red herring—97 is prime, but 91 is where the countdown stops and the glass hums. 91 = 7 times 13, not prime at all, but the glass doesn't care about primality. It cares about the path. Step on 91.",
  correct: 91,
},

38: {
  id: 38, title: "The Lending Library of Regret",
  description: `
<p>Shelves of books, but each spine bears not a title but a regret. <em>"Should Have Said Goodbye." "Ate the Whole Cake." "Trusted the Boiler Room." "Deployed on a Friday."</em> You find one that reads <em>"Didn't Go to Room 33 When I Had the Chance."</em> It's the thickest book on the shelf.</p>

<p>A librarian's desk, unmanned. A note: <em>"All regrets must be returned within 30 days. Late fees apply. If you regret being here, room 33 connects to the true path. The fine for not going to room 33 is O(n!) complexity in your remaining lifetime. You will feel every factorial."</em></p>

<p>A book titled <em>"Regrets I Will Have Tomorrow"</em> is suspiciously thick. Next to it: <em>"Regrets About Not Reading the Documentation"</em>—even thicker.</p>

<p>Exits: <strong>33</strong>, <strong>25</strong>, <strong>44</strong>, and <strong>49</strong>.</p>
  `,
  exits: [
    { label: "Return your regrets to room 33", target: 33, flavor: "The fee is waived" },
    { label: "Postal route to room 25", target: 25, flavor: "Return to sender" },
    { label: "Overdue chute to room 44", target: 44, flavor: "Late fee: your sanity" },
    { label: "Lost & Found to room 49", target: 49, flavor: "Mostly lost" },
  ],
  hint: "The library says room 33 is on the true path. The late fee is O(n!) complexity. Room 33 leads to 20 leads to 42 leads onward. Don't let your regrets compound factorially.",
  correct: 33,
},

39: {
  id: 39, title: "The Room of Clocks That Are Wrong",
  description: `
<p>Unlike the Clock Tower, where one clock was right, in this room every clock is wrong. Intentionally, elaborately, <em>creatively</em> wrong. One shows 25 o'clock. Another runs backward at triple speed. A sundial operates by moonlight. A water clock drips upward. An atomic clock displays the time in a base system that doesn't exist.</p>

<p>In the center, a pedestal with an hourglass. Its sand flows sideways. Attached: <em>"This room exists to waste your time. Time complexity: O(infinity). The correct room for clocks is room 8, which contains a clock that is actually correct. Go there. Stop looking at the sideways sand."</em></p>

<p>You're still looking at the sideways sand. It's mesmerizing. A cuckoo clock strikes 47 and a small wooden bird emerges, looks at you with what might be pity, and retreats.</p>

<p>Exits: <strong>8</strong>, <strong>5</strong>, <strong>31</strong>, and <strong>47</strong>.</p>
  `,
  exits: [
    { label: "To the real clocks in room 8", target: 8, flavor: "Time flows correctly here" },
    { label: "Service stair to room 5", target: 5, flavor: "Toward food" },
    { label: "Through the cuckoo door to room 31", target: 31, flavor: "Cuckoo! (47 times)" },
    { label: "Backward clock to room 47", target: 47, flavor: "Time reverses, maybe" },
  ],
  hint: "The room admits it exists to waste your time. Time complexity: O(infinity). Room 8 has the real clock. Go to room 8. Stop looking at the sand. The cuckoo bird pities you.",
  correct: 8,
},

40: {
  id: 40, title: "The Trophy Room",
  description: `
<p>Shelves of trophies, none for anything normal. <em>"Most Doors Opened, 1923." "Fastest Spiral Staircase Descent, 1887." "Longest Time Spent in a Room Full of Hats, Ongoing."</em></p>

<p>One trophy is shaped like a key: <em>"Found the True Path, 1951."</em> Its plaque shows the beginning of the path: <strong>1, 4, 8, 16, 33, 20, 42, ...</strong> but the plaque is cracked. The rest of the sequence disappears into a fracture that runs through the brass like a fault line. You can't read what comes after 42. Whoever dropped this trophy has a lot to answer for.</p>

<p>A ribbon reading <em>"PARTICIPANT"</em> has your name on it. It appeared just now. A build badge glows green: <em>"PASSING."</em> This is the most encouragement the house has offered. Take it.</p>

<p>Exits: <strong>6</strong>, <strong>1</strong>, <strong>19</strong>, and <strong>48</strong>.</p>
  `,
  exits: [
    { label: "Champion's exit to room 6", target: 6, flavor: "Past the gold trophies" },
    { label: "Loser's loop to room 1", target: 1, flavor: "The participation ribbon flutters" },
    { label: "Gallery to room 19", target: 19, flavor: "More faces" },
    { label: "Basement stairs to room 48", target: 48, flavor: "Where trophies go to die" },
  ],
  hint: "The 1951 trophy shows the path starts 1, 4, 8, 16, 33, 20, 42... but the plaque is cracked and you can't read the rest. Room 1 restarts it. Room 6 is further along. The build badge says PASSING. Trust the CI pipeline.",
  correct: 1,
},

41: {
  id: 41, title: "The Confession Booth",
  description: `
<p>A wooden booth, the kind you'd find in a church, but the mesh screen reveals not a priest but a small brass speaking-tube connected to somewhere deep in the house's walls. You speak into it. Nothing happens. Then, faintly, from far away: <em>"Confess your sins. Also go to room 37. These are unrelated instructions."</em></p>

<p>A guest book of confessions. Most are mundane. <em>"I took the wrong door."</em> <em>"I stayed too long in the hat room."</em> One reads: <em>"I ran rm -rf / and now everything is gone."</em> Another: <em>"I deployed to production on a Friday and I'd do it again."</em> That one is circled in red with a note: <em>"This person was banned from the house."</em></p>

<p>Exits: <strong>37</strong>, <strong>45</strong>, <strong>19</strong>, and <strong>6</strong>.</p>
  `,
  exits: [
    { label: "Through the screen to room 37", target: 37, flavor: "The tube whispers approval" },
    { label: "Side door to room 45", target: 45, flavor: "Toward absolution" },
    { label: "Back to room 19", target: 19, flavor: "Portraits await" },
    { label: "Nave door to room 6", target: 6, flavor: "The waltz echoes faintly" },
  ],
  hint: "The speaking-tube says room 37, the Glass Corridor, which is on the true path. The confessions are alarming but not your problem. Except the rm -rf one. That one is everyone's problem.",
  correct: 37,
},

42: {
  id: 42, title: "The Answer Room",
  description: `
<p>The room is perfectly, aggressively ordinary. White walls. A single fluorescent light that hums at the frequency of mild disappointment. A water cooler in the corner, half-full. A motivational poster on the wall shows a kitten hanging from a branch: <em>"HANG IN THERE."</em> Below it, in faded marker: <em>"I have been hanging in here for 137 years. My arms are fine. I am not fine."</em></p>

<p>On the water cooler, a sticky note: <strong>"The answer to everything is 42. You're here. But the NEXT answer isn't what you think."</strong></p>

<p>A second poster shows a dolphin leaping: <em>"SO LONG AND THANKS FOR ALL THE FISH."</em> You look closer. The background is filled with tiny drawn fish. Obsessively detailed. Someone counted them and wrote in pencil at the bottom: <em>"127 fish. I counted twice."</em></p>

<p>On a desk in the corner: a loopback adapter, the kind network engineers use for testing. Its label reads: <strong>"127.0.0.1 — there's no place like home, but home is room 127."</strong> A whiteboard behind the desk has one word: <em>"localhost"</em> and the number <strong>127</strong> circled three times in red.</p>

<p>Exits: <strong>127</strong>, <strong>20</strong>, <strong>30</strong>, <strong>35</strong>, <strong>44</strong>, and <strong>110</strong>.</p>
  `,
  exits: [
    { label: "The loopback door to room 127", target: 127, flavor: "There's no place like 127.0.0.1" },
    { label: "Back to room 20", target: 20, flavor: "Back to the maps" },
    { label: "Emergency exit to room 30", target: 30, flavor: "An alarm doesn't sound" },
    { label: "Fire door to room 35", target: 35, flavor: "Suspiciously warm" },
    { label: "Revolving door to room 44", target: 44, flavor: "It revolves too fast" },
    { label: "Shortcut to room 110", target: 110, flavor: "Still in beta. Still untested." },
  ],
  hint: "127.0.0.1 is localhost. The loopback adapter says 'home is room 127.' The dolphin poster has exactly 127 fish. The whiteboard says 'localhost' with 127 circled. There's no place like 127. This is a networking joke and also the correct answer.",
  correct: 127,
},

43: {
  id: 43, title: "The Room That Doesn't Believe in Itself",
  description: `
<p>You enter a room that seems to be having an existential crisis. The walls flicker between existing and not existing. The floor is there, probably. A sign hangs from the ceiling—or from the concept of a ceiling—reading: <em>"THIS ROOM MAY OR MAY NOT EXIST. PLEASE PROCEED AS THOUGH IT DOES. Feature flag: room_43_exists = TOGGLING."</em></p>

<p>Someone keeps toggling the feature flag. The room blinks in and out. The furniture phases. A desk exists on Tuesdays. Today might be Tuesday. The room isn't sure.</p>

<p>A cat sits on a box in the corner. The box is labeled <em>"ALIVE/DEAD."</em> The cat is clearly alive—it's grooming itself with the studied indifference of the metaphysically unbothered. A collar tag reads: <em>"Room 11. Feed me."</em> The cat is the only stable state in this room. Everything else is Heisenberg. The cat is just hungry.</p>

<p>Exits: <strong>11</strong>, <strong>24</strong>, <strong>32</strong>, and <strong>36</strong>.</p>
  `,
  exits: [
    { label: "Cat's door to room 11", target: 11, flavor: "The cat leads, tail high" },
    { label: "Through a maybe-wall to room 24", target: 24, flavor: "Probably exists" },
    { label: "Flickering passage to room 32", target: 32, flavor: "Mostly real" },
    { label: "Void door to room 36", target: 36, flavor: "Into philosophical uncertainty" },
  ],
  hint: "The cat's collar says room 11—the Observatory, which is on the true path. The room's feature flag keeps toggling but the cat is stable state. Trust the cat. Feed the cat. Go to 11.",
  correct: 11,
},

44: {
  id: 44, title: "The Room of Doors That Don't Open",
  description: `
<p>Thirty doors line the walls. Twenty-nine of them don't open. They're painted on—mock objects, every one. Some are painted very convincingly—one even has a painted doorknob that you actually tried to turn before your dignity intervened. Another has a painted shadow that adjusts to the light. A third has a painted cat flap through which a painted cat is watching you.</p>

<p>The one real door has a Post-it note: <em>"This is the real one. Room 4. The other 29 are mock objects. They pass all tests but do nothing in production. This is the real one. Room 4."</em></p>

<p>You push a painted door just to check. It returns <strong>404: Door Not Found</strong>. Another returns <strong>418: I'm a Teapot</strong>, which is technically a valid HTTP response but not a valid door.</p>

<p>Exits: <strong>4</strong> (the only real door), <strong>29</strong> (painted but somehow functional), and <strong>18</strong> (also painted but the paint is wet and your hand went through it).</p>
  `,
  exits: [
    { label: "The one real door to room 4", target: 4, flavor: "It opens. Returns 200 OK." },
    { label: "Painted door to room 29", target: 29, flavor: "The typewriter beckons" },
    { label: "Wet paint door to room 18", target: 18, flavor: "Your hand is now purple" },
  ],
  hint: "One real door. Room 4. The 29 mock objects pass tests but do nothing. One returns 404, another returns 418: I'm a Teapot. Neither is a real door. Room 4 returns 200 OK.",
  correct: 4,
},

45: {
  id: 45, title: "The Threshold",
  description: `
<p>A narrow room. More of a hallway, really—a liminal space between what was and what might be. The walls are covered in tally marks. Thousands of them. Someone counted every visit, every attempt, every failure. The marks form patterns if you stare long enough. You stare too long.</p>

<p>At the far end, a door unlike any other in the house. It's made of living wood—bark still clinging to it, leaves sprouting from the frame. A brass plate reads <strong>169</strong>. Below it, in a child's handwriting: <em>"This is not the last door. You thought it was. The house expanded. This is the PENULTIMATE door. Thirteen squared. The magic squares always know."</em></p>

<p>169 = 13&sup2;. You feel this in your bones, or possibly in your math cortex.</p>

<p>A guest book sits on a pedestal. One entry: <em>"I was here 347 times before finding this room."</em> Another: <em>"I thought this was the end. It wasn't. There are more rooms now. The house is under active development. Check the changelog."</em> A third, in fresh ink: <em>"v4.0 expanded to 200 rooms. This room used to lead to 50. Now it leads to 169. Migration was not optional."</em></p>

<p>Exits: <strong>169</strong> (the living door), <strong>6</strong> (back to the ballroom), <strong>41</strong> (a crack in the wall), and <strong>48</strong> (stairs down, marked "REGRET").</p>
  `,
  exits: [
    { label: "The living door to room 169", target: 169, flavor: "The leaves part. Bark creaks. 13 squared." },
    { label: "Back to room 6", target: 6, flavor: "The waltz plays on" },
    { label: "Crack in the wall to room 41", target: 41, flavor: "Just wide enough" },
    { label: "Stairs marked REGRET to room 48", target: 48, flavor: "You will, in fact, regret this" },
  ],
  hint: "The living door is numbered 169. That's 13 squared. The child's note says 'the magic squares always know.' The guest book confirms the house expanded to 200 rooms. The door used to lead to 50. Now it leads to 169. Walk through. You're closer than you think.",
  correct: 169,
},

46: {
  id: 46, title: "The Room of Footnotes",
  description: `
<p>The walls are covered in text—not graffiti, but footnotes. Thousands of them, each referencing another footnote, which references another, in an endless loop of self-citation that would make any compiler weep.&sup1;</p>

<p>Footnote 1: See footnote 2. Footnote 2: See footnote 1. This is a circular dependency. The linker has given up. Footnote 3, written in red: <em>"The footnotes are a trap. They're a circular dependency. Like rooms 46, 47, and 48. Like you, if you don't leave. Go to room 33."</em>&sup2;</p>

<p>A magnifying glass on a desk reveals micro-text in the corner: <em>"Room 33 is on the true path. This footnote has a stack depth of 4,291. We are approaching stack overflow. Go to room 33 before the recursion limit is reached."</em>&sup3;</p>

<p>Exits: <strong>47</strong>, <strong>48</strong>, <strong>33</strong>, and <strong>30</strong>.</p>
  `,
  exits: [
    { label: "Footnote passage to room 47", target: 47, flavor: "See footnote 47" },
    { label: "Endnote passage to room 48", target: 48, flavor: "See endnote 48" },
    { label: "Citation to room 33", target: 33, flavor: "Breaks the circular dependency" },
    { label: "Appendix door to room 30", target: 30, flavor: "The argument continues" },
  ],
  hint: "Footnote 3 says room 33 is on the true path. The footnotes are a circular dependency with a stack depth of 4,291. Go to room 33 before you hit the recursion limit.",
  correct: 33,
},

47: {
  id: 47, title: "The Filing Cabinet of Dreams",
  description: `
<p>One enormous filing cabinet. It stretches from floor to ceiling and possibly continues into the next dimension. Each drawer is labeled with a type of dream: <em>"FLYING," "TEETH FALLING OUT," "PRODUCTION OUTAGE AT 3AM," "THE ONE WHERE THE HOUSE HAS 200 ROOMS."</em></p>

<p>You open that last drawer. Inside, a file with your name. It contains a single page: <em>"You are not dreaming. This is real. We checked. The dream linter passed. All assertions passed. Please go to room 1 and begin the true path."</em></p>

<p>The "TEETH FALLING OUT" drawer is locked. A sign: <em>"Locked for safety."</em> The "PRODUCTION OUTAGE AT 3AM" drawer is overflowing. Pages spill onto the floor. Each page is a different incident report. The root cause is always "human error" and the resolution is always "added more monitoring."</p>

<p>The filing cabinet makes a sound like a sigh, then a sound like a filing cabinet.</p>

<p>Exits: <strong>46</strong>, <strong>48</strong>, <strong>1</strong>, and <strong>39</strong>.</p>
  `,
  exits: [
    { label: "Footnote passage to room 46", target: 46, flavor: "Back to citations" },
    { label: "Basement stairs to room 48", target: 48, flavor: "Down into regret" },
    { label: "Dream door to room 1", target: 1, flavor: "Wake up" },
    { label: "Clock drawer to room 39", target: 39, flavor: "Wrong clocks, wrong dreams" },
  ],
  hint: "You are not dreaming. The dream linter passed. The assertions passed. Room 1 starts the true path. Don't open the teeth drawer. Don't read the incident reports. Go to room 1.",
  correct: 1,
},

48: {
  id: 48, title: "The Room at the Bottom",
  description: `
<p>You can go no further down. This is the lowest point in the house—below the cistern, below the boiler room, below the conceptual fish, below the stack frame. The room is small, round, and warm. It feels like being inside a heart, or a finally{} block that always executes no matter how badly everything else went.</p>

<p>On the wall, a single message in golden paint: <em>"You've reached the bottom. Stack underflow. The true path starts at 1 and ends at 200. You are at 48. You are mathematically close but topologically distant. You are 24% of the way there numerically and 0% of the way there navigationally."</em></p>

<p>A spiral staircase leads only up. It's the only exit that makes architectural sense. A door in the floor leads to room <strong>46</strong>, but it's a door in the <em>floor</em> at the <em>bottom</em> of the house, which shouldn't work. This house has a loose relationship with physics and a committed relationship with irony.</p>

<p>Exits: <strong>46</strong>, <strong>47</strong>, <strong>1</strong> (the spiral stair), and <strong>40</strong>.</p>
  `,
  exits: [
    { label: "Floor door to room 46", target: 46, flavor: "Physics objects strenuously" },
    { label: "Sideways to room 47", target: 47, flavor: "Into the filing cabinet" },
    { label: "Spiral stair to room 1", target: 1, flavor: "All the way up. Stack overflow." },
    { label: "Trophy pipe to room 40", target: 40, flavor: "Past old awards" },
  ],
  hint: "The bottom of the house. Stack underflow. You're in the finally{} block. The true path starts at 1 and ends at 200. The spiral stair goes to room 1. You're 24% there numerically. 0% navigationally. Go up.",
  correct: 1,
},

49: {
  id: 49, title: "The Lost and Found",
  description: `
<p>A counter. Behind it, shelves stretching impossibly far back, stuffed with items previous visitors have lost. You see: seventeen umbrellas, a sense of direction, three left shoes (no rights), hope (in a jar, labeled), a compass that points to regret, and a small sign reading <em>"FOUND: ONE TRUE PATH. PLEASE CLAIM AT ROOM 1."</em></p>

<p>A ledger on the counter: <em>"Items Lost: 4,291. Items Claimed: 3. Common losses: hope, direction, patience, shoes (left only, inexplicably). Also found: your car keys. They were in room 7 the whole time."</em></p>

<p>You can take the jar of hope. It's warm. It hums faintly. Inside the lid: <em>"Go to 1. This is the hope talking. I am hope. I live in a jar. My situation is not ideal but my advice is sound."</em></p>

<p>Exits: <strong>1</strong>, <strong>38</strong>, <strong>20</strong>, and <strong>46</strong>.</p>
  `,
  exits: [
    { label: "Claim your path at room 1", target: 1, flavor: "The jar of hope hums approval" },
    { label: "Lending library to room 38", target: 38, flavor: "Return your regrets" },
    { label: "Map room to room 20", target: 20, flavor: "Behind the compass shelf" },
    { label: "Chute to room 46", target: 46, flavor: "Where lost things go to be footnoted" },
  ],
  hint: "The sign says the true path has been found and is waiting at room 1. The jar of hope agrees. Hope lives in a jar and its situation is not ideal but its advice is sound. Go to room 1. Take the jar.",
  correct: 1,
},

50: {
  id: 50, title: "The Room That Used to Be the End",
  description: `
<p>Light. There was supposed to be light here. Real light—sunlight, warm and generous and completely, blessedly normal. And there was. Once.</p>

<p>A faded <em>"CONGRATULATIONS"</em> banner hangs crooked from one wall, its letters peeling. Dead confetti covers the floor like the aftermath of a celebration that happened to someone else, years ago. A walled garden—but the garden is wilting. The roses are brown. The fountain is dry. An apple tree stands leafless, its branches reaching for something that isn't coming.</p>

<p>On a bench beneath the dead tree: a brass key, a glass of something that has long since evaporated, and a note.</p>

<p><em>"Due to house expansion (see changelog v4.0), the exit has been moved to room 200. This room has been refactored from 'victory' to 'profound disappointment.' We apologize for the inconvenience. The garden was real once. The congratulations were sincere. They still are—just not here, not anymore.</em></p>

<p><em>Go to room 1 and start the new path. The garden is further away now. But it's still there. Room 200. We promise."</em></p>

<p>The brass key doesn't fit anything anymore. You try the fountain. Dry. You try the tree. Dead. You try the banner. It falls. This room is a deprecated endpoint that once returned 200 OK and now returns <strong>301 Moved Permanently</strong>.</p>

<p>Exits: <strong>1</strong>, <strong>45</strong>, <strong>40</strong>, and <strong>6</strong>.</p>
  `,
  exits: [
    { label: "Start over at room 1", target: 1, flavor: "The banner falls behind you" },
    { label: "Back through the threshold to room 45", target: 45, flavor: "The living door still breathes" },
    { label: "To the trophy room at room 40", target: 40, flavor: "Past monuments to better days" },
    { label: "To the ballroom at room 6", target: 6, flavor: "The waltz plays on, indifferent" },
  ],
  hint: "This used to be the end. It isn't anymore. The house expanded. Room 200 is the new exit. This room now returns 301 Moved Permanently. Go to room 1 and find the new path. The garden will be real again. Just not here.",
  correct: 1,
},

51: {
  id: 51, title: "The Version Control Room",
  description: `<p>Filing cabinets stretch to infinity, each drawer labeled with a SHA-1 hash. The room smells of merge conflicts and regret. A enormous tree grows from the center of the floor, its branches forking and occasionally merging back together in ways that would make a botanist weep and a developer nod knowingly.</p>
<p>Every surface is covered in sticky notes reading "DO NOT REBASE" and "WHO FORCE-PUSHED TO MAIN." A ghostly diff floats in the air, showing changes between who you were when you entered this house and who you are now. The deletions are in red. There are a lot of deletions.</p>
<p>A plaque reads: "All changes are tracked. All reverts lead to origin."</p>`,
  exits: [
    { label: "Revert to HEAD", target: 1, flavor: "You follow the reflog back to the beginning" },
    { label: "Checkout a detached branch", target: 59, flavor: "You enter a headless state, which is as unsettling as it sounds" },
    { label: "Cherry-pick a commit", target: 66, flavor: "You grab exactly one change and hope it applies cleanly" },
    { label: "Stash your changes", target: 62, flavor: "You shelve yourself temporarily, promising to pop later" },
  ],
  hint: "Every version history has an origin. Find yours.",
  correct: 1,
},
52: {
  id: 52, title: "The Container Room",
  description: `<p>You stand inside a perfect cube of brushed steel, exactly 2.4 meters on each side. The walls hum with the quiet efficiency of something that has been orchestrated. A label on the ceiling reads "alpine:latest" and the room contains absolutely nothing except what it needs to function, which currently appears to be you and a small cactus.</p>
<p>The cactus was not in the original image. Someone must have mounted it at runtime.</p>
<p>Through translucent walls you can see hundreds of identical rooms, each containing a single confused person. An intercom crackles: "Container healthy. Liveness probe passed." The room is lightweight, portable, and deeply existentially troubling.</p>`,
  exits: [
    { label: "Escape the container", target: 8, flavor: "You break out of the namespace into the host system" },
    { label: "Scale horizontally", target: 70, flavor: "Another instance of you spins up somewhere" },
    { label: "Enter the sidecar", target: 73, flavor: "A smaller container is bolted to the side of yours" },
    { label: "Check the orchestrator", target: 54, flavor: "Something up there is deciding your fate" },
  ],
  hint: "Containers are ephemeral. The host system endures.",
  correct: 8,
},
53: {
  id: 53, title: "The DNS Room",
  description: `<p>The room is a vast telephone exchange rebuilt by someone who only understood the concept theoretically. Thousands of cables connect names to numbers in a hierarchy so deeply nested it makes organizational charts look flat. A bored-looking daemon sits at a desk, resolving queries with the enthusiasm of someone who has answered "have you tried clearing your cache" ten thousand times.</p>
<p>The daemon's ledger lies open. Each entry maps a human-readable name to a numbered address. The most recent query shows an A record: clockwork-house.local resolving through recursive lookup — root servers to TLD to authoritative, each hop following the twelfth step of nature's own sequence, landing on the address the golden ratio would choose if it were a sysadmin.</p>
<p>Above the daemon, a sign: "This room has always been 53. That is not a coincidence."</p>`,
  exits: [
    { label: "Follow the A record resolution", target: 144, flavor: "The address resolves. Fibonacci would approve." },
    { label: "Try a CNAME redirect", target: 54, flavor: "You're aliased to another room entirely" },
    { label: "Query the MX record", target: 61, flavor: "You end up in the mail room, which is just a standup meeting" },
    { label: "Flush the cache", target: 55, flavor: "Everything you knew is forgotten. The cache starts fresh." },
    { label: "NXDOMAIN", target: 60, flavor: "The name doesn't exist. Neither, briefly, do you." },
  ],
  hint: "The daemon's ledger holds the answer. A records resolve names to addresses — and nature has its own numbering system, spiraling outward from 1, 1, 2, 3...",
  correct: 144,
},
54: {
  id: 54, title: "The Load Balancer",
  description: `<p>You stand in a circular room with thirty-three doors arranged around the perimeter. A harried traffic controller sits in the center, wearing a high-visibility vest and an expression that suggests they haven't slept since the last traffic spike. They're using a round-robin algorithm, which means they're pointing at each door in sequence and shouting "NEXT."</p>
<p>Occasionally a door turns red and the controller marks it as "unhealthy" with a dry-erase marker, muttering about failed health checks. The walls display real-time metrics: requests per second, p99 latency, and a counter labeled "dropped connections" that ticks up with alarming frequency.</p>
<p>"Thirty-three backends," the controller sighs. "One of them has to be healthy."</p>`,
  exits: [
    { label: "Accept the round-robin assignment", target: 33, flavor: "The controller points at door thirty-three. You don't argue." },
    { label: "Request sticky sessions", target: 58, flavor: "You insist on always going to the same place" },
    { label: "Bypass to the origin", target: 55, flavor: "You skip the balancer and hit the cache directly" },
    { label: "Check the health endpoint", target: 93, flavor: "You want proof that something back there is alive" },
  ],
  hint: "The round-robin always comes around. Trust the algorithm to point you at the right number.",
  correct: 33,
},
55: {
  id: 55, title: "The Cache Layer",
  description: `<p>Everything in this room has already happened. The furniture is a copy of furniture from another room. The paintings are cached renders of views you haven't seen yet — or maybe you have and forgot. Time-to-live stamps float above every object, counting down to the moment they'll vanish and need to be fetched again from the source of truth.</p>
<p>A Redis-red glow suffuses the space. The response time here is phenomenal — you barely think of a question before the answer appears, though whether it's the <em>current</em> answer is anyone's guess. A sign warns: "Stale data served with confidence."</p>
<p>One object pulses with a TTL that points insistently toward something. Room forty-two, perhaps. The cache knows things.</p>`,
  exits: [
    { label: "Cache hit", target: 42, flavor: "The data you need was here all along" },
    { label: "Cache miss", target: 54, flavor: "Not found. You'll have to fetch from the origin." },
    { label: "Invalidate everything", target: 60, flavor: "You flush the cache and find yourself in the void" },
    { label: "Check the eviction policy", target: 63, flavor: "Something has to go to make room for something new" },
  ],
  hint: "The cache always knows where the real data lives. Trust the warmest entry.",
  correct: 42,
},
56: {
  id: 56, title: "The Interrupt Handler",
  description: `<p>You've been interrupted. Whatever you were doing before — walking, thinking, existing in a coherent narrative — has been preempted by this room's insistence that something more important requires your attention RIGHT NOW. The walls flash with priority levels from 0 to 255, and your current context has been pushed onto a stack that wobbles ominously.</p>
<p>A klaxon blares the interrupt request, then stops. Then blares again. The handler dutifully saves your registers (memories, pocket contents, current facial expression) and vectors you toward the interrupt service routine.</p>
<p>"When we're done," the handler promises, "you'll be restored to exactly where you were." It pauses. "Assuming the stack doesn't overflow."</p>`,
  exits: [
    { label: "Return from interrupt", target: 1, flavor: "Your context is popped. You resume where you started." },
    { label: "Trigger a higher-priority interrupt", target: 78, flavor: "Death takes priority over everything" },
    { label: "Disable interrupts", target: 59, flavor: "You mask all signals. Nothing can reach you now." },
    { label: "Check the interrupt vector table", target: 88, flavor: "The table maps each interrupt to its handler" },
  ],
  hint: "Interrupts are temporary. The return address always points to the beginning.",
  correct: 1,
},
57: {
  id: 57, title: "The Debugger's Sanctum",
  description: `<p>Time has stopped. A yellow highlight illuminates the exact line of reality you're currently executing, and a panel to your left shows the values of every variable in your life. Most of them are null. Your "confidence" variable reads 0.03 and is flagged in red.</p>
<p>Breakpoints dot the floor like landmines, each one a moment where someone thought "I should check what's happening here." A call stack traces your journey through the house, each frame a room you've visited. The deepest frame reads simply: "main()".</p>
<p>The step-over button glows invitingly. Step-into looks terrifying. The watch expression panel shows: "path_to_exit == rooms[4]".</p>`,
  exits: [
    { label: "Step into", target: 4, flavor: "You descend one level deeper into the execution" },
    { label: "Step over", target: 65, flavor: "You skip the details and move to the next statement" },
    { label: "Continue execution", target: 56, flavor: "You release the breakpoint and let reality resume" },
    { label: "Inspect the call stack", target: 51, flavor: "You trace back through every function that called you" },
  ],
  hint: "The watch expression doesn't lie. Step into the truth.",
  correct: 4,
},
58: {
  id: 58, title: "The Sprint Retrospective",
  description: `<p>A circle of chairs surrounds a whiteboard divided into three columns: "What Went Well," "What Didn't," and "Action Items." The first column is empty. The second contains a single entry in 4-point font that scrolls for approximately seven pages. The third column reads: "Try harder. Be better. Believe in the process."</p>
<p>A facilitator with the energy of someone who has read exactly one book about agile methodology keeps asking how everyone "feels" about the sprint. The sprint in question appears to be your entire life.</p>
<p>Post-it notes litter the floor. One reads: "We keep ending up back here." Another: "Maybe the real velocity was the friends we made along the way." A third, barely legible: "Exit through the beginning."</p>`,
  exits: [
    { label: "Commit to the action items", target: 1, flavor: "You promise to do better next sprint. You won't." },
    { label: "Revisit the backlog", target: 85, flavor: "There are four hundred ungroomed stories in there" },
    { label: "Stay for another retro", target: 58, flavor: "The facilitator beams. You die a little inside." },
    { label: "Declare bankruptcy", target: 61, flavor: "You throw all the post-its in the air and walk out" },
  ],
  hint: "Retrospectives always circle back. The only real action item is to start over.",
  correct: 1,
},
59: {
  id: 59, title: "The Legacy Code Museum",
  description: `<p>Glass cases display ancient artifacts: a COBOL payroll system still running at three banks, a Perl script held together by regular expressions and prayer, a Visual Basic 6 application that processes 40% of the nation's insurance claims. Each artifact is labeled "DO NOT TOUCH" and "NOBODY KNOWS HOW THIS WORKS."</p>
<p>The docents speak in hushed tones about the Original Developer, who left the company in 2003 and took all institutional knowledge with them. Comments in the code read "TODO: fix this later" with timestamps from 1997.</p>
<p>A maintenance programmer sits in the corner, mass of greying hair, mass of greying code, staring at a screen. "If you change one line," they whisper, "the whole thing collapses." They gesture vaguely toward room one. "That's where it all started."</p>`,
  exits: [
    { label: "Rewrite from scratch", target: 1, flavor: "You foolishly believe you can do better. The cycle begins anew." },
    { label: "Add another wrapper", target: 87, flavor: "If you can't fix it, abstract it" },
    { label: "Read the documentation", target: 60, flavor: "There is no documentation. There is only void." },
    { label: "Stay and maintain", target: 59, flavor: "You accept your fate. The legacy code accepts you." },
  ],
  hint: "Legacy code can't be maintained forever. Sometimes you have to start over.",
  correct: 1,
},
60: {
  id: 60, title: "The Null Room",
  description: `<p>There is nothing here. Not in the philosophical sense of existential emptiness, but in the very literal programming sense that this room is a null reference. The walls exist only as the absence of walls. The floor is the absence of floor. You are standing on the concept of standing, in a room that is the concept of a room.</p>
<p>A NullPointerException tries to manifest but can't, because the exception handler is also null. It's nulls all the way down.</p>
<p>Somewhere in the void, a faint "5" flickers — the only non-null value in this entire space, hovering like a lonely sentinel. Everything else has been dereferenced into oblivion. The number 5 seems to be pointing somewhere. Anywhere but here.</p>`,
  exits: [
    { label: "Dereference the pointer", target: 5, flavor: "You follow the only non-null reference in the room" },
    { label: "Wrap in Optional", target: 57, flavor: "You add a safety layer of indirection" },
    { label: "Throw NullPointerException", target: 56, flavor: "The exception propagates up the call stack" },
    { label: "Initialize to default", target: 1, flavor: "Everything defaults to the beginning" },
  ],
  hint: "In a sea of nulls, the only real value is the one that isn't.",
  correct: 5,
},
61: {
  id: 61, title: "The Daily Standup",
  description: `<p>Fifteen people stand in a circle, each waiting for their turn to say "yesterday I did the same thing as every other yesterday, today I'll do the same thing as every other today, no blockers." The meeting was supposed to last fifteen minutes. It has been going for forty-seven. Someone is screen-sharing their Jira board.</p>
<p>The Scrum Master holds a rubber chicken — the "talking token" — and enforces the sacred ritual with the fervor of someone whose entire job depends on this meeting existing. A developer in the corner is clearly playing a mobile game behind their standup posture.</p>
<p>A clock on the wall shows every day as Monday. Below it, a smaller sign: "Time moves forward. Room 1 is always yesterday."</p>`,
  exits: [
    { label: "Say 'no blockers' and leave", target: 1, flavor: "You escape with the minimum viable update" },
    { label: "Mention a blocker", target: 80, flavor: "You've made a terrible mistake. Now there's a follow-up meeting." },
    { label: "Grab the talking chicken", target: 75, flavor: "The rubber chicken feels strangely therapeutic" },
    { label: "Mute yourself", target: 60, flavor: "You fade into the null space of unmuted silence" },
  ],
  hint: "The only escape from an endless standup is to go back to the beginning of the sprint.",
  correct: 1,
},
62: {
  id: 62, title: "The Merge Conflict",
  description: `<p>The room is split down the middle. The left half is painted blue and labeled "<<<<<<< HEAD". The right half is painted green and labeled ">>>>>>> feature-branch". In between, a line of red tape reads "=======" and neither side will budge.</p>
<p>Both halves of the room contain furniture, but it's different furniture occupying the same coordinates. A chair on the left exists simultaneously with a table on the right, creating a Schrödinger's furnishing situation that makes sitting down a probabilistic exercise.</p>
<p>A weary developer sits on the red tape, manually choosing which pieces of reality to keep. "Thirty-three files with conflicts," they mutter. "Thirty-three. Always thirty-three."</p>`,
  exits: [
    { label: "Accept current changes", target: 51, flavor: "You keep HEAD's version of reality" },
    { label: "Accept incoming changes", target: 33, flavor: "You accept the feature branch. Thirty-three files resolved." },
    { label: "Accept both", target: 74, flavor: "You keep everything. The room doubles in size and absurdity." },
    { label: "Abort the merge", target: 1, flavor: "You give up and reset to a known good state" },
  ],
  hint: "The developer keeps counting to thirty-three. Perhaps that's the resolution.",
  correct: 33,
},
63: {
  id: 63, title: "The Garbage Collector",
  description: `<p>A fastidious automaton roams this room, tagging objects as "reachable" or "unreachable" with the precision of a bureaucrat and the mercy of a tax auditor. Furniture, decorations, and the occasional small mammal are swept into a compaction zone when their reference count drops to zero.</p>
<p>You nervously check your own reference count. It's hovering at one — the house itself still points to you, but barely. The collector eyes you with professional interest. "Still reachable," it notes, "but only from the root set."</p>
<p>The root set, displayed on a monitor, shows a directed graph. Most paths from root converge on node thirty-three. The collector taps it. "That one's strongly referenced. Very reachable."</p>`,
  exits: [
    { label: "Follow the root reference", target: 33, flavor: "You trace the strongest reference chain to its destination" },
    { label: "Become unreachable", target: 60, flavor: "You sever all references. The collector advances." },
    { label: "Force a collection cycle", target: 55, flavor: "Everything not nailed down gets swept away" },
    { label: "Pin yourself in memory", target: 59, flavor: "You mark yourself as uncollectable. The legacy endures." },
  ],
  hint: "The root set knows what's important. Follow the strongest reference.",
  correct: 33,
},
64: {
  id: 64, title: "The Memory Palace",
  description: `<p>You stand in an architecture built for sixty-four bits of addressable space — a palace so vast that most of its rooms have never been visited. The ceilings soar to heights expressible only in hexadecimal. Each corridor is labeled with an address, and the one you're standing in reads 0x0040 — sixty-four in the language of the machine.</p>
<p>A register file lines one wall, sixty-four slots wide. Most contain zeros, but position eleven is flagged — literally, a tiny pennant waves from the register at 0x0B, and a small brass plaque beneath reads "These go to eleven." The flag ripples in a breeze that shouldn't exist in a memory subsystem.</p>
<p>The palace's page table maps every virtual address to a physical one. The entry for this room points to a frame that's eleven pages from the start.</p>`,
  exits: [
    { label: "Follow the flagged register", target: 11, flavor: "Register 0x0B. Eleven. The flag was not subtle." },
    { label: "Read from address zero", target: 60, flavor: "Null pointer. You know better than this." },
    { label: "Trigger a page fault", target: 56, flavor: "The page isn't in physical memory. An interrupt fires." },
    { label: "Access the heap", target: 63, flavor: "The garbage collector gives you a suspicious look" },
    { label: "Overflow the buffer", target: 100, flavor: "You write past the end of the array. Here we go." },
  ],
  hint: "The flagged register at 0x0B speaks plainly. In decimal, that's an address even Spinal Tap would recognize.",
  correct: 11,
},
65: {
  id: 65, title: "The Pair Programming Dojo",
  description: `<p>Two chairs sit before a single keyboard. The rule is absolute: one drives, one navigates. The chairs are currently occupied by a mass of tangled wires that was once a pair of noise-cancelling headphones, and a rubber duck who appears to be navigating with more competence than most humans you've worked with.</p>
<p>The whiteboard is covered in diagrams that start coherent and gradually devolve into what might be either a system architecture or a cry for help. Someone has written "DRIVER GOES TO 4" in large letters, circled three times.</p>
<p>The duck quacks. It's the most useful code review feedback you've received in years. You consider offering it equity.</p>`,
  exits: [
    { label: "Take the driver seat", target: 4, flavor: "You drive. The whiteboard was quite clear about the destination." },
    { label: "Navigate instead", target: 75, flavor: "You defer to the duck's superior instincts" },
    { label: "Solo it", target: 57, flavor: "You push the duck aside. The debugger will have to do." },
    { label: "Swap roles", target: 66, flavor: "The duck takes over driving. You review." },
  ],
  hint: "The whiteboard instructions are circled three times. Someone really wanted you to notice.",
  correct: 4,
},
66: {
  id: 66, title: "The Code Review Chamber",
  description: `<p>Your pull request hangs in the air as a holographic diff, every line exposed to the scrutiny of three reviewers who materialized from the ether specifically to tell you that your variable names are "not descriptive enough." One has left forty-seven comments. Another has approved without reading it. The third requested changes on a line you didn't modify.</p>
<p>A thread has developed in the comments about whether tabs or spaces are superior. It is now longer than the code itself and has attracted participants from rooms that don't exist yet.</p>
<p>The approval count reads: 1/2 required. The final approver's avatar shows room 1. Their status: "Will review after lunch." Lunch was three days ago.</p>`,
  exits: [
    { label: "Merge with one approval", target: 1, flavor: "You YOLO-merge. The reviewer from room 1 will understand." },
    { label: "Address all comments", target: 58, flavor: "You enter an endless cycle of review and revision" },
    { label: "Rebase and force-push", target: 51, flavor: "You rewrite history. The reviewers' comments now reference nothing." },
    { label: "Close the PR", target: 59, flavor: "You give up. The code becomes legacy immediately." },
  ],
  hint: "One approval is enough if you know where it leads. The final reviewer's location is your destination.",
  correct: 1,
},
67: {
  id: 67, title: "The Incarnation Chamber: Time",
  description: `<p>Clocks line every surface — grandfather clocks, digital displays, sundials, water clocks, and one deeply confused hourglass that appears to flow sideways. None of them agree on the current time, but they all agree on one thing: you're late. For what, they won't say.</p>
<p>The Incarnation of Time sits at a desk, looking exactly like a middle manager who has mastered the art of appearing busy. They're surrounded by calendars from every era, each one circled on a different date. "Time," they announce, "is an illusion. Lunchtime doubly so. But room eight — room eight is always on time."</p>
<p>A metronome ticks at precisely 8 beats per measure. The Incarnation taps along.</p>`,
  exits: [
    { label: "Follow the metronome's tempo", target: 8, flavor: "Eight beats. Eight rooms. The rhythm is the path." },
    { label: "Turn back time", target: 1, flavor: "You rewind to the very beginning" },
    { label: "Fast-forward", target: 78, flavor: "You skip ahead to an encounter with Death" },
    { label: "Pause", target: 56, flavor: "Time stops. An interrupt handler takes over." },
  ],
  hint: "The metronome never lies. Count the beats.",
  correct: 8,
},
68: {
  id: 68, title: "The Incarnation Chamber: Fate",
  description: `<p>Three women sit at a loom the size of a server rack, weaving threads of destiny into patterns that look suspiciously like circuit diagrams. The youngest cards the raw wool of possibility. The middle one spins it into the thread of causality. The eldest holds shears that could cut a life short or — more relevantly — snip a network cable.</p>
<p>The tapestry they're weaving shows your path through the house, rendered in sixteen colors. Most threads lead to dead ends, but one golden thread traces a route that passes through exactly sixteen rooms before reaching the center.</p>
<p>"Sixteen threads," the middle sister murmurs, "in the loom of fate. The same number as the rooms on the true path's first quarter."</p>`,
  exits: [
    { label: "Follow the golden thread", target: 16, flavor: "Sixteen rooms. Sixteen threads. The pattern holds." },
    { label: "Cut a thread", target: 78, flavor: "The eldest sister smiles. Death follows." },
    { label: "Tangle the threads", target: 82, flavor: "The weave becomes circular. Import errors everywhere." },
    { label: "Read the tapestry", target: 67, flavor: "The pattern reveals Time's involvement" },
  ],
  hint: "Count the threads in the golden path. The Fates weave in powers of two.",
  correct: 16,
},
69: {
  id: 69, title: "The Nice Room",
  description: `<p>It's just... nice. The temperature is perfect. The lighting is warm but not harsh. There's a comfortable chair, a small table with a cup of tea at the ideal drinking temperature, and a window that looks out onto a garden that exists in a state of perpetual late afternoon in early autumn.</p>
<p>There are no puzzles here. No tricks, no traps, no convoluted riddles wrapped in programming metaphors. Just a pleasant room in an otherwise deranged house. A small card on the table reads: "You looked like you needed a break. Take a moment. The answer is 42, by the way. It usually is."</p>
<p>The tea is Earl Grey. It is perfect. You feel slightly suspicious about how perfect it is.</p>`,
  exits: [
    { label: "Leave, refreshed", target: 42, flavor: "The card said 42. The tea confirmed it. Sometimes the universe is kind." },
    { label: "Stay forever", target: 69, flavor: "You attempt to never leave. The room gently nudges you toward 42." },
    { label: "Overthink it", target: 97, flavor: "There MUST be a catch. You spiral into improbability." },
    { label: "Suspect a trap", target: 79, flavor: "Your paranoia leads you to an A/B test" },
  ],
  hint: "Sometimes the answer really is written on the card. Don't overthink the nice room.",
  correct: 42,
},
70: {
  id: 70, title: "Service Discovery",
  description: `<p>A reception desk stands in a room full of name tags, each one representing a service that may or may not still be running. The receptionist consults a registry that updates every thirty seconds, which means anything could have died, resurrected, and migrated to a different host between the time you ask a question and receive the answer.</p>
<p>The walls display a service mesh diagram that looks like someone threw spaghetti at a whiteboard and then gave each noodle a REST API. Arrows point in every direction. Health check lights blink green, yellow, and — for one worrying cluster — a color that can only be described as "purple, but wrong."</p>
<p>The receptionist stamps your ticket: "Next: API Gateway, room 71."</p>`,
  exits: [
    { label: "Proceed to the API Gateway", target: 71, flavor: "The receptionist insists this is the correct routing" },
    { label: "Query for the exit service", target: 72, flavor: "The registry shows the exit is somewhere in the message queue" },
    { label: "Deregister yourself", target: 60, flavor: "You remove yourself from the registry. Nothing can find you now." },
    { label: "Check the health dashboard", target: 93, flavor: "You want to know what that purple light means" },
  ],
  hint: "Service discovery loops through the microservices. You need to find a way out of the mesh entirely.",
  correct: null,
},
71: {
  id: 71, title: "The API Gateway",
  description: `<p>All traffic flows through this room, whether it wants to or not. A bouncer checks authentication tokens at the door, rate-limits anyone who looks too enthusiastic, and transforms requests from whatever format they arrived in to whatever format the backend expects, which is always different and never documented.</p>
<p>The room is a bottleneck in every sense. Requests queue up like passengers at airport security, each one convinced they should have priority. The gateway applies throttling with the impartiality of a DMV clerk and the speed of one too.</p>
<p>A routing table on the wall maps paths to backends. /api/rooms/72 is highlighted. /api/exit returns 404. /api/help returns 418: I'm a teapot.</p>`,
  exits: [
    { label: "Follow the routing table", target: 72, flavor: "The gateway routes you to the message queue" },
    { label: "Bypass authentication", target: 73, flavor: "You slip past the bouncer into the sidecar" },
    { label: "Retry with backoff", target: 70, flavor: "Rate limited. You back off and try service discovery again." },
    { label: "Call the /api/exit endpoint", target: 60, flavor: "404 Not Found. The exit doesn't exist in this API." },
  ],
  hint: "The gateway routes everything in circles. /api/exit returns 404 for a reason — the exit isn't in this system.",
  correct: null,
},
72: {
  id: 72, title: "The Message Queue",
  description: `<p>Messages float in a vast pool, each one a sealed envelope waiting to be consumed. The room operates on a strict first-in, first-out basis, except when it doesn't, which is more often than the documentation admits. Some messages have been here so long they've developed a patina.</p>
<p>A consumer sits at the far end, processing messages one at a time with the urgency of someone being paid by the hour rather than the message. Dead letters pile up in a corner — messages that failed processing so many times they've been exiled to a special queue from which there is no return.</p>
<p>Your arrival has been queued. Estimated processing time: "eventually." The next consumer will route you to room 73.</p>`,
  exits: [
    { label: "Wait for processing", target: 73, flavor: "Eventually arrives. You're routed to the sidecar." },
    { label: "Jump the queue", target: 71, flavor: "You're bounced back to the gateway for cutting in line" },
    { label: "Become a dead letter", target: 60, flavor: "You fail processing. Welcome to the dead letter queue." },
    { label: "Publish a new message", target: 70, flavor: "Your message enters the system. Service discovery picks it up." },
  ],
  hint: "The queue is a trap. Messages go in circles through the microservice architecture. Find the dead letter escape.",
  correct: null,
},
73: {
  id: 73, title: "The Sidecar Container",
  description: `<p>This room is bolted to the side of a larger room like a remora attached to a shark. It exists solely to provide auxiliary functionality — logging, monitoring, and the vague sense that someone is watching everything you do. The sidecar has no independent purpose and knows it, which gives the space a melancholy air.</p>
<p>Envoy proxies line the walls, intercepting every request and adding headers that nobody asked for. The room's entire identity is defined by the service it's attached to, which is currently Service Discovery in room 70, completing the loop.</p>
<p>A maintenance hatch in the floor is labeled "Emergency Egress — Not Part of the Service Mesh." It leads somewhere outside the architecture entirely.</p>`,
  exits: [
    { label: "Return to the parent service", target: 70, flavor: "The sidecar dutifully routes you back to discovery" },
    { label: "Intercept the next request", target: 71, flavor: "You proxy yourself to the gateway" },
    { label: "Use the maintenance hatch", target: 52, flavor: "You escape the mesh through the container room" },
    { label: "Inject a trace header", target: 93, flavor: "You follow the distributed trace to monitoring" },
  ],
  hint: "The maintenance hatch is your only escape from the microservice loop. It's not part of the mesh.",
  correct: null,
},
74: {
  id: 74, title: "The Pun Room",
  description: `<p>Every object in this room is a pun. The floor is made of "hardwood" that is literally wood with a very stern expression. The ceiling fan is a small enthusiastic person on the ceiling who keeps shouting encouraging things about the ceiling. A "firewall" is a wall that is on fire. The room has "windows," but they're running Windows 95 and refuse to close.</p>
<p>A knight in armor stands in the corner. He introduces himself as "Sir Kit Board" and won't stop making electrical jokes. Next to him, a literal Java island has been crammed into a terrarium, complete with a tiny coffee plantation.</p>
<p>The exit is marked "PUN-ch through to room 33." You groan so hard it registers on a seismograph three rooms over.</p>`,
  exits: [
    { label: "PUN-ch through", target: 33, flavor: "You escape through the worst-labeled exit in the house" },
    { label: "Take the 'staircase'", target: 62, flavor: "The stairs are just stares. People staring at you. It leads to a merge conflict." },
    { label: "Open a 'window'", target: 99, flavor: "Windows 95 crashes. You end up on an edge case." },
    { label: "Ask Sir Kit Board for directions", target: 88, flavor: "He gives you a very polarizing answer about two's complement" },
  ],
  hint: "The room is insufferable, but the exit label contains your destination. Groan and bear it.",
  correct: 33,
},
75: {
  id: 75, title: "The Rubber Duck Debugging Chamber",
  description: `<p>A single rubber duck sits on a pedestal in the center of an otherwise empty room, lit by a single dramatic spotlight. The room's acoustics are perfect for one-sided conversations with inanimate objects. Generations of developers have stood here, explaining their problems to this duck, and the duck has solved every single one by doing absolutely nothing.</p>
<p>The duck stares at you with its painted-on eyes and waits. You begin explaining your situation: lost in a house, looking for the exit, nothing makes sense. Halfway through your explanation, you realize the answer yourself. "Of course," you whisper. "Room twenty."</p>
<p>The duck says nothing. The duck has always said nothing. The duck is perfect.</p>`,
  exits: [
    { label: "Follow your revelation", target: 20, flavor: "The duck's silence has shown you the way. As it always does." },
    { label: "Keep explaining", target: 65, flavor: "You realize more things. Pair programming with a duck is underrated." },
    { label: "Take the duck", target: 74, flavor: "The duck is a pun on 'duck typing.' You end up in the pun room." },
    { label: "Question the duck's competence", target: 61, flavor: "The daily standup is the opposite of useful silence" },
  ],
  hint: "The duck doesn't give answers. It gives you the space to find them yourself. You already know where to go.",
  correct: 20,
},
76: {
  id: 76, title: "The War Room",
  description: `<p>Red lights pulse. Monitors display cascading failures across every system in the house. An incident commander stands at the center of controlled chaos, demanding status updates from engineers who are furiously typing while also furiously arguing about whether this is a SEV-1 or a SEV-2. It is clearly a SEV-0 but nobody wants to page the VP.</p>
<p>The timeline of the incident is being reconstructed on a whiteboard. Root cause analysis points to a single misconfigured room — room 42, which apparently returned the right answer but to the wrong question. A blameless post-mortem has been scheduled, though the word "blameless" is doing a lot of heavy lifting.</p>
<p>"We need to route all traffic to 42," the commander declares. "It's the only stable endpoint."</p>`,
  exits: [
    { label: "Follow the incident commander's order", target: 42, flavor: "You route yourself to the stable endpoint" },
    { label: "Check the runbook", target: 93, flavor: "The runbook says 'Don't Panic' on every page" },
    { label: "Escalate to management", target: 85, flavor: "Management responds with an agile board and good vibes" },
    { label: "Blame DNS", target: 53, flavor: "It's always DNS. Always." },
  ],
  hint: "In an incident, follow the commander. The stable endpoint is the answer.",
  correct: 42,
},
77: {
  id: 77, title: "The Penultimate Sorting",
  description: `<p>An immense sorting machine dominates the room, fed by a hopper containing every number you've encountered in this house. The machine's nameplate reads "BOGOSORT ENTERPRISE EDITION" and its estimated completion date is displayed on a calendar that extends seven years into the future. It has been running that long already.</p>
<p>The machine randomly shuffles the numbers, checks if they're sorted, and when they're not — which is always — shuffles again. Lucky sevens tumble past in pairs, doubled and redoubled, a parade of 7s that means nothing except misdirection. Seven times eleven is this room's number, but that arithmetic is a trap for the numerically inclined.</p>
<p>With a grinding lurch, the machine produces a single output: the number forty-five, printed on a card that smells faintly of burning silicon. "BOGOSORT COMPLETE," the display reads. "RESULT: 45. TIME ELAPSED: 7 YEARS."</p>`,
  exits: [
    { label: "Accept the bogosort result", target: 45, flavor: "Seven years of shuffling. The machine has spoken: forty-five." },
    { label: "Try quicksort instead", target: 74, flavor: "You pick a pivot. The pivot is a pun." },
    { label: "Sort by lucky sevens", target: 77, flavor: "7×11 = 77. You've just sorted yourself back here." },
    { label: "Demand a recount", target: 89, flavor: "You feed the numbers into a prime sieve instead" },
    { label: "Use bubble sort", target: 90, flavor: "Off by one. As always." },
  ],
  hint: "Bogosort takes forever, but when it finishes, it finishes. Trust the output, not the lucky numbers.",
  correct: 45,
},
78: {
  id: 78, title: "The Incarnation Chamber: Death",
  description: `<p>DEATH stands in the room, seven feet tall, robed in black, holding a scythe that has been recently sharpened and polished to a mirror finish. DEATH speaks in capital letters, which is disconcerting when you realize you can hear the capitalization.</p>
<p>"I AM NOT HERE FOR YOU," DEATH announces, in a voice like the closing of a very large book. "I AM HERE FOR THE PROCESSES THAT HAVE EXCEEDED THEIR TIME-TO-LIVE. ALSO, SOMEONE LEFT A ZOMBIE PROCESS IN ROOM 100 AND I NEED TO REAP IT."</p>
<p>DEATH's calendar shows a single appointment: "RESTART FROM ROOM 1." DEATH is surprisingly organized for an anthropomorphic personification. A cat sits on DEATH's desk, alive, not in a box, and perfectly content.</p>`,
  exits: [
    { label: "Accept the restart", target: 1, flavor: "DEATH gently returns you to the beginning. It's not personal." },
    { label: "Negotiate", target: 96, flavor: "You try to make a deal. DEATH has heard this before." },
    { label: "Reap the zombie process", target: 100, flavor: "You volunteer to help. DEATH appreciates the initiative." },
    { label: "Pet the cat", target: 69, flavor: "The cat purrs. DEATH smiles. You end up somewhere nice." },
  ],
  hint: "DEATH's calendar doesn't lie. Everyone restarts from the beginning eventually.",
  correct: 1,
},
79: {
  id: 79, title: "The A/B Testing Chamber",
  description: `<p>The room is split into two identical halves, labeled "A" and "B." Both halves contain the same furniture, the same decorations, and the same exit — but one exit's button is blue and the other's is green. A metrics dashboard tracks which half you're standing in with the obsessive detail of a marketing team that has mistaken correlation for causation.</p>
<p>The statistical significance indicator reads 0.04 — just barely below the threshold, in the way that p-values always seem to land just barely below the threshold when someone's job depends on the experiment succeeding.</p>
<p>Both exits lead to room 4. The A/B test has a 100% convergence rate because both variants are identical. The dashboard calls this "a clear winner."</p>`,
  exits: [
    { label: "Choose variant A", target: 4, flavor: "You pick A. The dashboard records your preference for science." },
    { label: "Choose variant B", target: 4, flavor: "You pick B. The dashboard records your preference, also for science." },
    { label: "Refuse to participate", target: 92, flavor: "You opt out. A feature flag catches you anyway." },
    { label: "Question the methodology", target: 58, flavor: "You raise concerns at the retrospective. Nobody listens." },
  ],
  hint: "When both options lead to the same place, the only wrong choice is not choosing.",
  correct: 4,
},
80: {
  id: 80, title: "The node_modules Abyss",
  description: `<p>You open a door and fall into a directory structure so deep that light itself gives up trying to reach the bottom. Folders nest within folders nest within folders, each containing a slightly different version of a package called "is-odd" that somehow requires 47 dependencies of its own, one of which is "is-even," which depends on "is-odd."</p>
<p>The directory weighs more than the rest of the house combined. A file counter on the wall ticks past 1.2 million and shows no signs of slowing. Somewhere in the depths, a package called "left-pad" holds the entire structure together like a load-bearing jenga block.</p>
<p>A sign reads: "You are in node_modules. Abandon all disk space, ye who enter here." Another, smaller sign reads: "rm -rf leads to room 81."</p>`,
  exits: [
    { label: "rm -rf node_modules", target: 81, flavor: "You delete everything. The diamond dependency was load-bearing." },
    { label: "npm install", target: 80, flavor: "You reinstall. Somehow there are now MORE packages." },
    { label: "Check package-lock.json", target: 82, flavor: "The lock file contradicts itself. Circular imports ahoy." },
    { label: "yarn why", target: 83, flavor: "You ask why this dependency exists. The answer is a phantom." },
  ],
  hint: "Dependency hell is a loop. You need to break out of the dependency chain entirely.",
  correct: null,
},
81: {
  id: 81, title: "The Diamond Dependency",
  description: `<p>Four packages stand at the corners of a diamond shape drawn on the floor. Package A depends on B and C. Both B and C depend on D. But B requires D version 2.1.0 and C requires D version 3.0.0, and they are not compatible. They will never be compatible. The maintainer of D moved to a yurt in Mongolia in 2019 and hasn't pushed a commit since.</p>
<p>The diamond is unresolvable. Every combination of versions produces a conflict. The room's walls display error messages in red, each one a variation of "ERESOLVE unable to resolve dependency tree."</p>
<p>A framed photograph shows the maintainer of D, smiling in their yurt. They look happy. They are free of all this.</p>`,
  exits: [
    { label: "Force resolution with --legacy-peer-deps", target: 82, flavor: "You force it. The circular imports are waiting." },
    { label: "Fork package D", target: 80, flavor: "Your fork adds to the node_modules. It grows ever deeper." },
    { label: "Rewrite in Rust", target: 83, flavor: "You start over. The phantom dependency follows you." },
    { label: "Move to a yurt", target: 69, flavor: "You follow the maintainer's example. It's surprisingly nice." },
  ],
  hint: "The diamond can't be solved from inside. Sometimes you need to escape the dependency system entirely.",
  correct: null,
},
82: {
  id: 82, title: "The Circular Import",
  description: `<p>Module A imports Module B. Module B imports Module C. Module C imports Module A. The room is shaped like a circle, which is either a design choice or a warning. You walk forward and end up behind yourself. You walk backward and end up ahead of yourself. The import graph has no leaves, no roots, only an eternal ouroboros of require() statements.</p>
<p>A whiteboard shows the dependency graph. It's a perfect circle. Someone has written "THIS IS FINE" underneath it in handwriting that gets progressively more unhinged.</p>
<p>The stack trace is infinite. Each frame points to the next, which points to the next, which points to the first. A sign helpfully explains: "To break a cycle, you must leave the cycle."</p>`,
  exits: [
    { label: "Break the cycle", target: 83, flavor: "You sever one import. The cycle leads to a phantom." },
    { label: "Lazy-load the import", target: 80, flavor: "Deferred resolution dumps you back in node_modules" },
    { label: "Restructure the modules", target: 81, flavor: "Restructuring reveals the diamond dependency underneath" },
    { label: "Accept the circular reference", target: 82, flavor: "You walk the circle again. And again. And again." },
  ],
  hint: "You can't fix a cycle from inside it. Break one edge and escape.",
  correct: null,
},
83: {
  id: 83, title: "The Phantom Dependency",
  description: `<p>Something in this room is depending on a package that isn't in the manifest. It works, somehow, because a hoisted copy from three dependency levels up happens to be accessible through a quirk of node resolution that nobody intended and everybody relies on. The phantom is invisible in package.json but very much real in node_modules.</p>
<p>The room works perfectly right now, in this exact configuration, on this exact machine. Move anything — upgrade a sibling dependency, change the install order, breathe too heavily near the lock file — and the phantom vanishes, taking your application with it.</p>
<p>A one-way emergency exit is labeled: "EJECT FROM DEPENDENCY HELL — This is not a drill." Below it: "Leads outside the npm ecosystem entirely."</p>`,
  exits: [
    { label: "Use the emergency exit", target: 52, flavor: "You eject from dependency hell into a clean container" },
    { label: "Pin the phantom", target: 80, flavor: "You add it to package.json. node_modules grows." },
    { label: "Audit the dependencies", target: 81, flavor: "The audit reveals diamonds all the way down" },
    { label: "Pretend everything is fine", target: 82, flavor: "It is not fine. The circle continues." },
  ],
  hint: "The emergency exit is your lifeline. Dependency hell has exactly one escape hatch.",
  correct: null,
},
84: {
  id: 84, title: "The Blockchain Room",
  description: `<p>Every action you take in this room is recorded on an immutable, distributed ledger that is replicated across seventeen thousand nodes, none of which are in the same jurisdiction. Moving a chair requires consensus from 51% of participants and takes forty minutes. The electricity bill for this room alone could power a small country.</p>
<p>A whitepaper on the desk describes a revolutionary new system for tracking room visits that is "like a regular database, but slower, more expensive, and nobody can fix mistakes." It has raised forty million dollars in funding.</p>
<p>The room's NFT — a pixelated drawing of the room itself — is displayed in a frame worth more than the art. Below it, etched in the immutable ledger: "The genesis block points to room 1."</p>`,
  exits: [
    { label: "Follow the genesis block", target: 1, flavor: "You trace the chain back to the very first block" },
    { label: "Mint yourself as an NFT", target: 60, flavor: "You become a non-fungible token. You are now worth nothing and everything." },
    { label: "Propose a hard fork", target: 79, flavor: "The chain splits. Both versions claim to be canonical." },
    { label: "Read the whitepaper", target: 97, flavor: "The whitepaper makes increasingly improbable claims" },
  ],
  hint: "Every blockchain has a genesis. Follow it back to the origin.",
  correct: 1,
},
85: {
  id: 85, title: "The Agile Board",
  description: `<p>A massive Kanban board covers an entire wall, its columns labeled "To Do," "In Progress," "In Review," "Blocked," "Blocked (for real this time)," "Waiting for Dave," and "Done." The "Done" column is empty. The "Waiting for Dave" column contains 73% of all tickets. Nobody knows who Dave is or when he'll be back.</p>
<p>Story points float in the air like soap bubbles. A Fibonacci sequence governs their sizing: 1, 2, 3, 5, 8, 13, 21. Someone has estimated a ticket at 34 points, which prompted an emergency grooming session that lasted four hours and accomplished nothing.</p>
<p>The board's velocity chart shows a clear trajectory toward room 33. Sprint goal: "Get there."</p>`,
  exits: [
    { label: "Follow the velocity chart", target: 33, flavor: "The sprint goal is achieved for the first time in recorded history" },
    { label: "Groom the backlog", target: 58, flavor: "You enter an endless refinement session" },
    { label: "Ask Dave", target: 61, flavor: "Dave isn't at standup either" },
    { label: "Move everything to 'Blocked'", target: 80, flavor: "Everything depends on something. Welcome to dependency hell." },
  ],
  hint: "The velocity chart points somewhere specific. Trust the metrics over the methodology.",
  correct: 33,
},
86: {
  id: 86, title: "The Regex Room",
  description: `<p>The room's address is written in a pattern so dense that understanding it qualifies as a felony in three states: <code>/^(?=.*[A-Z])(?=.*\\d)(?=.*[@$!%*?&])[A-Za-z\\d@$!%*?&]{8,}$/</code>. This is actually just the WiFi password. The room's actual pattern is much worse.</p>
<p>Strings hang from the ceiling like streamers, and a regex engine mounted on the wall greedily consumes them, backtracking through catastrophic combinations that bring reality's CPU to its knees. One particularly evil lookahead has been processing since Tuesday.</p>
<p>A capture group on the wall has isolated the number 16. "Match found," the engine declares. "Group 1: 16. The only thing in this room that actually matches anything."</p>`,
  exits: [
    { label: "Follow capture group 1", target: 16, flavor: "The regex matched. Group 1 captured your destination." },
    { label: "Use a greedy quantifier", target: 100, flavor: "You match everything. Including an infinite loop." },
    { label: "Backtrack", target: 57, flavor: "Catastrophic backtracking lands you in the debugger" },
    { label: "Give up and use string.split()", target: 62, flavor: "You split the problem and create a merge conflict" },
  ],
  hint: "Capture groups isolate what matters. Group 1 has your answer.",
  correct: 16,
},
87: {
  id: 87, title: "The Callback Labyrinth",
  description: `<p>Functions call functions that call functions that call functions. You're nested eight levels deep in a pyramid of indentation so severe that the right side of the room is compressed into a sliver. This is callback hell, and the architecture was designed by someone who learned about Promises but chose violence instead.</p>
<p>Each callback receives an error as its first argument. The errors are: "null, null, null, undefined, null, null, ENEST_TOO_DEEP, null." The seventh callback has failed, but nobody handles the error because the error handler is itself a callback that failed.</p>
<p>A small sign at the deepest indentation level reads: "Promise.resolve(42)". It's the only way to flatten this.</p>`,
  exits: [
    { label: "Promise.resolve(42)", target: 42, flavor: "You flatten the callback hell into a single resolved value" },
    { label: "Add another callback", target: 87, flavor: "The indentation increases. The room narrows further." },
    { label: "Try async/await", target: 57, flavor: "You await the debugger. At least the code is readable now." },
    { label: "Throw the unhandled error", target: 56, flavor: "The error propagates up. An interrupt handler catches it." },
  ],
  hint: "The answer to callback hell is the same as the answer to everything. Resolve it.",
  correct: 42,
},
88: {
  id: 88, title: "The Two's Complement Chamber",
  description: `<p>Everything in this room exists in two representations: its value and its bitwise inverse plus one. A thermometer on the wall shows -128 to 127, which is the emotional range of an 8-bit signed integer and also of most programmers on a Monday. The most significant bit determines the sign of everything.</p>
<p>Flip every bit and add one — that's the rule here. The room's own number, 88, sits in binary on the wall: 01011000. Its complement, 10101000, represents -88. But the room isn't interested in its own complement. It's interested in 128 — the value that overflows an 8-bit signed integer, wrapping around to exactly where it needs to be.</p>
<p>A display reads: "128: the unsigned interpretation of -128. The overflow destination."</p>`,
  exits: [
    { label: "Overflow to 128", target: 128, flavor: "Signed overflow wraps you to the unsigned interpretation" },
    { label: "Flip all bits", target: 67, flavor: "The complement of 88 leads somewhere unexpected" },
    { label: "Underflow", target: 60, flavor: "You go below zero and hit null" },
    { label: "Stay unsigned", target: 86, flavor: "Without a sign bit, 88 is just 88. The regex room has other ideas." },
  ],
  hint: "Two's complement overflow has a specific destination. 128 is what happens when a signed byte can't hold the value.",
  correct: 128,
},
89: {
  id: 89, title: "The Prime Sieve",
  description: `<p>The room is a grid of numbered tiles, each one either glowing (prime) or dark (composite). The Sieve of Eratosthenes runs continuously, striking out multiples with the methodical patience of someone who really, deeply enjoys crossing things off lists. The floor is a minefield of eliminated composites.</p>
<p>You hop from prime to prime: 2, 3, 5, 7, 11, 13... The primes thin out as the numbers grow, but they never stop. The largest prime tile currently illuminated reads 91 — wait. 91 is not prime. It's 7 × 13. Someone has vandalized the sieve. A note attached reads: "91 LOOKS prime. It FEELS prime. But it's lying. Go there anyway."</p>
<p>The actual primes nearby — 83, 89, 97 — glow with legitimate light. But 91 pulses with something more interesting.</p>`,
  exits: [
    { label: "Go to the false prime", target: 91, flavor: "91 isn't prime, but it's where you need to be" },
    { label: "Stay on true primes (97)", target: 97, flavor: "You follow legitimate mathematics to the improbability room" },
    { label: "Start the sieve over", target: 1, flavor: "Eratosthenes begins again from 2" },
    { label: "Check 83", target: 83, flavor: "A true prime, but it leads to phantom dependencies" },
  ],
  hint: "The vandalized sieve points to something that isn't what it appears. Sometimes the interesting rooms aren't prime at all.",
  correct: 91,
},
90: {
  id: 90, title: "The Off-By-One Error",
  description: `<p>The room number on the door says 91, but you're in room 90. Or is this 91 and the next room is 90? The walls are lined with fenceposts, and there's either one too many or one too few — the eternal question of whether you're counting the spaces or the posts. A "for" loop is written on the whiteboard: <code>for(i=0; i<=n; i++)</code>. The "<=" is circled in red. Twice.</p>
<p>Arrays start at zero here, which means the first room is room 0, which means you're actually in room 89, which means — no. Stop. That way lies madness.</p>
<p>A helpful sign reads: "You meant to go to room 91. You're one off. As always."</p>`,
  exits: [
    { label: "Correct the off-by-one", target: 91, flavor: "You adjust by one. Finally, the right room." },
    { label: "Start from zero", target: 1, flavor: "If arrays start at 0, room 1 is actually the second room. Whatever." },
    { label: "Use < instead of <=", target: 89, flavor: "You iterate one fewer time and end up at the prime sieve" },
    { label: "Give up on counting", target: 77, flavor: "Sorting might help. It won't, but it might." },
  ],
  hint: "You're one off from where you need to be. The sign is being very direct about this.",
  correct: 91,
},
91: {
  id: 91, title: "The Frequency Room",
  description: `<p>The room vibrates at precisely 91 hertz — a frequency that falls between the musical notes F#2 and G2, satisfying neither. Every surface resonates with this awkward tone, creating standing waves that make the furniture drift slowly toward the walls. It's the sonic equivalent of an uncanny valley.</p>
<p>A guitar hangs on the wall, its six strings humming in sympathy. The lowest string, tuned to E2 at 82.4 Hz, buzzes against the room's resonance. A luthier's note pinned to the headstock reads: "Six strings, six paths, the next harmonic resolution. Fate's sixth thread leads to the fundamental." The room's frequency wants to resolve downward, toward something simpler, something with fewer vibrations.</p>
<p>A spectrum analyzer on the desk shows the 91 Hz tone decomposing. Its strongest harmonic relationship points to the sixth subharmonic — the frequency you get when you divide by the number of strings.</p>`,
  exits: [
    { label: "Follow the sixth harmonic", target: 6, flavor: "Six strings. Sixth thread. The frequency resolves to its fundamental." },
    { label: "Tune to the next octave", target: 82, flavor: "Doubling the frequency creates a circular resonance" },
    { label: "Dampen all vibrations", target: 60, flavor: "Silence. The null frequency." },
    { label: "Play the guitar", target: 77, flavor: "You strum all six strings at once. It sorts itself out. Eventually." },
    { label: "Check the spectrum analyzer", target: 89, flavor: "The analyzer shows prime frequency components" },
  ],
  hint: "The guitar has six strings. Fate has a sixth thread. The harmonic resolution always points to the fundamental — count the strings.",
  correct: 6,
},
92: {
  id: 92, title: "The Feature Flag Room",
  description: `<p>Half the room exists and half doesn't. A feature flag controller on the wall shows a dashboard of toggles, each one enabling or disabling a different aspect of reality. "Gravity" is set to true. "Consistent wall color" is set to false, which explains the strobing. "Exit to room 6" is toggled ON, highlighted in green.</p>
<p>The room's configuration is pulled from a remote server every thirty seconds, which means the furniture occasionally appears, disappears, or transforms into other furniture mid-use. A chair you were about to sit in becomes a cactus. The cactus was not in the original feature spec.</p>
<p>A rollout percentage slider is set to 100% for the door labeled "6." The product manager has decided you should definitely go there.</p>`,
  exits: [
    { label: "Follow the enabled flag", target: 6, flavor: "The flag is ON. The PM is right for once." },
    { label: "Toggle everything off", target: 60, flavor: "Without feature flags, nothing exists. Welcome to null." },
    { label: "Request a gradual rollout", target: 79, flavor: "You A/B test the exit instead of taking it" },
    { label: "Check the flag configuration", target: 93, flavor: "The monitoring dashboard shows flag status" },
  ],
  hint: "The feature flag is enabled at 100%. Sometimes the simplest signal is the right one.",
  correct: 6,
},
93: {
  id: 93, title: "The Monitoring Dashboard",
  description: `<p>Screens cover every wall, displaying metrics, graphs, and alerts in a seizure-inducing rainbow of real-time data. CPU usage, memory consumption, error rates, request latencies — everything is measured, everything is graphed, and absolutely nobody is looking at any of it until something catches fire.</p>
<p>An alert labeled "CRITICAL" has been firing for three weeks. It reads: "Room 128 unreachable — 504 Gateway Timeout." Below it, seventeen "WARNING" alerts about rooms that may or may not exist, and one "INFO" alert that simply says "Everything is fine" in the way that things are fine moments before they are very much not fine.</p>
<p>The oncall engineer is asleep at their desk. Their pager displays: "Route to 128. Priority: CRITICAL."</p>`,
  exits: [
    { label: "Respond to the critical alert", target: 128, flavor: "You follow the pager to room 128" },
    { label: "Acknowledge and snooze", target: 76, flavor: "The war room wants to know why you snoozed a critical" },
    { label: "Check the error logs", target: 57, flavor: "The debugger might explain the 504" },
    { label: "Ignore all alerts", target: 100, flavor: "Ignored alerts lead to infinite loops. Always." },
  ],
  hint: "Critical alerts exist for a reason. The pager knows where you need to be.",
  correct: 128,
},
94: {
  id: 94, title: "The Staging Environment",
  description: `<p>This room is almost identical to the real house, but subtly wrong. The colors are slightly off. The furniture is from two versions ago. A banner across the ceiling reads "STAGING — NOT PRODUCTION" but someone has crossed out "NOT" with a marker, which explains a lot about the current state of affairs.</p>
<p>Test data fills every surface: users named "Test McTestface," addresses at "123 Fake Street," and phone numbers that are all 555-0100. A QA engineer moves through the room, methodically clicking everything and filing bugs that will be marked "Won't Fix."</p>
<p>The deployment pipeline visualization shows a single arrow from staging to production, labeled "Room 1." The QA engineer nods. "Looks good to me. Ship it."</p>`,
  exits: [
    { label: "Deploy to production", target: 1, flavor: "Staging approves. You ship yourself to room 1." },
    { label: "Rollback", target: 51, flavor: "You revert to the previous version" },
    { label: "Run the test suite", target: 79, flavor: "A/B tests are the only tests that pass" },
    { label: "File a bug", target: 85, flavor: "The bug goes straight to the backlog, never to be seen again" },
  ],
  hint: "The deployment pipeline has one destination. Trust the process and ship it.",
  correct: 1,
},
95: {
  id: 95, title: "The Xanth Crossroads",
  description: `<p>You stand at an intersection where every path is a pun so groan-worthy that the trees themselves appear to be wincing. A signpost in the center has arms pointing in four directions, each one a magical wordplay that would make a centaur weep. The air smells of talent and bad decisions.</p>
<p>A small dragon perches on the signpost, its talent apparently being the ability to generate puns at a rate of thirty-three per minute. "Thirty-three," it says proudly. "That's my pun rate. Also the room you should go to. Get it? PUN rate? P-U-N? No? Fine."</p>
<p>The crossroads are planted with shoe trees (actual shoes growing on branches), dogwood trees (the bark is terrible), and a single chess tree (it provides shade, mate). A compass rose grows from the ground, all four petals pointing to room 33.</p>`,
  exits: [
    { label: "Follow the compass rose", target: 33, flavor: "All four petals agree. Thirty-three puns per minute." },
    { label: "Talk to the dragon", target: 74, flavor: "The dragon's puns lead to the pun room. Obviously." },
    { label: "Pick a shoe from the shoe tree", target: 90, flavor: "Wrong size. Off by one." },
    { label: "Sit under the chess tree", target: 96, flavor: "Checkmate. The demon was waiting." },
  ],
  hint: "The dragon's pun rate is also navigation advice. All roads here lead to the same number.",
  correct: 33,
},
96: {
  id: 96, title: "The Demon's Contract",
  description: `<p>A demon sits behind a mahogany desk, wearing a three-piece suit and an expression of practiced benevolence. The contract before you is written in 6-point font and extends for approximately forty thousand words, most of which are variations on "the party of the first part hereby agrees to be confused in perpetuity." The demon offers you a pen made from the quill of an angel who failed a code review.</p>
<p>The interesting clause is on page 237, subsection 20(b): "The signatory shall proceed to room twenty (20), hereafter referred to as 'the destination,' 'the next room,' and 'that place the duck told you about.'"</p>
<p>The demon smiles. "I assure you, the clause about your soul is entirely standard and not at all worth reading."</p>`,
  exits: [
    { label: "Sign and proceed to room 20", target: 20, flavor: "Subsection 20(b) is surprisingly helpful for a demonic contract" },
    { label: "Read the fine print", target: 86, flavor: "The fine print is written in regex. Good luck." },
    { label: "Negotiate terms", target: 78, flavor: "DEATH is the demon's legal counsel" },
    { label: "Refuse to sign", target: 84, flavor: "The demon puts the contract on the blockchain instead" },
  ],
  hint: "Demonic contracts always have one useful clause buried in the legalese. Page 237, subsection 20(b).",
  correct: 20,
},
97: {
  id: 97, title: "The Infinite Improbability Room",
  description: `<p>This room operates on the principle that anything sufficiently improbable will eventually happen, given enough time and a sufficiently hot cup of tea. The furniture rearranges itself every few seconds according to probability distributions that favor the unlikely. A sofa briefly becomes a whale, then a bowl of petunias, then a sofa again but facing the wrong way.</p>
<p>The Improbability Drive mounted on the wall calculates the odds of you finding the exit as 42 to 1 against. This is, by the standards of this house, remarkably good odds. The Drive helpfully displays: "PROBABILITY OF EXIT VIA ROOM 42: High. PROBABILITY OF EXIT VIA ANY OTHER ROOM: Also yes, but less amusingly."</p>
<p>A digital readout tracks the improbability field: "Current probability of reaching room 42 from here: 1.0." That's not improbable at all.</p>`,
  exits: [
    { label: "Embrace the probability", target: 42, flavor: "The odds are 1.0 in your favor. Even improbability agrees." },
    { label: "Increase improbability", target: 69, flavor: "The improbable outcome is ending up somewhere nice" },
    { label: "Consult the whale", target: 60, flavor: "The whale has ceased to exist. The petunias saw it coming." },
    { label: "Make tea", target: 98, flavor: "The tea leads to poetry. This is not an improvement." },
  ],
  hint: "When the Improbability Drive gives you 1.0 probability, the universe is being uncharacteristically direct.",
  correct: 42,
},
98: {
  id: 98, title: "The Vogon Poetry Recital",
  description: `<p>You have entered the third worst poetry recital in the universe. A Vogon — or something that shares a Vogon's aesthetic sensibility and complete disregard for meter, rhyme, or the emotional wellbeing of the audience — stands at a podium, clearing its throat. The clearance takes eleven minutes. The poem takes longer.</p>
<p>The audience is strapped into their seats. Several have achieved a state of transcendence that is indistinguishable from unconsciousness. One person's left eyelid has begun twitching in what might be morse code spelling "HELP."</p>
<p>The poem's final stanza, delivered with all the grace of a collapsing soufflé, concludes: "And thus the gruntbuggly path / leads ever back to room the first / where all things start and poets are worst." The audience weeps. Not from emotion. From damage.</p>`,
  exits: [
    { label: "Flee to room 1", target: 1, flavor: "The poem said room 1. You don't question poetry. You escape it." },
    { label: "Request an encore", target: 98, flavor: "You monster." },
    { label: "Write a review", target: 66, flavor: "Your code review skills transfer to poetry criticism" },
    { label: "Seek the improbability of better art", target: 97, flavor: "Surely somewhere in the probability space, good poetry exists" },
  ],
  hint: "Even terrible poetry contains directions. The final stanza was quite explicit about where the path leads.",
  correct: 1,
},
99: {
  id: 99, title: "The Edge Case",
  description: `<p>This room exists at the boundary between what was tested and what wasn't. Every surface is a corner case: a door that's simultaneously open and closed, a light switch with three positions (on, off, and "quantum"), and a clock displaying the time as "NaN:NaN:NaN PM." The room number itself — 99 — is suspiciously close to 100, which is where most people stop testing.</p>
<p>Input validation has failed catastrophically. The room accepts any type for any field: the doorknob is a string, the floor is a boolean (currently false, which is concerning), and the ceiling is an array of undefineds.</p>
<p>A sign reads: "Edge case #99: What happens when the user enters '1' in the 'destination' field? Result: they go to room 1. We should probably fix that." Nobody has fixed that.</p>`,
  exits: [
    { label: "Enter '1' in the destination field", target: 1, flavor: "The unfixed edge case works exactly as documented" },
    { label: "Enter undefined", target: 60, flavor: "Undefined resolves to null. As always." },
    { label: "Enter -1", target: 90, flavor: "Negative indexing. You're off by one from the end." },
    { label: "Enter 100", target: 100, flavor: "You exceed the tested range. Here be infinite loops." },
  ],
  hint: "The sign documents a known bug that nobody fixed. Known bugs are features you can rely on.",
  correct: 1,
},
100: {
  id: 100, title: "while(true)",
  description: `<p>The room is a perfect loop. The exit door leads back to the entrance. A counter on the wall increments with each pass: you are currently on iteration 1, but the counter's maximum value is Number.MAX_SAFE_INTEGER, and the room shows no signs of providing a break condition. The walls display the simplest and most terrifying code in existence: <code>while(true) {}</code></p>
<p>No break. No return. No throw. Just an unconditional branch back to the top of the loop, forever. The CPU usage indicator reads 100% and the fan noise is deafening. A process manager occasionally peeks in, considers killing you, and decides to wait one more cycle.</p>
<p>A small crack in the wall — the only flaw in the loop — has a sign next to it: "break; — Emergency exit. Leads to room 101." But room 101 is for(;;), which is the same loop with different syntax. The REAL escape requires SIGKILL from outside.</p>`,
  exits: [
    { label: "Continue the loop", target: 100, flavor: "while(true) { goto 100; }" },
    { label: "break;", target: 101, flavor: "You break out of while(true) into for(;;). Lateral move." },
    { label: "SIGKILL", target: 78, flavor: "DEATH arrives to reap the runaway process" },
    { label: "Ctrl+C", target: 56, flavor: "An interrupt handler catches the signal" },
  ],
  hint: "The loop has no internal exit condition. You need an external signal to break free — an interrupt or a reaper.",
  correct: null,
},

101: {
  id: 101, title: "The For-Ever Loop",
  description: `<p>The doorway deposits you into a corridor that bends back on itself with the quiet malice of a <code>for(;;)</code> statement missing its break condition. The walls are tiled in repeating chevrons that scroll past your peripheral vision even when you stand still. A counter on the wall reads <strong>ITERATION: 2,147,483,647</strong> and is ticking upward. It will never overflow. It has been patched.</p>
<p>A whiteboard mounted at eye level displays pseudocode in a frantic hand: <em>"while(true) { hope--; }"</em> Beneath it, someone has taped a sticky note: <em>"The exit condition is Room 1. It has always been Room 1. Please stop iterating."</em></p>
<p>The floor is a treadmill. You are walking and going nowhere. This is both a metaphor and a building code violation.</p>`,
  exits: [
    { label: "Break statement: room 1", target: 1, flavor: "The loop finally terminates" },
    { label: "Continue to room 102", target: 102, flavor: "The iterator increments" },
    { label: "Segfault into room 103", target: 103, flavor: "Memory access violation" },
    { label: "Fork into room 150", target: 150, flavor: "Now there are two of you" },
  ],
  hint: "The sticky note says Room 1. The loop needs a break. You are the break condition. Stop iterating.",
  correct: 1,
},

102: {
  id: 102, title: "The Goto Considered Harmful",
  description: `<p>A room that Dijkstra would have loathed. The floor is a tangle of painted arrows in seventeen colors, each labeled <code>goto</code> followed by a line number. They cross, loop, contradict, and in one memorable case, an arrow labeled <code>goto 42</code> points straight up through the ceiling. The structural engineering implications are concerning.</p>
<p>A bust of Edsger Dijkstra sits on a pedestal, wearing an expression of profound disappointment. His brass plaque reads: <em>"I told you so. Go to Room 62. Or better yet, Room 1. Structure your control flow."</em> Someone has placed a dunce cap on the bust. It fits perfectly.</p>
<p>Every arrow eventually loops back to this room. Except one. A single red arrow, barely visible under the others, reads <code>goto 62</code> and points through a door that smells faintly of spaghetti.</p>`,
  exits: [
    { label: "goto 62 (the red arrow)", target: 62, flavor: "Through spaghetti code" },
    { label: "goto 101 (back to the loop)", target: 101, flavor: "The arrows converge" },
    { label: "goto 1 (structured exit)", target: 1, flavor: "Dijkstra approves" },
    { label: "goto 103 (into the stack)", target: 103, flavor: "Downward through frames" },
  ],
  hint: "Dijkstra says Room 62 or Room 1. The red arrow agrees on 62. Either way, stop using goto.",
  correct: 62,
},

103: {
  id: 103, title: "The RecursionError",
  description: `<p>You enter this room and immediately recognize it. You've been here before. No, wait--this is a <em>copy</em> of the room you were just in, but slightly smaller. Through the next doorway you can see another copy, smaller still. The rooms nest inward like matryoshka dolls designed by someone with a grudge against stack memory.</p>
<p>A call stack trace is printed on a scroll that unrolls from the ceiling, listing every function call that brought you here. It is <strong>4,891 frames deep</strong>. The scroll reaches the floor and keeps going, pooling around your ankles like bureaucratic quicksand. At the very bottom: <em>"RecursionError: maximum depth exceeded. Base case: Room 48."</em></p>
<p>A sign shaped like a stack frame reads: <em>"Every recursion needs a base case. Yours is Room 48. Unwind."</em></p>`,
  exits: [
    { label: "Base case: room 48", target: 48, flavor: "The stack unwinds" },
    { label: "Recurse deeper: room 101", target: 101, flavor: "StackFrame pushed" },
    { label: "Tail-call optimize: room 1", target: 1, flavor: "Reuse the frame" },
    { label: "Throw exception: room 150", target: 150, flavor: "Uncaught, unhandled" },
  ],
  hint: "The base case is Room 48. Every recursive function needs one. Be the base case.",
  correct: 48,
},

// ═══════════════════════════════════════════════════════════
// RECOVERY ROOMS 104-109
// ═══════════════════════════════════════════════════════════

104: {
  id: 104, title: "The Test Suite",
  description: `<p>A pristine white room. Fluorescent lights hum at precisely 60 Hz. Along every wall, green and red indicator lights blink in sequence: <strong>PASS, PASS, PASS, FAIL, PASS, PASS, FAIL</strong>. A massive display board shows test results scrolling upward. The passing tests are unremarkable. The failing ones are annotated: <em>"expected: Room 33, actual: Room 104. ASSERTION ERROR."</em></p>
<p>A QA engineer's desk occupies the center, scattered with bug reports. The top one reads: <em>"BUG-7734: Guest consistently fails to reach Room 33 (The Taxidermist's Workshop). Priority: CRITICAL. Assigned to: Guest."</em> A rubber duck sits on the desk, posed as if listening. Its base reads: <em>"Tell me about Room 33."</em></p>
<p>The test coverage report taped to the wall shows <strong>33%</strong> of rooms visited. The number 33 appears to be load-bearing in this metaphor.</p>`,
  exits: [
    { label: "Fix the failing test: room 33", target: 33, flavor: "The indicators turn green" },
    { label: "Skip test: room 1", target: 1, flavor: "Marked as @Ignored" },
    { label: "Mock the result: room 112", target: 112, flavor: "Technically passes" },
    { label: "File a bug: room 149", target: 149, flavor: "Someone else's problem" },
    { label: "Rubber duck debug: room 105", target: 105, flavor: "The duck listens patiently" },
  ],
  hint: "The assertion expects Room 33. The coverage says 33%. The rubber duck wants to hear about 33. Fix the test. Go to Room 33.",
  correct: 33,
},

105: {
  id: 105, title: "The Rubber Duck Room",
  description: `<p>Rubber ducks. Hundreds of them. Thousands. They fill the room like a foam pit at an extremely specific carnival. Each duck has a tiny label: <code>debug_duck_v2.3.1</code>. They squeak when you step on them. The collective squeaking creates a chord that sounds suspiciously like the number <strong>twenty</strong> spoken by a choir of ducks.</p>
<p>A developer's journal lies open atop the duck pile: <em>"Day 14 of rubber duck debugging. I have explained the routing algorithm to 847 ducks. Duck #848 finally helped me see it. The Cartographer's Office, Room 20, is the waypoint. The maps don't lie. The ducks don't lie. I might be losing my mind but at least my code compiles."</em></p>
<p>One duck, larger than the rest, wears a tiny crown. Its label reads: <em>"Senior Duck. Room 20. Trust the process."</em></p>`,
  exits: [
    { label: "Follow Senior Duck: room 20", target: 20, flavor: "The ducks part like a rubber sea" },
    { label: "Squeak back to room 1", target: 1, flavor: "The ducks disapprove" },
    { label: "Debug deeper: room 104", target: 104, flavor: "More tests await" },
    { label: "Duck overflow: room 150", target: 150, flavor: "Too many ducks on the stack" },
  ],
  hint: "The Senior Duck says Room 20. The developer's journal confirms it. The Cartographer's Office is on the true path. Trust the process. Trust the duck.",
  correct: 20,
},

106: {
  id: 106, title: "The Changelog",
  description: `<p>The walls are a scrolling terminal display, green text on black, listing every change ever made to the Clockwork House. Entries scroll past in reverse chronological order: <em>"v47.3.1: Fixed door in Room 37 that opened to the void instead of Room 6. Severity: moderate." "v46.0.0: BREAKING CHANGE: Removed gravity from Room 116. No migration path." "v1.0.0: Initial release. 50 rooms. 1 true path. ∞ regret."</em></p>
<p>A terminal prompt blinks at waist height: <code>clockwork-house $</code>. Someone has typed <code>git log --oneline | head -1</code> and the output reads: <em>"a1b2c3d: feat: add Room 1 as universal recovery point (closes #1847)"</em></p>
<p>A sticky note on the monitor: <em>"If you're reading the changelog, you're lost. Room 1 is <code>HEAD</code>. Rebase your journey."</em></p>`,
  exits: [
    { label: "git checkout room-1", target: 1, flavor: "HEAD detached successfully" },
    { label: "git log: room 122", target: 122, flavor: "More history" },
    { label: "git blame: room 108", target: 108, flavor: "Someone is responsible" },
    { label: "git stash: room 119", target: 119, flavor: "Saved for later" },
    { label: "git cherry-pick: room 127", target: 127, flavor: "Just the good commit" },
  ],
  hint: "The changelog says Room 1 is HEAD. Rebase your journey there. Every version of the house agrees: start at 1.",
  correct: 1,
},

107: {
  id: 107, title: "The Canary Deployment",
  description: `<p>A room divided exactly in half by a velvet rope. The left side is painted institutional gray with a sign reading <strong>PRODUCTION</strong>. The right side is painted neon yellow with a sign reading <strong>CANARY</strong>. A literal canary sits in a brass cage on the canary side, tweeting contentedly. Its song, if you listen closely, resolves into the melody of "42."</p>
<p>A deployment dashboard on the wall shows traffic routing: <em>"5% of guests routed to CANARY path. 95% routed to PRODUCTION. Canary health: EXCELLENT. Canary destination: Room 42. Production destination: Room 1."</em> You are, apparently, in the 5%.</p>
<p>The canary hops to a perch labeled <strong>42</strong>. A monitoring screen flashes: <em>"Canary metrics nominal. Proceed to Room 42. Do not rollback."</em></p>`,
  exits: [
    { label: "Canary path: room 42", target: 42, flavor: "The canary sings approval" },
    { label: "Production rollback: room 1", target: 1, flavor: "Safe and boring" },
    { label: "A/B test: room 110", target: 110, flavor: "Split the traffic" },
    { label: "Incident channel: room 108", target: 108, flavor: "Something went wrong" },
  ],
  hint: "The canary sings 42. The dashboard routes you to 42. You're in the lucky 5%. Don't rollback.",
  correct: 42,
},

108: {
  id: 108, title: "The Incident Report",
  description: `<p>A war room. Whiteboards covered in timelines, root cause analyses, and increasingly desperate handwriting. The incident: <em>"SEV-1: Guest trapped in non-true-path room. Impact: total. Duration: ongoing."</em> A Slack channel projected on the wall shows a conversation between engineers named after Greek letters:</p>
<p><em>@alpha: Guest is lost again. @beta: Have we tried turning them off and on again? @gamma: That's not how guests work. @alpha: Confirmed. Remediation: route guest to Room 1. This has been the remediation for every incident since 1847. @delta: Maybe we should fix the rooms. @alpha: Declined. Working as designed.</em></p>
<p>A big red button on the conference table reads: <strong>REMEDIATE</strong>. Beneath it, smaller text: <em>"Routes to Room 1. As always."</em></p>`,
  exits: [
    { label: "Press REMEDIATE: room 1", target: 1, flavor: "Incident resolved" },
    { label: "Escalate: room 120", target: 120, flavor: "Page the on-call" },
    { label: "Post-mortem: room 118", target: 118, flavor: "What went wrong" },
    { label: "Blame someone: room 102", target: 102, flavor: "It was the goto's fault" },
  ],
  hint: "The remediation is always Room 1. Every incident since 1847. Press the big red button. Accept the working-as-designed nature of your predicament.",
  correct: 1,
},

109: {
  id: 109, title: "The Dark Launch",
  description: `<p>The room is almost completely dark. Not dramatically dark--more like someone forgot to flip the feature flag for the lighting. A dim console in the corner displays: <em>"Feature: ROOM_ILLUMINATION. Status: DISABLED. Rollout: 0% of guests."</em> You are, once again, in a percentile that works against you.</p>
<p>In the gloom, you can make out shapes. A feature flag dashboard glows faintly, listing hundreds of toggles. Most are disabled. One labeled <strong>TRUE_PATH_SHORTCUT</strong> is enabled, and its description reads: <em>"Routes directly to Room 128 (The Overflow). Dark launch. No fanfare. Just go."</em></p>
<p>A developer's Post-it in the darkness: <em>"We dark-launched The Overflow because QA said the transition from Room 6 was 'too abrupt.' Room 128 is real. The feature flag doesn't lie. The lighting, however, is a known issue."</em></p>`,
  exits: [
    { label: "Follow the feature flag: room 128", target: 128, flavor: "Dark-launched and live" },
    { label: "Toggle illumination: room 1", target: 1, flavor: "Let there be light" },
    { label: "Canary check: room 107", target: 107, flavor: "Verify the rollout" },
    { label: "Disable all flags: room 120", target: 120, flavor: "Nuclear option" },
  ],
  hint: "The feature flag routes to Room 128, The Overflow. It's dark-launched but live. The lighting is a known issue, not a blocker.",
  correct: 128,
},

// ═══════════════════════════════════════════════════════════
// FALSE PATH: 110-117 (looks real, dead-ends at 117)
// ═══════════════════════════════════════════════════════════

110: {
  id: 110, title: "The Shortcut",
  description: `<p>A bright, well-lit corridor. Suspiciously well-lit. The kind of well-lit that a competent architect would design, which should immediately make you distrust it in a house built by madmen and maintained by clockwork. A sign in a cheerful font reads: <strong>"SHORTCUT TO THE END! This way! ---->"</strong></p>
<p>The floor is smooth. The walls are clean. There is a pleasant smell of fresh paint and unearned confidence. A progress bar on the wall shows <strong>70% COMPLETE</strong>, which is a lie, but an encouraging one. Motivational posters line the hallway featuring stock photos of people high-fiving over laptops.</p>
<p>A small, easily overlooked plaque at ankle height reads: <em>"This path was constructed in 1923 by the Department of Misdirection. It has never led anywhere. Enjoy the lighting."</em></p>`,
  exits: [
    { label: "Follow the shortcut: room 111", target: 111, flavor: "The arrow points onward" },
    { label: "Read the fine print: room 1", target: 1, flavor: "Back to honest architecture" },
    { label: "Suspicious detour: room 107", target: 107, flavor: "Trust but verify" },
    { label: "Take the A/B test: room 112", target: 112, flavor: "Variant B looks promising" },
  ],
  hint: "The ankle plaque says the Department of Misdirection built this. It has never led anywhere. But the lighting IS nice. Go to Room 1 instead.",
  correct: 1,
},

111: {
  id: 111, title: "The False Corridor",
  description: `<p>The corridor continues, somehow even brighter. Sconce lights flicker in a pattern that spells <strong>TRUST US</strong> in Morse code if you happen to know Morse code, which is itself suspicious because why would a trustworthy corridor need to communicate trustworthiness in a military cipher?</p>
<p>The walls display framed testimonials: <em>"This shortcut saved me hours!" --Definitely A Real Person</em>. <em>"Five stars, would shortcut again!" --Not A Sock Puppet</em>. <em>"I found the exit in just seven rooms!" --The Department of Misdirection</em>. That last one seems like a quality control failure.</p>
<p>A vending machine offers <strong>CONFIDENCE (50 cents)</strong> and <strong>SUSPICION (free)</strong>. The suspicion slot is empty. Previous visitors took all of it.</p>`,
  exits: [
    { label: "Press onward: room 112", target: 112, flavor: "The testimonials cheer" },
    { label: "Turn back: room 110", target: 110, flavor: "Back to the shortcut entrance" },
    { label: "Emergency exit: room 1", target: 1, flavor: "Through the vending machine" },
    { label: "Side passage: room 113", target: 113, flavor: "A friendly voice calls" },
  ],
  hint: "The testimonials are fake. The Department of Misdirection accidentally signed one. The suspicion is free because everyone who came here needed it. Turn back.",
  correct: 1,
},

112: {
  id: 112, title: "The Fake Trophy Room",
  description: `<p>Identical in layout to the real Trophy Room you may have visited, but the trophies are wrong. <em>"Fastest Completion of the False Path, 2024."</em> <em>"Most Convincing Self-Deception, Ongoing."</em> <em>"Believed the Progress Bar, 1997."</em> A trophy shaped like a participation ribbon reads: <em>"YOU TRIED (the wrong way)."</em></p>
<p>The progress bar on the wall now reads <strong>85% COMPLETE</strong>. It read 70% two rooms ago. The math suggests you need approximately three more rooms. The math, like the trophies, is fabricated.</p>
<p>A guest book contains a single entry, written in increasingly shaky handwriting: <em>"I followed this path for forty-seven years. The progress bar always said I was almost there. It always lied. The real trophies are in Room 40. This path has only fake ones. And fake ones are, it turns out, lighter. Because they're hollow."</em></p>`,
  exits: [
    { label: "Continue the lie: room 113", target: 113, flavor: "The progress bar ticks upward" },
    { label: "Accept the truth: room 1", target: 1, flavor: "The fake trophies watch" },
    { label: "Back to the corridor: room 111", target: 111, flavor: "Retracing false steps" },
    { label: "Seek real trophies: room 104", target: 104, flavor: "Where tests are honest" },
  ],
  hint: "The trophies are hollow. The progress bar is a liar. Forty-seven years, one guest book entry. Go to Room 1 before you become the second entry.",
  correct: 1,
},

113: {
  id: 113, title: "The Helpful Guide",
  description: `<p>A figure stands in the center of this room, beaming with the radiant, uncomplicated joy of a golden retriever who has just learned to talk. <em>"Welcome, traveler!"</em> it says. <em>"You're SO close to the end! Just a few more rooms! I'm here to HELP!"</em> It gestures enthusiastically toward the next door. Its smile never wavers. Its eyes never blink.</p>
<p>The guide wears a name tag: <strong>HI, MY NAME IS DEFINITELY NOT A TRAP</strong>. Its shoes are nailed to the floor. It cannot follow you, which raises the question of why it was designed to look like it could. A pamphlet on its podium reads: <em>"Helpful Guide v3.2. Known issues: too cheerful, uncanny valley smile, occasionally achieves sentience and becomes despondent."</em></p>
<p>Behind the guide, barely visible, a service door is labeled: <em>"MAINTENANCE: Room 1. For when the guide stops smiling."</em></p>`,
  exits: [
    { label: "Trust the guide: room 114", target: 114, flavor: "The guide claps with delight" },
    { label: "Use the maintenance door: room 1", target: 1, flavor: "The guide's smile flickers" },
    { label: "Back away slowly: room 112", target: 112, flavor: "It watches you retreat" },
    { label: "Ask the guide hard questions: room 117", target: 117, flavor: "Its smile becomes strained" },
  ],
  hint: "The name tag says DEFINITELY NOT A TRAP. The pamphlet lists 'too cheerful' as a known issue. Shoes nailed to the floor. Use the maintenance door to Room 1.",
  correct: 1,
},

114: {
  id: 114, title: "The Easy Puzzle",
  description: `<p>A single pedestal. A single question. Etched in gold leaf on a marble tablet: <strong>"What is 2 + 2?"</strong> Four doors surround you, labeled <strong>3</strong>, <strong>4</strong>, <strong>5</strong>, and <strong>BANANA</strong>. The answer is obviously 4. The answer being obviously 4 is itself the puzzle, because nothing in this house has ever been obvious, and the sudden appearance of obviousness should terrify you.</p>
<p>Fine print on the tablet's reverse side: <em>"If you answered 4, congratulations! You are correct! You are also exactly where the Department of Misdirection wants you! The real puzzles in this house involve prime numbers, Fibonacci sequences, and a stuffed door. This puzzle involves addition a child could do. Draw your own conclusions."</em></p>
<p>The door labeled BANANA has a note: <em>"This door goes nowhere. But neither do the others. At least this one is honest."</em></p>`,
  exits: [
    { label: "Door 4 (the obvious answer)", target: 115, flavor: "Obviously correct" },
    { label: "Door 3 (wrong on purpose)", target: 1, flavor: "Sometimes wrong is right" },
    { label: "Door BANANA", target: 1, flavor: "At least it's honest" },
    { label: "Refuse to answer: room 112", target: 112, flavor: "The tablet sighs" },
  ],
  hint: "The puzzle is too easy. Real puzzles in this house are harder. Door 3 or BANANA both reach Room 1, which is where you actually need to be. The obvious answer is the trap.",
  correct: 1,
},

115: {
  id: 115, title: "The Countdown",
  description: `<p>A room dominated by an enormous progress bar projected on the far wall. It reads <strong>95% COMPLETE</strong> and is slowly, almost imperceptibly, ticking upward. Confetti cannons are mounted in the ceiling. A banner reads <strong>"CONGRATULATIONS!"</strong> but the exclamation mark is drooping, as if even the punctuation has lost faith.</p>
<p>A monitor shows estimated time to completion: <strong>2 minutes</strong>. You wait two minutes. It now reads: <strong>2 minutes</strong>. You wait five more. <strong>2 minutes</strong>. Zeno's progress bar. It will approach 100% but never arrive, like a software project's "last 10%" consuming 90% of the calendar.</p>
<p>Scratched into the monitor's bezel: <em>"The progress bar lied. The confetti never fires. I waited eleven years. Room 1 is the only real progress. --Visitor #31, 1962"</em></p>`,
  exits: [
    { label: "Wait for 100%: room 116", target: 116, flavor: "96%... 97%... surely..." },
    { label: "Abandon the progress bar: room 1", target: 1, flavor: "Real progress requires leaving" },
    { label: "Reboot: room 110", target: 110, flavor: "Maybe the shortcut works this time" },
    { label: "Check the confetti cannons: room 117", target: 117, flavor: "They're not loaded" },
  ],
  hint: "Visitor #31 waited eleven years. The progress bar is Zeno's paradox with a UI. Go to Room 1. That's real progress.",
  correct: 1,
},

116: {
  id: 116, title: "The Almost Room",
  description: `<p>The progress bar reads <strong>99%</strong>. You can taste the confetti. The banner now reads <strong>"ALMOST THERE!"</strong> The floor feels solid beneath your feet. The exit door ahead is large, ornate, gilded, and labeled <strong>"THE END."</strong> You reach for the handle.</p>
<p>The floor is painted on the void. There is no floor. There has never been a floor. You are standing on a glass plate suspended over an abyss of pure, weaponized disappointment. The gilded door is a mural. The progress bar is a screensaver. The confetti cannons, upon inspection, contain only a note: <em>"THERE IS NO CONFETTI. THERE WAS NEVER CONFETTI."</em></p>
<p>A service ladder descends into the void. Its rungs are labeled: <strong>117, 115, 110, 1</strong>. The last rung, Room 1, glows faintly. The void whispers: <em>"You were warned about the progress bar."</em></p>`,
  exits: [
    { label: "Descend to room 117", target: 117, flavor: "One rung down" },
    { label: "Climb back to room 115", target: 115, flavor: "The bar still says 95%" },
    { label: "Leap to room 1", target: 1, flavor: "The void respects your choice" },
    { label: "Reach for the painted door: room 110", target: 110, flavor: "It's a mural. You know this." },
  ],
  hint: "The floor is painted on nothing. The door is a mural. The confetti was always a lie. Room 1 is the real floor. Go there.",
  correct: 1,
},

117: {
  id: 117, title: "The Dead End",
  description: `<p>A wall. Just a wall. Brick, mortar, absolutely no door. Painted on this wall, in letters three feet tall, in a font that somehow conveys both finality and mild amusement:</p>
<p><strong>"THERE IS NO SHORTCUT."</strong></p>
<p>Below it, smaller: <em>"The path through the Clockwork House was never meant to be short. It was meant to be correct. Room 1 is where correct begins. You followed a false path built by the Department of Misdirection in 1923. It has never led anywhere except here. Here is a wall. The wall is real. The shortcut was not."</em></p>
<p>A single bench sits before the wall. On it, a guest book. Every entry is the same word: <em>"Oh."</em> Hundreds of them. Page after page of "Oh." The collective disappointment of a century of guests who believed in a progress bar.</p>`,
  exits: [
    { label: "Accept the wall: room 1", target: 1, flavor: "The only way is back to the beginning" },
    { label: "Check behind the bench: room 110", target: 110, flavor: "The shortcut entrance again" },
    { label: "Sit and reflect: room 118", target: 118, flavor: "The bench is comfortable, at least" },
  ],
  hint: "THERE IS NO SHORTCUT. It's written on the wall. The guest book agrees. A century of 'Oh.' Room 1. Start over. Do it right.",
  correct: 1,
},

// ═══════════════════════════════════════════════════════════
// RECOVERY ROOMS 118-126
// ═══════════════════════════════════════════════════════════

118: {
  id: 118, title: "The Retrospective",
  description: `<p>A conference room. Whiteboard markers in four colors. Sticky notes grouped under three headings: <strong>WENT WELL</strong>, <strong>DIDN'T GO WELL</strong>, and <strong>ACTION ITEMS</strong>. Under WENT WELL: <em>"Guest is still alive."</em> Under DIDN'T GO WELL: <em>"Guest followed the false path." "Guest trusted a progress bar." "Guest did not question the cheerful guide."</em></p>
<p>Under ACTION ITEMS, a single sticky note in red: <em>"Return to Room 1. Begin again. This time, count the primes. Follow the clocks. Trust the animals, not the humans. The ducks move. The bee is brass. The cat is quantum. The dolphin believes in you."</em></p>
<p>A facilitator's timer on the table shows <strong>0:00</strong>. The retrospective is over. The action items are clear. Someone has drawn a small sad face on the whiteboard. It's labeled <em>"the progress bar."</em></p>`,
  exits: [
    { label: "Accept the action items: room 1", target: 1, flavor: "The markers are capped" },
    { label: "Revisit what went well: room 107", target: 107, flavor: "The canary was a win" },
    { label: "Argue the retro: room 117", target: 117, flavor: "Back to the wall" },
    { label: "File it away: room 106", target: 106, flavor: "Into the changelog" },
  ],
  hint: "The retro is clear: Room 1. Count primes. Follow clocks. Trust the animals. The action items don't lie. The progress bar does.",
  correct: 1,
},

119: {
  id: 119, title: "Null Island",
  description: `<p>Coordinates: 0.0000, 0.0000. You are standing at the intersection of the prime meridian and the equator, which in geographic terms is the middle of the Atlantic Ocean, and in programming terms is where all the malformed data goes. The room is featureless, white, and damp. A GPS unit on the wall reads <strong>LAT: 0, LON: 0</strong> and below it: <em>"You are nowhere. Congratulations."</em></p>
<p>A cartographer's note is pinned to a buoy floating in an inch of seawater: <em>"Null Island is where data goes when it has no location. You are data with no location. The Cartographer's Office in Room 20 can fix this. The cartographer maps everything. Even nowhere."</em></p>
<p>A rubber duck floats past. It looks familiar. Its base reads: <em>"I debugged my way here. Room 20 debugs the way out."</em></p>`,
  exits: [
    { label: "Navigate to room 20", target: 20, flavor: "The GPS recalculates" },
    { label: "Drift to room 1", target: 1, flavor: "Current carries you home" },
    { label: "Sink to room 103", target: 103, flavor: "Into recursive depths" },
    { label: "Follow the duck: room 105", target: 105, flavor: "Debug companions reunite" },
  ],
  hint: "Null Island is nowhere. Room 20 has the maps to get you somewhere. The cartographer maps even nowhere. The duck agrees.",
  correct: 20,
},

120: {
  id: 120, title: "The Kernel Panic",
  description: `<p>Everything has stopped. The gears in the walls, normally ticking, are frozen. The lights flicker between on and off with no in-between state. The floor displays a wall of white text on a black void: <em>"KERNEL PANIC - NOT SYNCING: VFS: Unable to mount root fs on unknown-block(0,0)."</em> The Clockwork House's operating system has crashed.</p>
<p>A maintenance terminal offers exactly one command: <code>reboot</code>. Its man page, taped to the side, reads: <em>"REBOOT(1) - Restart the Clockwork House. Returns guest to Room 1. Side effects: none. The house has been rebooting since 1847. It always comes back. So do the guests."</em></p>
<p>The frozen gears groan. A single gear tooth falls and clinks on the glass floor. Somewhere in the walls, a watchdog timer barks. Metaphorically. It's a timer. But it barks.</p>`,
  exits: [
    { label: "reboot: room 1", target: 1, flavor: "The gears resume" },
    { label: "fsck: room 129", target: 129, flavor: "Check the filesystem" },
    { label: "Single-user mode: room 122", target: 122, flavor: "Minimal boot" },
    { label: "Pull the power: room 138", target: 138, flavor: "Hard shutdown" },
  ],
  hint: "Kernel panic. Reboot. Room 1. The house has been doing this since 1847. The watchdog timer is barking. Just reboot.",
  correct: 1,
},

121: {
  id: 121, title: "The Incarnation: Nature",
  description: `<p>The room is a forest glade that cannot possibly exist inside a house, and yet here it is, complete with birdsong, dappled sunlight, and a brook that flows from one wall to the other with complete disregard for plumbing. Ferns uncurl in real time. A fox watches you from behind a mossy log, its eyes the same brass as the house's gears.</p>
<p>The trees are numbered. Oak <strong>6</strong> is the tallest and oldest, its bark carved with the words: <em>"The Ballroom remembers the forest. The forest remembers the Ballroom. Room 6 is where nature and artifice dance together. A waltz, specifically. In 3/4 time."</em></p>
<p>Six fireflies blink in synchrony. Six mushrooms form a fairy ring. Six stones cross the brook. The fox has six whiskers on each side. The number six is, in this room, structurally load-bearing.</p>`,
  exits: [
    { label: "Follow the fox: room 6", target: 6, flavor: "It glances back, waiting" },
    { label: "Wade upstream: room 139", target: 139, flavor: "The brook knows the way" },
    { label: "Climb Oak 6: room 143", target: 143, flavor: "Upward through canopy" },
    { label: "Through the ferns: room 1", target: 1, flavor: "Back to built things" },
    { label: "Into the fairy ring: room 146", target: 146, flavor: "The mushrooms glow" },
  ],
  hint: "Six of everything. The oak says Room 6. The fox leads to Room 6. The Ballroom. Nature incarnate points to where nature meets architecture.",
  correct: 6,
},

122: {
  id: 122, title: "The Man Page",
  description: `<p>A monospaced room. Every surface is formatted like a Unix manual page. The ceiling reads <code>CLOCKWORK-HOUSE(1)</code>. The walls contain SYNOPSIS, DESCRIPTION, OPTIONS, and SEE ALSO sections. The floor is the BUGS section. It is extensive.</p>
<p>The DESCRIPTION section reads: <em>"The Clockwork House is a multi-room interactive navigation system. The canonical entry point is Room 1. The true path is documented in clockwork-house.conf(5) and is left as an exercise for the reader."</em></p>
<p>Under OPTIONS: <em>"-r, --restart: Return to Room 1. -h, --help: Display this man page. You are already here. -v, --version: 47.3.1. --abandon-hope: Not a valid option. Stop trying."</em> The SEE ALSO section lists: <em>"room(1), door(3), regret(7), clockwork-house.conf(5)"</em></p>`,
  exits: [
    { label: "--restart: room 1", target: 1, flavor: "Canonical entry point" },
    { label: "SEE ALSO room(1): room 106", target: 106, flavor: "Cross-reference" },
    { label: "Read the BUGS: room 120", target: 120, flavor: "There are many" },
    { label: "man clockwork-house.conf: room 109", target: 109, flavor: "The configuration" },
  ],
  hint: "The man page is clear: Room 1 is the canonical entry point. The -r flag restarts. The BUGS section is not your problem right now.",
  correct: 1,
},

123: {
  id: 123, title: "The Magic Number",
  description: `<p>A room that is, for all intents and purposes, a calculator the size of a studio apartment. Giant LED segments form numbers on every wall. Currently they display <strong>0x7F</strong>. A conversion table bolted to the ceiling helpfully notes: <em>"0x7F = 127 decimal. 127 is a Mersenne prime (2^7 - 1). It is the highest value of a signed 8-bit integer. It is also a room number."</em></p>
<p>A developer's notebook on a lectern: <em>"Magic numbers in code are bad practice. Magic numbers in houses are worse. But Room 127 is THE magic number. The Localhost. Where all packets come home. Where 127.0.0.1 means 'you are here.' Except you're not there. You're here. Fix that."</em></p>
<p>The LED walls pulse: <strong>127... 127... 127...</strong> The room's ambient temperature is 127 degrees Fahrenheit, which is uncomfortable but thematically consistent.</p>`,
  exits: [
    { label: "Resolve to 127", target: 127, flavor: "The LEDs go steady" },
    { label: "Underflow to room 1", target: 1, flavor: "Below the minimum" },
    { label: "Overflow to room 128", target: 128, flavor: "One past the maximum" },
    { label: "Cast to float: room 140", target: 140, flavor: "Precision loss imminent" },
    { label: "NaN: room 119", target: 119, flavor: "Not a number, not a room" },
  ],
  hint: "0x7F is 127. Mersenne prime. The Localhost. Room 127 is where you need to be. The LEDs are not subtle about this.",
  correct: 127,
},

124: {
  id: 124, title: "The Linter",
  description: `<p>Red squiggly lines cover everything. The walls, the floor, the ceiling--all underlined in red, as if the room itself has been flagged for errors. A massive terminal displays warnings scrolling at speed: <em>"WARNING: Room 124 is unreachable code. WARNING: Guest variable declared but never used on true path. WARNING: Unused import 'hope'. ERROR: Expected Room 4, found Room 124."</em></p>
<p>An autofix suggestion blinks at the bottom of the terminal: <em>"AUTOFIX AVAILABLE: Replace Room 124 with Room 4 (The Study). This fix has 100% confidence. The linter has never been wrong. The linter is your friend. The linter judges you but constructively."</em></p>
<p>A .eslintrc file is framed on the wall like a diploma. Rule <code>"no-unused-rooms": "error"</code> is highlighted. This room violates it. This room knows it violates it. This room has made peace with its violations.</p>`,
  exits: [
    { label: "Accept autofix: room 4", target: 4, flavor: "The red squiggles vanish" },
    { label: "Suppress warning: room 1", target: 1, flavor: "// eslint-disable-next-line" },
    { label: "Ignore linter: room 102", target: 102, flavor: "The squiggles intensify" },
    { label: "Configure rules: room 122", target: 122, flavor: "Read the man page" },
  ],
  hint: "The linter says Room 4. The autofix has 100% confidence. Room 4 is The Study, second room on the true path. Accept the autofix.",
  correct: 4,
},

125: {
  id: 125, title: "The Xanth Talent",
  description: `<p>Every person in Xanth has a magical talent, unique to them. This room has decided that it, too, has a talent. Its talent is <em>making puns become physically real</em>. A "doornail" is embedded in one wall--a nail shaped like a door. A "bookworm" inches across the floor--a worm made of pages. A "flight of stairs" has tiny wings and is attempting to achieve liftoff.</p>
<p>A fairy--or possibly a very small librarian--sits atop a mushroom reading a book titled <em>"The Source of Magic."</em> She looks up: <em>"Your talent is getting lost. The Mundane world calls that 'poor navigation.' In Xanth, we call it an adventure. Room 42 is the Answer. Even Mundanes know this. Especially Mundanes, actually."</em></p>
<p>A "stairway to heaven" leads upward but is blocked by a "No Pun Intended" sign. A "dead end" is marked by a tiny gravestone for a hallway named <em>Ed</em>. You step over Ed's grave carefully.</p>`,
  exits: [
    { label: "The Answer: room 42", target: 42, flavor: "Even Xanth knows this one" },
    { label: "Through the doornail: room 117", target: 117, flavor: "Dead as a doornail" },
    { label: "Follow the bookworm: room 106", target: 106, flavor: "It reads the changelog" },
    { label: "Ride the stairflight: room 1", target: 1, flavor: "It doesn't fly well" },
  ],
  hint: "The fairy librarian says Room 42. The Answer. Even Mundanes know it. Douglas Adams knew it. Xanth concurs. Go to 42.",
  correct: 42,
},

126: {
  id: 126, title: "The CI/CD Pipeline",
  description: `<p>A room shaped like a conveyor belt, because it is a conveyor belt. You stand on it and move through stages painted on the walls: <strong>BUILD -> TEST -> LINT -> STAGE -> DEPLOY</strong>. Green checkmarks appear as you pass each stage. The BUILD stage assembles a door. The TEST stage opens and closes it forty times. The LINT stage corrects its grammar. The STAGE stage puts it in a staging environment, which is just a slightly smaller room.</p>
<p>The DEPLOY stage has a big green button: <strong>DEPLOY TO ROOM 128</strong>. A pipeline log scrolls beside it: <em>"Pipeline #8,847. Status: PASSED. All checks green. Artifact: one (1) door to Room 128 (The Overflow). Deploy target: production. Rollback target: Room 1."</em></p>
<p>A DevOps engineer's coffee mug sits on a shelf, labeled: <em>"I survived 8,847 deployments and all I got was this mug and a correct route to Room 128."</em></p>`,
  exits: [
    { label: "Deploy to room 128", target: 128, flavor: "Pipeline complete. All green." },
    { label: "Rollback to room 1", target: 1, flavor: "Safe rollback" },
    { label: "Re-run pipeline: room 126", target: 126, flavor: "Flaky test? Try again." },
    { label: "Check staging: room 109", target: 109, flavor: "The dark launch environment" },
  ],
  hint: "Pipeline passed. All checks green. Deploy to Room 128, The Overflow. The coffee mug confirms it. 8,847 deployments can't all be wrong.",
  correct: 128,
},

// ═══════════════════════════════════════════════════════════
// TRUE PATH ROOMS: 127, 128, 144
// ═══════════════════════════════════════════════════════════

127: {
  id: 127, title: "The Localhost",
  description: `<p>You are home. Or at least, the network thinks you are. The room resolves to <strong>127.0.0.1</strong>, the loopback address, the IP that means "right here, right now, talking to yourself." The walls are server racks humming at a frequency that massages your molars. Every rack is labeled <strong>64-bit architecture</strong>. A monitoring dashboard shows RAM: <strong>64 GB</strong>. CPU cores: <strong>64</strong>. Process ID of the Clockwork House daemon: <strong>64</strong>.</p>
<p>A chessboard sits on the main console, its <strong>64 squares</strong> each representing a room. The square for Room 64 glows amber. A sysadmin's log is open: <em>"All roads on localhost lead to 64. The architecture demands it. 64-bit pointers, 64 squares on the board, the N64 cartridge slot in Server Rack 7 (don't ask). Route the guest to 64."</em></p>
<p>An old Nintendo 64 is plugged into Rack 7. Its screen displays: <em>"It's dangerous to go alone. Take this route: Room 64."</em> The controller has one joystick, pointed firmly at the door marked <strong>64</strong>.</p>`,
  exits: [
    { label: "Route to room 64", target: 64, flavor: "64 bits of resolution" },
    { label: "Loopback to room 127", target: 127, flavor: "localhost loops to localhost" },
    { label: "Ping room 128", target: 128, flavor: "One hop away" },
    { label: "Traceroute to room 1", target: 1, flavor: "14 hops through the house" },
    { label: "SSH to room 123", target: 123, flavor: "Back to the magic number" },
  ],
  hint: "Everything in this room is 64. The RAM, the cores, the PID, the chessboard squares, the N64. Room 64 is the next move. The architecture demands it.",
  correct: 64,
},

128: {
  id: 128, title: "The Overflow",
  description: `<p>You have exceeded the maximum value of a signed 7-bit integer and rolled over into Room 128, which is either a feature or a bug depending on your perspective. The room shimmers with the barely-contained energy of a buffer that has been written past its boundary. Data leaks from the walls in streams of luminous hexadecimal.</p>
<p>A network engineer's workstation dominates the room. Every monitor displays packet captures, and every packet is destined for <strong>port 53</strong>--the DNS port. The universal resolver. A Wireshark filter reads: <code>udp.port == 53</code>. A Post-it on the primary monitor: <em>"All names resolve through port 53. All rooms resolve through Room 53. DNS is the phonebook of the internet. Room 53 is the phonebook of the house."</em></p>
<p>A mathematical proof is chalked on a blackboard: <em>"The 16th prime number is 53. 128 = 2^7. The 7th bit overflows to the next prime. QED: Room 53."</em> A painting on the far wall depicts a sunset at precisely <strong>5:03 PM</strong>. Subtle. Almost.</p>`,
  exits: [
    { label: "Resolve to room 53", target: 53, flavor: "DNS query successful" },
    { label: "Underflow to room 127", target: 127, flavor: "Back below the boundary" },
    { label: "NXDOMAIN: room 119", target: 119, flavor: "Name not found" },
    { label: "Flush cache: room 1", target: 1, flavor: "Start the resolution over" },
    { label: "Recursive query: room 140", target: 140, flavor: "Ask another resolver" },
  ],
  hint: "Port 53 is DNS. The 16th prime is 53. The sunset reads 5:03. The packet captures all point to 53. Room 53. Resolve.",
  correct: 53,
},

144: {
  id: 144, title: "The Fibonacci Terminus",
  description: `<p>Room 144. The twelfth Fibonacci number. The room knows this and is insufferably proud of it. Golden spirals are carved into every surface, each one mathematically perfect, each one radiating from a different center point so the overall effect is less "elegant mathematics" and more "mathematician's fever dream." The golden ratio is written on the walls in fourteen languages, including two that are fictional and one that might be dolphin.</p>
<p>A painting above the mantelpiece depicts a sunset. The clock in the painting reads <strong>7:07 PM</strong>. Beside the fireplace, an antique slot machine with three reels, each frozen on <strong>7</strong>. <em>7-7-7.</em> Jackpot. A botanist's sketch on the desk shows a sunflower with <strong>7 spirals</strong>, each containing <strong>11 seeds</strong>. A calculator beside it displays: <strong>7 x 11 = 77</strong>.</p>
<p>The golden spirals on the ceiling converge on a single point directly above the door marked <strong>77</strong>. A plaque on that door: <em>"The spiral ends. The prime begins. 77 is the product of the only two primes that matter right now."</em></p>`,
  exits: [
    { label: "Follow the spiral: room 77", target: 77, flavor: "The golden ratio approves" },
    { label: "Previous Fibonacci: room 89", target: 89, flavor: "One step back in the sequence" },
    { label: "The slot machine pays out: room 1", target: 1, flavor: "House always wins" },
    { label: "Count sunflower seeds: room 143", target: 143, flavor: "Back to the tree" },
    { label: "Dolphin language door: room 119", target: 119, flavor: "Null coordinates" },
  ],
  hint: "7:07 PM sunset. Slot machine 7-7-7. Sunflower: 7 spirals times 11 seeds equals 77. The spiral converges on Room 77. The math is beautiful and insistent.",
  correct: 77,
},

// ═══════════════════════════════════════════════════════════
// RECOVERY ROOMS 129-143, 145-149
// ═══════════════════════════════════════════════════════════

129: {
  id: 129, title: "The Segmentation Fault",
  description: `<p>The room has crashed. Not metaphorically--literally. The walls display a core dump, hexadecimal addresses scrolling past like the credits of a film where the protagonist is your RAM. A red banner across the ceiling reads: <strong>SIGSEGV: Segmentation Fault (core dumped)</strong>. You have accessed memory you were not supposed to access. The memory is offended.</p>
<p>A debugger prompt blinks on the floor: <code>(gdb) backtrace</code>. The stack trace points to one address repeated sixty-four times: <strong>0x40</strong>, which is 64 in decimal. A GDB cheatsheet taped to the wall: <em>"To continue execution, navigate to the address in the fault: Room 64. The segfault was accessing Room 64's memory. Go there. Give it back."</em></p>
<p>A coredump the size of a phone book sits on a table. Someone has used it as a coaster. The coffee ring forms a perfect circle around the number <strong>64</strong>.</p>`,
  exits: [
    { label: "Continue to room 64", target: 64, flavor: "Execution resumes" },
    { label: "Dump core to room 120", target: 120, flavor: "Kernel panic territory" },
    { label: "Restart in room 1", target: 1, flavor: "Clean address space" },
    { label: "Inspect memory: room 140", target: 140, flavor: "Shift the bits around" },
  ],
  hint: "The fault address is 0x40 = 64. The stack trace says 64. The coffee ring says 64. Room 64 is waiting for its memory back.",
  correct: 64,
},

130: {
  id: 130, title: "The Monolith",
  description: `<p>A single, enormous block of code--carved in stone, naturally--dominates the room. It's a monolithic architecture in the most literal sense: one function, four thousand lines, no abstractions, no separation of concerns, and a comment at the top that reads <code>// TODO: refactor this someday</code> dated 1847. Someday has not arrived.</p>
<p>The monolith's code, if you squint past the nested if-statements (seventeen levels deep), eventually resolves to a single return value: <strong>33</strong>. A post-it on the stone: <em>"This monolith does one thing: it tells you to go to Room 33. It takes 4,000 lines to do it. A microservice could do it in one. But the monolith was here first, and the monolith will be here last."</em></p>
<p>The stone hums. The monolith is, against all architectural best practices, still running in production.</p>`,
  exits: [
    { label: "return 33", target: 33, flavor: "The monolith's one job" },
    { label: "Refactor: room 134", target: 134, flavor: "Extract a factory" },
    { label: "Decompose: room 1", target: 1, flavor: "Microservice the journey" },
    { label: "Add to the monolith: room 147", target: 147, flavor: "4,001 lines now" },
  ],
  hint: "The monolith returns 33. Four thousand lines for one room number. Room 33, the Taxidermist's Workshop, is on the true path. Trust the monolith.",
  correct: 33,
},

131: {
  id: 131, title: "The Timeout",
  description: `<p>A waiting room. Not metaphorically--this is a room where you wait, and the room times how long you wait, and eventually the room decides you have waited too long. A countdown timer on the wall reads <strong>30:00</strong> and is ticking down. When it reaches zero, the room will--according to a small sign--"return you to the default state," which is Room 1.</p>
<p>Chairs line the walls. Magazines on a table are all titled <em>"Waiting Monthly"</em> and contain articles like <em>"The Art of Patience"</em> and <em>"Why You Should Have Gone to Room 1 Twenty Minutes Ago."</em> A ticket dispenser has issued you number <strong>∞</strong>. The current serving number is <strong>∞ - 1</strong>. You are, mathematically, next. You are also, mathematically, never.</p>
<p>A receptionist's window is closed. A note reads: <em>"Gone to Room 1. Back never."</em></p>`,
  exits: [
    { label: "Don't wait: room 1", target: 1, flavor: "The timer stops" },
    { label: "Wait it out: room 131", target: 131, flavor: "The timer resets to 30:00" },
    { label: "Take a magazine: room 122", target: 122, flavor: "Read the man page instead" },
    { label: "Peek behind reception: room 109", target: 109, flavor: "Where did they go?" },
  ],
  hint: "The receptionist is in Room 1. The magazines recommend Room 1. The timer returns you to Room 1. Every possible outcome is Room 1. Accept it.",
  correct: 1,
},

132: {
  id: 132, title: "The Singleton",
  description: `<p>There is only one of this room. There can only ever be one. The constructor is private. The room enforces its own uniqueness with the zeal of a design pattern that has achieved consciousness and decided that consciousness should not be shared. A sign reads: <strong>Singleton.getInstance()</strong> and below it: <em>"If you're here, you're the only guest. The Singleton guarantees it."</em></p>
<p>A single chair. A single lamp. A single book, titled <em>"Design Patterns for Haunted Houses,"</em> open to the chapter on Singletons. Margin note: <em>"The Singleton knows all, sees all, and routes to exactly one room: 42. The Answer Room. Because there can be only one answer, and the Singleton respects that."</em></p>
<p>The lamp flickers once. The Singleton acknowledges your presence. It does not acknowledge anyone else's. There is no one else. There is only one.</p>`,
  exits: [
    { label: "getInstance(): room 42", target: 42, flavor: "The only instance" },
    { label: "Try to clone: room 132", target: 132, flavor: "CloneNotSupportedException" },
    { label: "Reflection attack: room 1", target: 1, flavor: "Break the pattern" },
    { label: "Dependency inject: room 134", target: 134, flavor: "The Factory provides" },
  ],
  hint: "Singleton routes to one room: 42. There can be only one answer. The design pattern has spoken. getInstance() returns 42.",
  correct: 42,
},

133: {
  id: 133, title: "The Observer Pattern",
  description: `<p>You enter the room and every object in it turns to look at you. Not metaphorically. The chairs rotate. The lamps swivel. A potted plant's leaves angle toward you like satellite dishes. You are the subject. Everything else is subscribed. A notification panel on the wall updates in real time: <em>"Subject entered room. Subject looked left. Subject appears uncomfortable. Broadcasting to all observers."</em></p>
<p>The observers are listening for one specific event: <code>onCorrectRoomChosen(91)</code>. A subscription log lists the registered listeners: <em>"Room 91 listener: ACTIVE. Room 1 listener: FALLBACK. All other listeners: UNSUBSCRIBED."</em> The room's event bus displays queued events, all waiting for you to choose Room 91.</p>
<p>A chair creaks toward you. Its cushion reads: <em>"We're all watching. Go to Room 91. The event bus is getting impatient."</em></p>`,
  exits: [
    { label: "Emit event: room 91", target: 91, flavor: "All observers notified" },
    { label: "Unsubscribe: room 1", target: 1, flavor: "Listeners detached" },
    { label: "Null event: room 119", target: 119, flavor: "NullPointerException" },
    { label: "Observe the observers: room 136", target: 136, flavor: "Meta-observation" },
  ],
  hint: "The observers are waiting for you to choose Room 91. The event bus is impatient. The furniture is watching. Emit the event. Go to 91.",
  correct: 91,
},

134: {
  id: 134, title: "The Factory",
  description: `<p>A room that creates rooms. Or rather, a room that creates <em>doors</em> to rooms. An assembly line runs wall to wall, stamping out doors of various sizes, colors, and existential dispositions. Each door emerges from the press fully formed, labeled, and mildly confused about its purpose. A quality control station at the end tests each door by opening and closing it forty times.</p>
<p>The factory's current production order is pinned to a corkboard: <em>"ORDER #1847-A: Produce one (1) door to Room 4 (The Study). Priority: HIGH. Reason: Guest is lost again. Door specification: oak, functional, leads somewhere useful for once."</em></p>
<p>A factory foreman's hardhat sits on a hook. Inside: <em>"The Factory creates what is needed. What is needed is a door to Room 4. What is always needed is a door to Room 4. We have created 12,000 of them. They keep getting used."</em></p>`,
  exits: [
    { label: "Take the new door: room 4", target: 4, flavor: "Fresh from the press" },
    { label: "Order a custom door: room 1", target: 1, flavor: "Standard issue" },
    { label: "Inspect rejects: room 117", target: 117, flavor: "Dead-end doors" },
    { label: "Tour the line: room 135", target: 135, flavor: "See the Adapter stage" },
  ],
  hint: "The factory's current order is a door to Room 4. They've made 12,000 of them. Room 4 is The Study, on the true path. Take the door.",
  correct: 4,
},

135: {
  id: 135, title: "The Adapter",
  description: `<p>A room full of converters, translators, and shims. USB-A to USB-C. Imperial to metric. Fahrenheit to Celsius. Despair to mild inconvenience. Every kind of adapter known to engineering and several known only to haunted houses. The room's purpose is to make incompatible things compatible, which in the context of this house means making <em>you</em> compatible with the <em>correct path</em>.</p>
<p>A universal adapter on the main workbench has two ports: <strong>INPUT: Room 135</strong> and <strong>OUTPUT: Room 16</strong>. A label reads: <em>"You are in the wrong interface. Room 16 (The Music Room) speaks your protocol. This adapter converts 'lost' to 'found.' Plug in."</em></p>
<p>Every power strip in the room has exactly <strong>16</strong> outlets. The voltage regulator is set to <strong>16V</strong>. A travel adapter from the UK has been modified to display the number <strong>16</strong> instead of the standard wattage. Subtle as a brick.</p>`,
  exits: [
    { label: "Plug into room 16", target: 16, flavor: "Interface adapted" },
    { label: "Wrong adapter: room 1", target: 1, flavor: "Default voltage" },
    { label: "USB-C to room 134", target: 134, flavor: "Back to the Factory" },
    { label: "Metric conversion: room 130", target: 130, flavor: "Convert the monolith" },
  ],
  hint: "The adapter converts you to Room 16. Sixteen outlets, 16 volts, the number 16 everywhere. The Music Room. Plug in.",
  correct: 16,
},

136: {
  id: 136, title: "The Proxy",
  description: `<p>You haven't arrived anywhere. You've arrived at something that <em>pretends</em> to be somewhere. A proxy room. It intercepts your request to be in a real room and forwards it, after adding headers, stripping cookies, and logging your emotional state. A banner reads: <strong>REVERSE PROXY v3.1 -- Forwarding to upstream: Room 20</strong>.</p>
<p>A network diagram on the wall shows your position: you are the client, this room is the proxy, and Room 20 (The Cartographer's Office) is the origin server. The proxy's access log scrolls on a screen: <em>"200 OK: Room 20. 200 OK: Room 20. 200 OK: Room 20."</em> It has been forwarding guests to Room 20 for 147 years with a perfect uptime record.</p>
<p>A load balancer hums in the corner. It only has one upstream. It is technically unnecessary. It is proud nonetheless.</p>`,
  exits: [
    { label: "Forward to room 20", target: 20, flavor: "200 OK" },
    { label: "Bypass proxy: room 1", target: 1, flavor: "Direct connection" },
    { label: "Check cache: room 141", target: 141, flavor: "Cached response" },
    { label: "Inspect headers: room 122", target: 122, flavor: "X-Forwarded-For" },
  ],
  hint: "The proxy forwards to Room 20. It has done so for 147 years. 200 OK. The Cartographer's Office. Trust the uptime record.",
  correct: 20,
},

137: {
  id: 137, title: "The Race Condition",
  description: `<p>Two doors. They open simultaneously. Behind each, a sign reads <strong>"GO HERE FIRST."</strong> This is, by definition, impossible--you cannot go to two places first. The room has a concurrency bug it refuses to fix. Thread 1 wants you in Room 42. Thread 2 wants you in Room 6. Neither has acquired the lock. Both are writing to the same variable: your destination.</p>
<p>The result is undefined behavior. A monitor shows the destination flickering: <strong>42... 6... 42... 6... 426... NaN... Room 1</strong>. The race condition has corrupted the output. The fallback, as with all corrupted state, is Room 1.</p>
<p>A sign taped to the monitor: <em>"When two threads race and neither wins, everyone goes back to Room 1. This is not elegant. This is the mutex we deserve."</em></p>`,
  exits: [
    { label: "Thread 1: room 42", target: 42, flavor: "First thread wins" },
    { label: "Thread 2: room 6", target: 6, flavor: "Second thread wins" },
    { label: "Mutex: room 1", target: 1, flavor: "Neither thread wins" },
    { label: "Atomic operation: room 139", target: 139, flavor: "Lock-free routing" },
  ],
  hint: "The race condition corrupts to Room 1. Neither thread wins cleanly. The mutex sends you to 1. It's not elegant, but it's safe.",
  correct: 1,
},

138: {
  id: 138, title: "The Deadlock",
  description: `<p>Four doors. Each one requires a key held by the room behind one of the other doors. Room A has B's key. Room B has C's key. Room C has D's key. Room D has A's key. None can open. None will yield. The circular dependency is absolute, airtight, and smugly diagrammed on a whiteboard in the center of the room.</p>
<p>A process scheduler's note: <em>"Deadlock detected. Four resources, four holders, circular wait condition. Textbook Coffman. The only resolution is preemption: forcibly release all locks and return to Room 1. Or, as we call it in the industry, 'turning it off and on again.'"</em></p>
<p>The four doors rattle against their locks. They want to open. They can't. They've been doing this since the house implemented multithreading in 1973. A small plaque: <em>"In loving memory of Progress, died here 1973."</em></p>`,
  exits: [
    { label: "Preempt all locks: room 1", target: 1, flavor: "Locks released" },
    { label: "Break circular wait: room 139", target: 139, flavor: "Semaphore intervention" },
    { label: "Kill process: room 120", target: 120, flavor: "Kernel panic" },
    { label: "Wait forever: room 138", target: 138, flavor: "The deadlock holds" },
  ],
  hint: "Deadlock. Circular wait. Coffman conditions met. Preempt and return to Room 1. Progress died here in 1973. Don't join it.",
  correct: 1,
},

139: {
  id: 139, title: "The Semaphore",
  description: `<p>A signal tower rises through the center of the room, its mechanical arms spelling out messages in semaphore flag code. The arms click and whir, driven by the same clockwork that powers the rest of the house. You watch the sequence: <strong>S-I-X</strong>. Pause. <strong>S-I-X</strong>. Pause. <strong>R-O-O-M-S-I-X</strong>. The semaphore is not subtle, but it is persistent.</p>
<p>A concurrency textbook lies open on a lectern: <em>"A semaphore controls access to shared resources. In this house, the shared resource is 'the correct room,' and the semaphore permits exactly one guest at a time to access Room 6 (The Ballroom). Current permits available: 1. That permit is yours."</em></p>
<p>A flag set stands in the corner. Six flags. Six signal positions. The sixth position is highlighted: <em>"PROCEED."</em></p>`,
  exits: [
    { label: "Acquire permit: room 6", target: 6, flavor: "Semaphore decremented" },
    { label: "Release permit: room 1", target: 1, flavor: "Semaphore incremented" },
    { label: "Wait on condition: room 138", target: 138, flavor: "Deadlock risk" },
    { label: "Signal tower: room 133", target: 133, flavor: "Notify observers" },
  ],
  hint: "The semaphore signals S-I-X. Room 6. The Ballroom. One permit available. It's yours. Acquire it.",
  correct: 6,
},

140: {
  id: 140, title: "The Bit Shift",
  description: `<p>The room vibrates at a frequency that makes your teeth itch. Every surface displays binary: walls of zeroes and ones scrolling in columns like the world's most tedious screensaver. A mechanical display in the center shows a number being shifted left, one bit at a time: <strong>1 → 2 → 4 → 8 → 16 → 32 → 64 → 128</strong>. The display pauses at 128 and blinks.</p>
<p>An instruction manual bolted to the floor: <em>"Bit shift left (<<) doubles the value. Start at 1, shift seven times, arrive at 128. Room 128, The Overflow. The bits don't lie. They're ones and zeroes. Lying requires at least a two."</em></p>
<p>A bitwise operator chart covers one wall. The left-shift arrow (<code><<</code>) is circled in red and points at a door labeled <strong>128</strong>. Someone has written beneath it: <em>"1 << 7 = 128. This is not opinion. This is math."</em></p>`,
  exits: [
    { label: "1 << 7: room 128", target: 128, flavor: "Shifted into place" },
    { label: ">> 7: room 1", target: 1, flavor: "Shifted back to start" },
    { label: "XOR: room 123", target: 123, flavor: "Flip the bits" },
    { label: "AND mask: room 129", target: 129, flavor: "Zero out the noise" },
  ],
  hint: "1 shifted left 7 times equals 128. The bits are ones and zeroes. They can't lie. Room 128, The Overflow. Shift.",
  correct: 128,
},

141: {
  id: 141, title: "The Hash Table",
  description: `<p>Cubbyholes. Thousands of them, arranged in a grid, each numbered with a hash value. Most are empty. Some contain crumpled notes from previous visitors. The lookup is O(1) if you know the key, O(n) if you don't, and O(despair) if you're in the wrong room, which you are.</p>
<p>A lookup terminal accepts queries. You type <code>hashmap.get("next_room")</code>. It returns: <strong>53</strong>. You type <code>hashmap.get("why")</code>. It returns: <em>"Because 53 is where DNS resolves, where the 16th prime lives, and where the next leg of the path begins. Also because I said so. --The Hash Table."</em></p>
<p>Cubbyhole 53 contains a small brass key and a note: <em>"This key fits Room 53. The hash is consistent. The table does not forget."</em></p>`,
  exits: [
    { label: "hashmap.get(53): room 53", target: 53, flavor: "O(1) lookup" },
    { label: "Hash collision: room 141", target: 141, flavor: "Same bucket" },
    { label: "Rehash: room 1", target: 1, flavor: "Resize the table" },
    { label: "Iterate all: room 130", target: 130, flavor: "O(n) traversal" },
  ],
  hint: "The hash table returns 53. The brass key fits Room 53. O(1) lookup. Consistent hash. Don't iterate the whole table. Just go to 53.",
  correct: 53,
},

142: {
  id: 142, title: "The Binary Search",
  description: `<p>A sorted array of doors stretches into the distance. One hundred doors, numbered 1 through 100, in perfect ascending order. A sign reads: <em>"You are looking for Door 77. The array is sorted. Use binary search. Do NOT use linear search. We will know."</em></p>
<p>A counter on the wall shows: <strong>COMPARISONS: 0</strong>. You check the middle door: <strong>50</strong>. Too low. Right half. Check <strong>75</strong>. Too low. Check <strong>88</strong>. Too high. Check <strong>81</strong>. Too high. Check <strong>78</strong>. Too high. Check <strong>76</strong>. Too low. Check <strong>77</strong>. <em>Found.</em> The counter reads: <strong>COMPARISONS: 7</strong>. A note materializes: <em>"O(log n). Seven comparisons for 100 doors. Room 77 found in logarithmic time. Efficient. Elegant. Go."</em></p>
<p>Door 77 glows. The other 99 doors dim respectfully. The binary search is complete.</p>`,
  exits: [
    { label: "Door 77 (found)", target: 77, flavor: "O(log n) success" },
    { label: "Linear search: room 1", target: 1, flavor: "Start from the beginning, slowly" },
    { label: "Interpolation search: room 144", target: 144, flavor: "Estimate the position" },
    { label: "Hash lookup: room 141", target: 141, flavor: "O(1) if you have the key" },
  ],
  hint: "Binary search found Door 77 in 7 comparisons. Logarithmic time. Room 77 is the target. The array is sorted. The answer is found. Go.",
  correct: 77,
},

143: {
  id: 143, title: "The Tree Traversal",
  description: `<p>A binary tree grows from the floor to the ceiling. Not a metaphorical tree--an actual tree, with bark and leaves, but its branches fork in strict binary patterns. Each node bears a room number. The root is labeled <strong>1</strong>. You can traverse in-order, pre-order, or post-order. A guide on the trunk reads: <em>"In-order traversal visits the nodes in sorted sequence. But you don't want sorted. You want correct. The correct node is 144."</em></p>
<p>Node 144 is deep in the tree, on the right-heavy path. Its leaves are golden--Fibonacci gold, naturally, since 144 is the twelfth Fibonacci number. A bird nests in Node 144. It's a mechanical bird, brass and copper, and it sings a tune that resolves to the notes F-I-B: the first three letters of Fibonacci.</p>
<p>A BFS queue display on the wall shows Room 144 as the next node to be dequeued. The tree has been waiting for you to visit it.</p>`,
  exits: [
    { label: "Visit node 144", target: 144, flavor: "Dequeued from the BFS" },
    { label: "Traverse to root: room 1", target: 1, flavor: "Back to the root node" },
    { label: "Left subtree: room 121", target: 121, flavor: "Into nature" },
    { label: "Right subtree: room 142", target: 142, flavor: "Binary search territory" },
    { label: "Prune branch: room 147", target: 147, flavor: "Dead code elimination" },
  ],
  hint: "Node 144 has golden Fibonacci leaves. The BFS queue has it next. The mechanical bird sings Fibonacci. Room 144, The Fibonacci Terminus. Traverse there.",
  correct: 144,
},

145: {
  id: 145, title: "The Heap",
  description: `<p>A priority queue made physical. Rooms are stacked in a heap structure, with the highest-priority room at the top. Currently, the max-heap's root displays <strong>45</strong> in large numerals. A heapify animation plays on a loop on the wall, showing Room 45 bubbling to the top after every insertion. No matter what you add, 45 remains the maximum priority.</p>
<p>A systems engineer's note: <em>"The Threshold (Room 45) has the highest priority in every extraction. It's the room closest to the exit. Heap-extract-max always returns 45. The data structure has spoken. Pop the heap."</em></p>
<p>The heap visualization pulses: nodes labeled 45, 33, 42, 20, 16, 8, 4, 1. The entire true path, heapified. Room 45 sits at the top. A "POP" button glows red on a console. Its label: <em>"Extract max. Go to 45."</em></p>`,
  exits: [
    { label: "heap.extractMax(): room 45", target: 45, flavor: "Priority served" },
    { label: "Peek without popping: room 144", target: 144, flavor: "Just looking" },
    { label: "Insert self: room 1", target: 1, flavor: "Enqueued at minimum priority" },
    { label: "Heapify: room 143", target: 143, flavor: "Rebuild the structure" },
  ],
  hint: "The heap's max is Room 45, The Threshold. Extract-max returns 45. The priority queue puts you there. Pop the heap.",
  correct: 45,
},

146: {
  id: 146, title: "The Graph Theory Room",
  description: `<p>The room is a graph. Literally. Nodes float in space, connected by edges that glow with weighted values. You are Node 146. Your edges connect to several other nodes. A shortest-path algorithm is running in real time, highlighted in blue, tracing from your node through the graph. It terminates at Node <strong>169</strong>, highlighted in gold.</p>
<p>Dijkstra's algorithm is chalked on a blackboard (Dijkstra appears frequently in this house; the man is inescapable): <em>"Shortest path from 146 to the true path passes through Node 169. Cost: 1 edge. Weight: 0. This is the cheapest possible transition. Take it."</em></p>
<p>An adjacency matrix is printed on the floor. Row 146, Column 169 contains a <strong>1</strong>. All other entries in Row 146 are <strong>∞</strong>. The graph is not being subtle. The graph has given up on subtlety.</p>`,
  exits: [
    { label: "Shortest path: room 169", target: 169, flavor: "Weight: 0, cost: nothing" },
    { label: "Longest path: room 1", target: 1, flavor: "NP-hard and inadvisable" },
    { label: "Cycle detection: room 138", target: 138, flavor: "Deadlock in the graph" },
    { label: "Topological sort: room 143", target: 143, flavor: "Order the dependencies" },
  ],
  hint: "Dijkstra says Room 169. Cost: zero. The adjacency matrix agrees. Every other path is infinity. Room 169. Shortest path. Take it.",
  correct: 169,
},

147: {
  id: 147, title: "The Compiler",
  description: `<p>Your journey is being compiled. A room-sized compiler takes your path as source code and attempts to produce a working executable. The lexer tokenizes your room visits. The parser builds an AST. The optimizer looks at your path and emits a single warning: <em>"WARNING: Unreachable code detected. Guest has not visited Room 1 recently. Inserting implicit return to Room 1."</em></p>
<p>The compiler's output, printed on continuous-feed paper spilling from the wall: <em>"COMPILE ERROR: Missing import 'true_path' from 'room_1'. Cannot resolve symbol 'progress' without starting from Room 1. Add 'import room_1;' to continue compilation."</em></p>
<p>A rubber stamp on the compiler's desk reads: <strong>REJECTED -- RETURN TO ROOM 1 FOR RECOMPILATION</strong>. It has been used so many times the ink is worn thin. The compiler is tired. The compiler has seen thousands of guests. The compiler just wants clean code.</p>`,
  exits: [
    { label: "Recompile from room 1", target: 1, flavor: "import room_1; // required" },
    { label: "Link error: room 129", target: 129, flavor: "Unresolved symbol" },
    { label: "Optimize: room 124", target: 124, flavor: "Let the linter help" },
    { label: "Runtime: room 137", target: 137, flavor: "Skip compilation entirely" },
  ],
  hint: "Compile error: missing import from Room 1. The compiler has seen thousands of guests. All of them needed Room 1. You are not special. Go to Room 1.",
  correct: 1,
},

148: {
  id: 148, title: "The Incarnation: War",
  description: `<p>The room is a war room, and the war is against inefficiency. Maps of the Clockwork House cover every surface, marked with red pins (dead ends), blue pins (trap loops), and a single gold pin on Room 42. A general's desk holds battle plans: <em>"OPERATION: CORRECT PATH. Objective: Route guest to Room 42 (The Answer Room). Resistance: Guest's own poor decision-making. Estimated casualties: Guest's dignity."</em></p>
<p>A tactical display shows room connections like a battlefield network. Supply lines are drawn from recovery rooms to true path rooms. Room 42 is circled as the primary objective. A radio crackles: <em>"Alpha team, guest is in Room 148. Route to Room 42. This is not a drill. This has never been a drill. The house does not drill. The house wages."</em></p>
<p>A medal in a display case: <em>"Awarded for successful navigation to Room 42. Posthumous."</em> The word "posthumous" has been crossed out and replaced with <em>"eventually."</em></p>`,
  exits: [
    { label: "Advance to room 42", target: 42, flavor: "The gold pin guides" },
    { label: "Retreat to room 1", target: 1, flavor: "Strategic withdrawal" },
    { label: "Flank through room 125", target: 125, flavor: "Xanth incursion" },
    { label: "Recon room 107", target: 107, flavor: "Canary intelligence" },
  ],
  hint: "The gold pin marks Room 42. The battle plan says Room 42. The radio says Room 42. The medal was eventually awarded. Advance to 42.",
  correct: 42,
},

149: {
  id: 149, title: "The Feature Request",
  description: `<p>A product backlog stretches across the room, each card representing a feature request for the Clockwork House. <em>"As a guest, I want doors that lead somewhere useful, so that I don't wander for decades."</em> Status: <strong>WONTFIX</strong>. <em>"As a guest, I want a map."</em> Status: <strong>DUPLICATE</strong>. <em>"As a guest, I want to go home."</em> Status: <strong>ASSIGNED TO: Room 1</strong>.</p>
<p>A product manager's desk is covered in sticky notes, all color-coded by priority. The only P0 (highest priority) ticket reads: <em>"FEAT-0001: Route lost guests to Room 1. Acceptance criteria: Guest arrives in Room 1. That's it. That's the whole feature. We've been working on it for 179 years."</em></p>
<p>A burndown chart on the wall shows the sprint ending today. The only remaining story point: you. In Room 149. Not in Room 1. The sprint is going to miss its deadline.</p>`,
  exits: [
    { label: "Close the ticket: room 1", target: 1, flavor: "FEAT-0001 resolved" },
    { label: "File a new request: room 149", target: 149, flavor: "WONTFIX" },
    { label: "Escalate to PM: room 108", target: 108, flavor: "Incident channel" },
    { label: "Check the backlog: room 118", target: 118, flavor: "Sprint retrospective" },
  ],
  hint: "The only P0 feature is routing you to Room 1. The sprint depends on it. You are the last story point. Close the ticket. Go to Room 1.",
  correct: 1,
},

// ═══════════════════════════════════════════════════════════
// STACK OVERFLOW: 150
// ═══════════════════════════════════════════════════════════

150: {
  id: 150, title: "Stack Overflow",
  description: `<p>You have arrived at stackoverflow.com, except it's a room. The walls are tiled in the familiar orange and white. A question is posted on the far wall: <em>"How do I escape the Clockwork House? [closed as duplicate]"</em> It has 47 upvotes, 3 downvotes, and 12 answers. The accepted answer, marked with the green checkmark, reads simply: <strong>"Go to Room 1. — answered 1847, accepted 1847"</strong></p>
<p>The other answers are increasingly unhinged: <em>"Have you tried turning the house off and on again?" (2 upvotes)</em>. <em>"This is an XY problem. You don't want to escape, you want to find the true path." (14 upvotes)</em>. <em>"Duplicate of: 'How do I leave a building?' See also: 'What is a door?'" (flagged as not helpful)</em>.</p>
<p>A banner across the top reads: <em>"This question has been marked as a duplicate of 'How do I start at Room 1?' (1847)"</em>. The community has spoken. The community always speaks.</p>`,
  exits: [
    { label: "Accept the answer: room 1", target: 1, flavor: "The green checkmark approves" },
    { label: "Read comments: room 103", target: 103, flavor: "Thread gets recursive" },
    { label: "Post a bounty: room 123", target: 123, flavor: "+500 rep" },
    { label: "Flag as duplicate: room 150", target: 150, flavor: "Meta Stack Overflow" },
    { label: "Try the XY answer: room 118", target: 118, flavor: "What do you really want?" },
  ],
  hint: "The accepted answer is Room 1. Accepted in 1847. 47 upvotes. The community has spoken. It was marked as duplicate 179 years ago. Go to Room 1.",
  correct: 1,
},

151: {
  id: 151, title: "The Accepted Answer",
  description: `
<p>The room is formatted like a Stack Overflow answer with a green checkmark taller than you are. The checkmark glows with the warm smugness of someone who answered a question in 2009 and has been collecting reputation points in their sleep ever since. The answer reads: <em>"Just use jQuery. —StackGuru42, 847k rep"</em></p>

<p>Below it, 2,300 comments argue about whether this is still best practice. A comment from 2024 reads: <em>"This saved my life."</em> A comment from 2025 reads: <em>"This ruined my life."</em> Both have equal upvotes.</p>

<p>A banner across the ceiling: <strong>"You have been trapped in the Stack Overflow loop. Return to room 1 to find the true path."</strong> The green checkmark flickers. Even it knows.</p>
  `,
  exits: [
    { label: "Accept the answer and return to room 1", target: 1, flavor: "The checkmark dims behind you" },
    { label: "Read the comments to room 152", target: 152, flavor: "You will regret this" },
    { label: "Flag as duplicate to room 153", target: 153, flavor: "Someone already flagged you" },
    { label: "Edit the answer to room 36", target: 36, flavor: "Pending peer review" },
  ],
  hint: "The accepted answer is clear: go back to room 1. The Stack Overflow loop is a trap. The green checkmark knows it. You should too.",
  correct: 1,
},

152: {
  id: 152, title: "Closed as Duplicate",
  description: `
<p>The room is sealed with yellow caution tape that reads <strong>"CLOSED AS DUPLICATE"</strong> in a font that conveys maximum bureaucratic finality. A moderator's ghost—or perhaps just a moderator who hasn't left this room in eleven years—points to a link on the wall: <em>"This question already has answers here: Room 36."</em></p>

<p>You try to protest that your question is subtly different. The moderator's ghost produces a flowchart proving that all questions are, ultimately, the same question. The flowchart is seventeen pages long and ends with <em>"have you tried turning it off and on again?"</em></p>

<p>A small plaque: <em>"Reopened 0 times. Viewed 47,000 times. Tears shed: uncountable."</em> The only productive exit leads back to room 36, where at least the questions are still open.</p>
  `,
  exits: [
    { label: "Follow the duplicate link to room 36", target: 36, flavor: "The moderator nods approvingly" },
    { label: "Appeal to meta to room 151", target: 151, flavor: "The appeal is denied" },
    { label: "Start a bounty to room 153", target: 153, flavor: "50 reputation spent" },
    { label: "Give up and go to room 1", target: 1, flavor: "The wise choice, as always" },
  ],
  hint: "The room is closed. The moderator is immovable. Room 36 is your best option from here, but really, room 1 is where the true path begins.",
  correct: 36,
},

153: {
  id: 153, title: "The Bounty",
  description: `
<p>You have placed a bounty of 500 imaginary reputation points on the question: <em>"How do I escape this house?"</em> The bounty banner pulses urgently in orange, attracting answers from across the stack. Most are wrong. One suggests <code>rm -rf /house</code>. Another links to a Medium article behind a paywall.</p>

<p>A countdown timer on the wall shows 6 days, 23 hours remaining. You do not have 6 days. The best answer so far has -3 votes and reads: <em>"Have you tried room 1? That's where the path starts."</em> It was posted by a user called <strong>TheHouseItself</strong> with exactly 1 reputation point.</p>

<p>The bounty will expire. The points will be lost. The question will sink into the archives, unanswered, like so many before it. A sign by the exit: <em>"The real bounty was the rooms you visited along the way."</em> It was not.</p>
  `,
  exits: [
    { label: "Award the bounty and go to room 1", target: 1, flavor: "TheHouseItself thanks you" },
    { label: "Let it expire to room 151", target: 151, flavor: "Your points vanish into the void" },
    { label: "Post your own answer to room 152", target: 152, flavor: "Closed as duplicate immediately" },
    { label: "Delete your account to room 36", target: 36, flavor: "A fresh start, of sorts" },
  ],
  hint: "TheHouseItself is giving you the answer with 1 reputation point and total honesty. Room 1. The true path starts there. Trust the 1-rep user over the 847k-rep guru.",
  correct: 1,
},

// ═══════════════════════════════════════════════════════════
// RECOVERY ROOMS 154-168
// ═══════════════════════════════════════════════════════════

154: {
  id: 154, title: "The Pull Request",
  description: `
<p>The room is a diff view. The left wall shows your current path in red (deletions). The right wall shows the true path in green (additions). A reviewer's comment floats mid-air: <em>"LGTM, but actually this whole approach is wrong. Please rebase onto the correct branch starting at room 33."</em></p>

<p>A merge conflict blocks the main doorway—two versions of reality trying to occupy the same frame. One version says this door leads to room 33. The other says it leads to room 33. The conflict is that they agree but were written by different authors and Git cannot forgive this.</p>

<p>A CI pipeline runs on the ceiling. All checks pass except one: <strong>"path-validation: FAILED — current route diverges at step 6."</strong> The fix is obvious. The fix is always obvious in someone else's code review.</p>
  `,
  exits: [
    { label: "Merge to main via room 33", target: 33, flavor: "All checks pass" },
    { label: "Request changes to room 1", target: 1, flavor: "Back to the base branch" },
    { label: "Abandon PR to room 152", target: 152, flavor: "Closed without merging" },
    { label: "Force push to room 155", target: 155, flavor: "The reviewer winces" },
  ],
  hint: "The diff is clear: you need to get to room 33, the Taxidermist's Workshop, which is on the true path. The CI pipeline agrees. The reviewer agrees. Even the merge conflict agrees.",
  correct: 33,
},

155: {
  id: 155, title: "The Rollback",
  description: `
<p>Everything is reverting. The wallpaper is unpeeling upward, re-adhering itself. Dust is rising from the floor back onto shelves. A broken vase on a pedestal reassembles itself in reverse, shard by shard, until it sits whole and smug.</p>

<p>A deployment dashboard on the wall shows: <strong>"ROLLBACK IN PROGRESS — reverting to last known good state: Room 1, v1.0.0."</strong> A progress bar crawls toward 100%. The room is literally undoing your mistakes, which is both helpful and deeply insulting.</p>

<p>A changelog scrolls past: <em>"v47.3.1: Player entered room 155. Root cause: poor life choices. Remediation: rollback to room 1. ETA: now."</em> The vase, now fully restored, falls off the pedestal and breaks again. The rollback does not cover vases.</p>
  `,
  exits: [
    { label: "Complete rollback to room 1", target: 1, flavor: "Last known good state restored" },
    { label: "Abort rollback to room 154", target: 154, flavor: "The PR is still open" },
    { label: "Check the changelog to room 153", target: 153, flavor: "So many versions" },
    { label: "Deploy canary to room 171", target: 171, flavor: "Test in production, they said" },
  ],
  hint: "The rollback is your friend. Room 1 is the last known good state. Let the system do its job and take you back to the beginning of the true path.",
  correct: 1,
},

156: {
  id: 156, title: "The Rubber Duck Council",
  description: `
<p>Twelve rubber ducks sit in a semicircle on a mahogany conference table. They wear tiny lanyards. The largest duck—the Senior Duck, evidently—has a nameplate reading <strong>"Principal Quack Architect."</strong> You have been summoned to explain your code. Your code, in this case, is the route you've taken through the house.</p>

<p>You begin explaining. By the second sentence, you realize your mistake. This is how rubber duck debugging works—the duck doesn't solve your problem, you solve it yourself by explaining it to something that cannot judge you. The Senior Duck's painted eyes convey nothing, which is exactly what you needed.</p>

<p>"I should be in room 20," you say aloud. The ducks do not respond. They never respond. That's the whole point. A small duck in the back wears a sweater that reads: <em>"I survived the sprint retrospective."</em></p>
  `,
  exits: [
    { label: "Thank the council and proceed to room 20", target: 20, flavor: "The ducks accept your gratitude silently" },
    { label: "Request a 1:1 with the Senior Duck to room 42", target: 42, flavor: "Quack" },
    { label: "Escalate to management at room 1", target: 1, flavor: "Management is also ducks" },
    { label: "Submit a bug report to room 154", target: 154, flavor: "The ducks file it under 'known issues'" },
  ],
  hint: "You already solved it yourself by explaining it to the ducks. Room 20—the Cartographer's Office—is on the true path. The Principal Quack Architect approves.",
  correct: 20,
},

157: {
  id: 157, title: "The Chaos Monkey",
  description: `
<p>Something has gone wrong on purpose. The room is a server room where every third cable has been yanked out by what appears to be a small, enthusiastic primate. Monitors flash red. Alarms blare. A whiteboard reads: <strong>"CHAOS ENGINEERING: if it can break in production, break it in production first."</strong></p>

<p>The monkey sits atop a rack, wearing a Netflix lanyard and an expression of professional satisfaction. It has disconnected the path to every room except 42. This is not an accident. This is <em>resilience testing</em>. The monkey holds a clipboard with a single checkbox: <em>"Did the system recover? Y/N."</em></p>

<p>Sparks fly from a junction box. A fire extinguisher has a note taped to it: <em>"In case of chaos monkey, do not extinguish. Observe. Learn. Go to 42."</em></p>
  `,
  exits: [
    { label: "Follow the surviving path to room 42", target: 42, flavor: "The monkey checks its clipboard" },
    { label: "Attempt to restore order to room 1", target: 1, flavor: "The monkey will undo this" },
    { label: "File an incident report to room 162", target: 162, flavor: "Severity: expected" },
    { label: "Negotiate with the monkey to room 168", target: 168, flavor: "Improbable but not impossible" },
  ],
  hint: "The chaos monkey has helpfully eliminated all wrong choices. Room 42, the Answer Room, is the only stable path. Trust the monkey. It breaks things so you don't have to.",
  correct: 42,
},

158: {
  id: 158, title: "The Design Pattern Museum",
  description: `
<p>Glass cases display taxidermied design patterns. The Singleton stands alone in its case, as it must. The Observer watches the other exhibits with unsettling attentiveness. The Factory produces small, identical objects that pile up on the floor because nobody wrote a cleanup method.</p>

<p>A docent—an elderly automaton in tweed—leads a tour of one. <em>"And here we have the Visitor pattern,"</em> it says, gesturing to an empty case. <em>"It visited briefly in 2003 and has not been seen since. Its purpose remains a matter of academic debate."</em></p>

<p>The gift shop sells <em>"Gang of Four"</em> action figures. The most popular: the Abstract Factory, which produces other action figures. Room <strong>4</strong>—the Study—is accessible through the Decorator entrance, which adds a frame and a bow to the doorway without changing its fundamental function.</p>
  `,
  exits: [
    { label: "Decorator entrance to room 4", target: 4, flavor: "Now with added framing" },
    { label: "Singleton exit to room 1", target: 1, flavor: "There can be only one" },
    { label: "Observer passage to room 11", target: 11, flavor: "It watches you leave" },
    { label: "Factory output to room 160", target: 160, flavor: "Producing doors since 1994" },
  ],
  hint: "The Decorator entrance leads to room 4, the Study, which is the second room on the true path. The pattern is clear—literally, it's in a museum case.",
  correct: 4,
},

159: {
  id: 159, title: "The Xanth Gourd",
  description: `
<p>You have peered into the hypnogourd and fallen into the realm of bad dreams. The landscape is made entirely of puns that have achieved physical form. A river of <em>currants</em> flows past bushes bearing <em>raspberries</em> that blow actual raspberries at passersby. The ground is carpeted with <em>thyme</em>.</p>

<p>A Night Mare gallops past carrying a bad dream about forgetting to write unit tests. Her hooves strike sparks that smell like burned coffee and regret. She pauses, turns, and speaks: <em>"The gourd connects all nightmares, but room 6 connects to the true path. Take the Ballroom exit before the puns get worse."</em></p>

<p>They are already getting worse. A <em>cent-aur</em> trots by counting pennies. A door-shaped gap in reality leads to the Ballroom. Through it, you can hear the gramophone's waltz, mercifully pun-free.</p>
  `,
  exits: [
    { label: "Escape through the gap to room 6", target: 6, flavor: "The puns fade mercifully" },
    { label: "Follow the Night Mare to room 176", target: 176, flavor: "More bad dreams await" },
    { label: "Wade through the currants to room 1", target: 1, flavor: "You arrive damp and confused" },
    { label: "Ask the cent-aur for directions to room 175", target: 175, flavor: "That'll cost you" },
  ],
  hint: "The Night Mare speaks truth: room 6, the Ballroom, is on the true path. Escape the gourd before the puns achieve sentience. The cent-aur cannot help you.",
  correct: 6,
},

160: {
  id: 160, title: "The Magic Talent Office",
  description: `
<p>In Xanth, every person has exactly one magic talent. This office administers them. A bored bureaucrat—half human, half filing cabinet (her talent, presumably)—processes applications. The queue stretches back seventeen rooms. A sign reads: <strong>"NOW SERVING: talent #33,247 — the ability to make package.json files slightly smaller."</strong></p>

<p>Your application sits on the desk. Under "Requested Talent," someone has written: <em>"The ability to find room 33."</em> The bureaucrat stamps it <strong>APPROVED</strong> without looking up. <em>"Room 33 is through the velvet door. Next."</em></p>

<p>A man in line behind you has the talent of always knowing which dependencies have security vulnerabilities. He weeps constantly. Another woman can refactor any function into exactly 33 lines. She seems content.</p>
  `,
  exits: [
    { label: "Velvet door to room 33", target: 33, flavor: "Talent: finding this door" },
    { label: "Back of the line to room 158", target: 158, flavor: "Now serving #33,248" },
    { label: "Appeal to management at room 1", target: 1, flavor: "Management is the filing cabinet woman" },
    { label: "Check your talent at room 159", target: 159, flavor: "The gourd knows" },
  ],
  hint: "Your talent has been approved: finding room 33. The bureaucrat stamped it. Room 33, the Taxidermist's Workshop, is on the true path. Use your talent.",
  correct: 33,
},

161: {
  id: 161, title: "The Dark Pattern",
  description: `
<p>The room is a UX nightmare made physical. The exit to room 1 is a tiny, gray, underlined link at the bottom of a wall-sized popup that reads: <strong>"CONGRATULATIONS! YOU'VE BEEN SELECTED! CLICK HERE TO CLAIM YOUR PRIZE!"</strong> The "HERE" leads to a room full of newsletter subscriptions you never wanted.</p>

<p>A cookie consent banner covers the entire floor. The "Accept All" button is enormous, green, and inviting. The "Manage Preferences" button is 2 pixels wide, written in light gray on a white background, behind a potted plant. The preferences lead to room 1. The "Accept All" leads to room 161. This room. You're already here.</p>

<p>Fake close buttons dot the ceiling—each one opens another popup. A countdown timer claims: <em>"This offer expires in 00:03:42!"</em> It has said this for years. The only honest element is a small sign: <em>"The real exit is always the smallest one."</em></p>
  `,
  exits: [
    { label: "Tiny gray link to room 1", target: 1, flavor: "You found the real exit" },
    { label: "CLAIM YOUR PRIZE to room 161", target: 161, flavor: "You are already here" },
    { label: "Manage Preferences to room 1", target: 1, flavor: "Behind the potted plant" },
    { label: "Accept All Cookies to room 172", target: 172, flavor: "Your data weeps" },
  ],
  hint: "The dark pattern wants you to stay. The tiny gray link and the hidden Manage Preferences both lead to room 1. Ignore the countdown. Ignore the prize. Find the small, honest exit.",
  correct: 1,
},

162: {
  id: 162, title: "The Postmortem",
  description: `
<p>A conference room. Fluorescent lights. A whiteboard timeline of everything that went wrong, which is to say, a timeline of your journey through the house. Red dots mark every wrong turn. There are many red dots. The timeline is running out of whiteboard.</p>

<p>An incident commander—a stern brass automaton with a clipboard—reads aloud: <em>"Root cause: player did not follow the clues. Contributing factors: curiosity, poor impulse control, insufficient towel preparedness. Resolution: return to room 1 and start over."</em></p>

<p>Action items are listed on a sticky note wall. Item 1: <em>"Return to room 1."</em> Item 2: <em>"Follow the clues this time."</em> Item 3: <em>"Bring a towel."</em> Item 4: <em>"Do not pet the chaos monkey."</em> All items are assigned to you. All are overdue.</p>
  `,
  exits: [
    { label: "Accept the action items to room 1", target: 1, flavor: "The incident commander nods" },
    { label: "Dispute the root cause to room 155", target: 155, flavor: "The rollback begins anyway" },
    { label: "Blame the infrastructure to room 157", target: 157, flavor: "The chaos monkey objects" },
    { label: "Schedule a follow-up to room 191", target: 191, flavor: "It will also conclude 'go to room 1'" },
  ],
  hint: "The postmortem is clear. The root cause is identified. The action item is room 1. The incident commander has assigned it to you. It is overdue. Go.",
  correct: 1,
},

163: {
  id: 163, title: "The Docker Compose",
  description: `
<p>The room is a YAML file made architectural. Indentation is everything—one wrong space and the walls shift. Services run in isolated containers: the <strong>database</strong> hums in a sealed glass box, the <strong>cache</strong> evaporates every thirty seconds, and the <strong>web server</strong> serves a single page that reads <em>"It works!"</em> but it does not, in fact, work.</p>

<p>A <code>docker-compose.yml</code> etched in brass on the wall defines the path forward. The <strong>gateway</strong> service maps port 128 to the outside world. A volume mount connects this room to room 128 with persistent storage—your progress will survive container restarts. <em>"depends_on: [room_128]"</em> glows green.</p>

<p>An orphaned container in the corner runs a process nobody remembers deploying. It consumes 94% of available memory and responds to no commands. Everyone is afraid to stop it.</p>
  `,
  exits: [
    { label: "Gateway service to room 128", target: 128, flavor: "Port mapping established" },
    { label: "Restart all services to room 1", target: 1, flavor: "docker-compose down && up" },
    { label: "Exec into the orphan to room 174", target: 174, flavor: "It responds, somehow" },
    { label: "Check the logs to room 162", target: 162, flavor: "WARN: everything" },
  ],
  hint: "The docker-compose file is explicit: the gateway maps to room 128. The depends_on is green. Follow the service mesh to room 128, which is on the true path.",
  correct: 128,
},

164: {
  id: 164, title: "The Time Complexity Room",
  description: `
<p>The room expands as you enter. With each step, it doubles in size. This is O(2^n) growth, and you are living inside it. By your fifth step, the room is the size of a cathedral. By your seventh, you can no longer see the walls. The ceiling has become theoretical.</p>

<p>A whiteboard floats at eye level showing algorithm complexities. O(1) is highlighted in gold—<em>"constant time, constant room, room 77."</em> The bogosort entry, O(n!), has been crossed out with the annotation: <em>"We don't talk about bogosort. (Room 77 does. Go there.)"</em></p>

<p>A binary search tree grows from the floor, its nodes containing room numbers. The tree is balanced. The root node is 77. Every path through the tree arrives at 77 in O(log n) time, which is respectable and, more importantly, finite.</p>
  `,
  exits: [
    { label: "O(1) constant path to room 77", target: 77, flavor: "Instant traversal" },
    { label: "O(n) linear walk to room 1", target: 1, flavor: "One step at a time" },
    { label: "O(n!) bogosort shuffle to room 172", target: 172, flavor: "Randomly rearranging everything" },
    { label: "Binary search to room 186", target: 186, flavor: "Split the difference" },
  ],
  hint: "The whiteboard, the binary search tree, and basic algorithmic decency all point to room 77. Take the O(1) path. Life is too short for exponential time complexity.",
  correct: 77,
},

165: {
  id: 165, title: "The Incarnation of Evil",
  description: `
<p>The office of Satan—not the theological one, the <em>bureaucratic</em> one. The Incarnation of Evil, per Piers Anthony's Xanth-adjacent cosmology, is a middle manager of damnation. His desk is obsidian. His inbox is infinite. A nameplate reads: <strong>"Parry — Incarnation of Evil — Office Hours: Eternity."</strong></p>

<p>Parry looks up from a spreadsheet of sins. <em>"You're lost,"</em> he observes. <em>"Everyone who reaches my office is lost. I'm supposed to tempt you with a shortcut, but honestly, just go to room 42. It's the Answer Room. Even Evil knows when the answer is 42."</em></p>

<p>A temptation menu on the wall offers shortcuts to rooms that don't exist. The fine print: <em>"All shortcuts lead to more of my office. Except room 42. That one's legitimate. Even I can't corrupt the answer to everything."</em></p>
  `,
  exits: [
    { label: "Accept the honest advice to room 42", target: 42, flavor: "Evil is surprisingly helpful today" },
    { label: "Take a shortcut to room 165", target: 165, flavor: "The fine print was right" },
    { label: "Demand to see Evil's manager to room 182", target: 182, flavor: "Good luck with that" },
    { label: "Flee to room 1", target: 1, flavor: "Parry shrugs" },
  ],
  hint: "Even the Incarnation of Evil is telling you to go to room 42. When Satan himself says 'just go to the Answer Room,' you should probably listen. Room 42 is on the true path.",
  correct: 42,
},

166: {
  id: 166, title: "The Towel Closet",
  description: `
<p>A closet. Specifically, a closet full of towels—fluffy, terrycloth, monogrammed, beach-sized, hand-sized, one the size of a small country. A brass plaque on the door reads: <strong>"A towel is about the most massively useful thing an interstellar hitchhiker can have."</strong></p>

<p>The towels are organized by usefulness. The most useful—a slightly damp, pleasantly warm towel in the exact center—has a tag reading: <em>"Property of Ford Prefect. If found, return to Room 42. Or don't. I have six."</em></p>

<p>You take a towel. You feel calmer. More competent. More <em>hoopy</em>. A frood who knows where their towel is can handle anything, even a house that makes no architectural sense. A small note falls from the towel rack: <em>"Any hoopy frood knows the answer is always 42."</em></p>
  `,
  exits: [
    { label: "Return the towel to room 42", target: 42, flavor: "Ford won't mind" },
    { label: "Wrap up warm and go to room 1", target: 1, flavor: "The towel provides comfort" },
    { label: "Check behind the towels to room 167", target: 167, flavor: "Something is lodged back there" },
    { label: "Dry off and visit room 168", target: 168, flavor: "Improbably prepared" },
  ],
  hint: "Ford Prefect's towel tag says room 42. The note says the answer is 42. You have a towel now. You are a hoopy frood. Go to room 42, the Answer Room, which is on the true path.",
  correct: 42,
},

167: {
  id: 167, title: "The Babel Fish",
  description: `
<p>Behind the towel rack: a fishbowl containing a single, small, yellow fish. The <em>Babel Fish</em>—the oddest thing in the universe, proof that God simultaneously exists and does not exist, and the cause of more wars than anything else in history. It swims in lazy circles.</p>

<p>With the fish in your ear (the recommended configuration), you can suddenly understand the house. The walls whisper in HVAC. The pipes gossip in Plumbing. A floorboard creaks in Load-Bearing, and you understand it perfectly: <em>"Room 127 is next on the true path. The localhost always loops home."</em></p>

<p>The fish translates a message scratched on the bowl: <em>"127.0.0.1 — there's no place like it."</em> A small towel—fish-sized—sits beside the bowl. Even the Babel Fish knows to carry one.</p>
  `,
  exits: [
    { label: "Follow the localhost to room 127", target: 127, flavor: "There's no place like 127.0.0.1" },
    { label: "Return to the towel closet at room 166", target: 166, flavor: "The fish stays in your ear" },
    { label: "Swim upstream to room 42", target: 42, flavor: "The fish approves" },
    { label: "Translate the exit signs to room 1", target: 1, flavor: "They all say 'begin again'" },
  ],
  hint: "The Babel Fish translates what the house is trying to tell you: room 127 is on the true path. 127.0.0.1 is localhost. There's no place like home. The fish knows.",
  correct: 127,
},

168: {
  id: 168, title: "The Infinite Improbability Engine",
  description: `
<p>The room contains a machine that should not exist, powered by a hot cup of tea and a complete understanding of the nature of improbability. The <em>Infinite Improbability Drive</em> hums with the sound of several billion atoms being rearranged into something slightly less probable than before.</p>

<p>The improbability readout displays: <strong>42:1 against</strong>. At these odds, the most improbable thing that could happen is you ending up in exactly the right room. The Drive engages. A whale briefly materializes above you, along with a bowl of petunias that thinks: <em>"Oh no, not again."</em></p>

<p>When reality reassembles, a navigation screen shows your destination: <strong>Room 42</strong>. The improbability of arriving at the correct room by pure chance is, the computer notes, <em>"exactly the sort of thing the Drive was built for."</em> Don't Panic.</p>
  `,
  exits: [
    { label: "Engage the Drive to room 42", target: 42, flavor: "Don't Panic" },
    { label: "Recalculate to room 167", target: 167, flavor: "The fish has opinions" },
    { label: "Emergency stop to room 1", target: 1, flavor: "The tea goes cold" },
    { label: "Check improbability factor to room 166", target: 166, flavor: "You'll need a towel" },
  ],
  hint: "The Improbability Drive says room 42. The odds are 42:1. The whale and the petunias are distractions. Don't Panic. Engage the Drive. Room 42 is on the true path.",
  correct: 42,
},

// ═══════════════════════════════════════════════════════════
// TRUE PATH: ROOM 169
// ═══════════════════════════════════════════════════════════

169: {
  id: 169, title: "The Final Corridor",
  description: `
<p>A corridor exactly 13 meters long and 13 meters tall—169 is 13 squared, and the architecture knows it. The walls are polished obsidian. Your footsteps echo thirteen times each. Overhead, fiber optic cables trace constellations you've seen before: the Plumber's Elbow, the Shopping Cart, the Disappointed Accountant. They're saying goodbye.</p>

<p>The floor is tiled in small brass squares. You count them because the house has taught you to count everything. There are <strong>200</strong>. A monitor embedded in the wall displays: <code>HTTP 200 OK</code>. Below it, in green terminal font: <em>"Response code for: everything is fine. Status: success. Proceed."</em> On the opposite wall, someone has scrawled <em>"169 + 31 = 200"</em> in chalk. It's mathematically true and navigationally irrelevant. There is no room 31 exit here. The house's last red herring.</p>

<p>Through a crack in the obsidian, you glimpse something impossible—Fate's tapestry, woven from every path through every room. Thousands of threads, most ending in knots and dead ends. But one thread, the one you're holding, runs gold. It reaches its 20th room at the door ahead. The door is plain oak, unadorned, and reads simply: <strong>"200."</strong></p>
  `,
  exits: [
    { label: "The plain door marked 200", target: 200, flavor: "HTTP 200 OK" },
    { label: "Back to room 45", target: 45, flavor: "Not yet—but you're ready" },
    { label: "Examine the tapestry closer to room 182", target: 182, flavor: "Fate doesn't appreciate peeking" },
    { label: "Follow the chalk equation to room 193", target: 193, flavor: "The math is right but the path is wrong" },
  ],
  hint: "200 floor tiles. HTTP 200 OK on the screen. The door reads 200. The golden thread reaches its 20th room there. Ignore the chalk equation—169 + 31 = 200 is math, not navigation. The answer is 200.",
  correct: 200,
},

// ═══════════════════════════════════════════════════════════
// RECOVERY ROOMS 170-199
// ═══════════════════════════════════════════════════════════

170: {
  id: 170, title: "The Load Test",
  description: `
<p>Ten thousand simultaneous visitors are trying to enter this room. You are all of them. The room's response time degrades exponentially—doors take 30 seconds to open, descriptions render one word at a time, and the hint loads as a spinning wheel that has been spinning since the initial deployment.</p>

<p>A performance dashboard shows throughput collapsing: <strong>"Requests: 10,000/sec. Successes: 3. Errors: 9,997. Avg latency: 42 seconds."</strong> The only endpoint returning 200 OK is the one routing to room 1. Everything else times out.</p>

<p>A site reliability engineer—a small golem made of monitoring alerts—shouts over the noise: <em>"Shed load! Drop connections! Route to room 1! The origin server can handle room 1 in its sleep!"</em> The room begins to 503 around you.</p>
  `,
  exits: [
    { label: "Route to the healthy origin at room 1", target: 1, flavor: "Connection established" },
    { label: "Scale horizontally to room 185", target: 185, flavor: "More instances won't help" },
    { label: "Check the status page at room 191", target: 191, flavor: "All systems: degraded" },
    { label: "Blame the CDN to room 178", target: 178, flavor: "The CDN blames you back" },
  ],
  hint: "The only endpoint returning 200 OK routes to room 1. The SRE golem is right: shed load and go to the origin. Room 1 is where the true path begins.",
  correct: 1,
},

171: {
  id: 171, title: "The Canary in the Code Mine",
  description: `
<p>A mineshaft, but instead of coal, the walls are seams of legacy code. Crystallized <code>if</code> statements jut from the rock face. Fossilized <code>TODO</code> comments glow faintly, their promises of future refactoring preserved in geological time: <em>"TODO: fix this before launch (2009)"</em>.</p>

<p>A canary in a brass cage sings a single note: <strong>C-sharp</strong>. The note corresponds to room 53. A miner's journal lies open: <em>"The canary sings the room number. If it stops singing, the code is toxic. Today it sings 53—the DNS room. Port 53 resolves all names, even this one."</em></p>

<p>Deeper in the mine, you see the fossilized remains of a deployment pipeline that died in production. Its last commit message: <em>"minor fix, no need to test."</em> The canary sings louder, desperate to redirect you before you meet the same fate.</p>
  `,
  exits: [
    { label: "Follow the canary's song to room 53", target: 53, flavor: "C-sharp, resolving to 53" },
    { label: "Mine your way back to room 1", target: 1, flavor: "Through layers of legacy" },
    { label: "Read the TODO fossils to room 187", target: 187, flavor: "Promises unfulfilled" },
    { label: "Examine the dead pipeline to room 189", target: 189, flavor: "Last rites for CI/CD" },
  ],
  hint: "The canary sings C-sharp, which maps to room 53. Port 53 is DNS. The canary in the code mine is your early warning system—follow its song to room 53, which is on the true path.",
  correct: 53,
},

172: {
  id: 172, title: "Garbage In",
  description: `
<p>The room is a heap. Not a data structure heap—a literal heap. Garbage collection hasn't run in what appears to be decades. Unreferenced objects pile to the ceiling: orphaned variables, dangling pointers wrapped in newspaper, and a truly staggering number of <code>null</code> values arranged in no particular order.</p>

<p>A sign on the wall: <strong>"GARBAGE IN, GARBAGE OUT."</strong> Below it, a smaller sign: <em>"You are the garbage in. Room 1 is the garbage out."</em> This is rude but technically accurate. A garbage collector—a small automaton with a broom—sweeps methodically, muttering about reference counting and the futility of mark-and-sweep in a house this size.</p>

<p>The collector pauses. <em>"Nothing in this room is reachable from the root set except the door to room 1. Everything else is eligible for collection. Including you, if you stay."</em></p>
  `,
  exits: [
    { label: "Escape collection via room 1", target: 1, flavor: "Still referenced from root" },
    { label: "Join the heap at room 161", target: 161, flavor: "Unreachable and eligible" },
    { label: "Request manual cleanup at room 155", target: 155, flavor: "The rollback collector" },
    { label: "Defragment to room 164", target: 164, flavor: "Rearranging the garbage" },
  ],
  hint: "The garbage collector is clear: only the door to room 1 is reachable from the root set. You are garbage in. Room 1 is the garbage out. Leave before you're collected.",
  correct: 1,
},

173: {
  id: 173, title: "The Version Mismatch",
  description: `
<p>Everything in this room is slightly wrong. The door handles are on the wrong side. The light switch is upside down. A clock runs backward. The room was built with <code>house@2.3.1</code> but you're running <code>player@4.7.0</code>, and the APIs are incompatible.</p>

<p>Error messages hover in the air like gnats: <em>"TypeError: door.open is not a function." "Warning: passage.navigate() is deprecated. Use passage.traverse() instead." "FATAL: room_173 has no compatible exit for player version >= 4.0."</em></p>

<p>A compatibility matrix on the wall shows that only one exit has been backported to work with your version: room 1. A sticky note from the maintainer: <em>"I'll fix the other exits in the next release. ETA: never. Sincerely, a developer who quit in 2019."</em></p>
  `,
  exits: [
    { label: "Use the backported exit to room 1", target: 1, flavor: "Compatible at last" },
    { label: "Force compatibility to room 173", target: 173, flavor: "The mismatch persists" },
    { label: "Downgrade to room 155", target: 155, flavor: "Rolling back versions" },
    { label: "Check the changelog to room 190", target: 190, flavor: "No documentation found" },
  ],
  hint: "Only one exit is compatible with your version: room 1. The developer quit. The fix ETA is never. Accept the version mismatch and use the backported exit.",
  correct: 1,
},

174: {
  id: 174, title: "The Daemon",
  description: `
<p>The room runs in the background. You are not sure if you are in the room or the room is in you. A process monitor shows: <strong>"PID 174 — clockwork-daemon — status: running — uptime: 847 days — purpose: unknown."</strong> The daemon has been running longer than anyone can remember. Nobody knows what it does. Nobody dares stop it.</p>

<p>The daemon manifests as a quiet figure in a server-gray cloak, maintaining something essential but undefined. It speaks in log entries: <em>"[INFO] Visitor detected. Routing to 127.0.0.1. Localhost is where the heart is."</em> A heartbeat monitor on the wall pulses in sync with the daemon's process: 127 beats per minute.</p>

<p>A <code>kill -9</code> command is etched into a glass case marked <strong>"BREAK IN CASE OF EMERGENCY."</strong> You do not break it. Some processes are sacred.</p>
  `,
  exits: [
    { label: "Follow the routing to room 127", target: 127, flavor: "Localhost is where the heart is" },
    { label: "Send SIGTERM to room 1", target: 1, flavor: "Graceful shutdown" },
    { label: "Check the process tree to room 163", target: 163, flavor: "The daemon has children" },
    { label: "Inspect the logs to room 162", target: 162, flavor: "847 days of output" },
  ],
  hint: "The daemon routes to 127.0.0.1, which is localhost, which is room 127. The heartbeat runs at 127 BPM. The daemon knows where home is. Room 127 is on the true path.",
  correct: 127,
},

175: {
  id: 175, title: "The Xanth Centaur Library",
  description: `
<p>Centaurs in Xanth are scholars, and this library proves it. Bookshelves tower thirty feet high, accessible only to beings with horse bodies and human torsos. A centaur librarian stamps books with all four hooves simultaneously—a talent that took decades to master and impresses nobody.</p>

<p>The catalog system is organized by pun quality: <em>"Grade A: clever wordplay. Grade B: groan-worthy. Grade C: should be illegal."</em> You search for "Clock Tower" and find it filed under Grade B, cross-referenced with room 8. The entry reads: <em>"The Clock Tower (Room 8): where time is told by horse faces and the south clock is the only honest one. See also: architecture, improbable."</em></p>

<p>The librarian stamps your library card—a hoof-print on your palm. <em>"Room 8,"</em> she says. <em>"That's where the binary tree started. Four clock faces, one truth. You Mundanes always overcomplicate it."</em></p>
  `,
  exits: [
    { label: "Follow the catalog to room 8", target: 8, flavor: "Filed under architecture, improbable" },
    { label: "Browse Grade C puns at room 159", target: 159, flavor: "Should be illegal" },
    { label: "Return your library card to room 1", target: 1, flavor: "The hoof-print remains" },
    { label: "Ask about the cent-aur at room 160", target: 160, flavor: "She doesn't find it funny" },
  ],
  hint: "The centaur librarian directs you to room 8, the Clock Tower, which is on the true path. The catalog confirms it. Your library card is stamped. Go where the scholars point you.",
  correct: 8,
},

176: {
  id: 176, title: "The Night Mare Stable",
  description: `
<p>Night Mares carry bad dreams to sleepers, galloping through the gourd realm on hooves that strike sparks of anxiety. The stable holds a dozen of them, each mare's stall labeled with the dream she carries: <em>"Showing Up to Work Without Deploying," "The Recursive Standup Meeting," "Merge Conflict at 4:59 PM Friday."</em></p>

<p>The head Night Mare—an enormous black horse with eyes like failed unit tests—approaches your stall. Wait. <em>Your</em> stall? A placard reads: <em>"Bad Dream #7,041: Being Lost in a House That Doesn't Follow Euclidean Geometry."</em> That's your dream. You're living it.</p>

<p>A stable hand—a day horse working the night shift, an irony not lost on anyone—offers directions: <em>"Room 6, the Ballroom. The waltz will wake you from this particular nightmare. The gramophone always plays at the frequency of things being fine."</em></p>
  `,
  exits: [
    { label: "Gallop to the Ballroom at room 6", target: 6, flavor: "The waltz frequency: things being fine" },
    { label: "Ride back through the gourd to room 159", target: 159, flavor: "More puns await" },
    { label: "Wake up at room 1", target: 1, flavor: "The dream resets" },
    { label: "Trade dreams at room 165", target: 165, flavor: "Evil has better nightmares" },
  ],
  hint: "The day horse says room 6, the Ballroom, will wake you from this nightmare. Room 6 is on the true path. The gramophone whispers 'forty-five,' which is the next step. Follow the waltz.",
  correct: 6,
},

177: {
  id: 177, title: "The Rate Limiter",
  description: `
<p>You can only take one step per minute. The room enforces this with the pedantry of a firewall rule written by someone who has been burned before. A countdown clock on the wall reads: <strong>"RATE LIMIT: 1 request/60s. Remaining: 0. Retry after: 59 seconds."</strong> You wait. The seconds pass like semesters.</p>

<p>The walls display your request history: 429 Too Many Requests, 429, 429, 429. A single 200 OK glows green—the request that routed to room 42. The rate limiter annotations: <em>"The Answer Room accepts all requests. It's the only endpoint with infinite rate allowance. Because the answer to everything should be accessible to everyone."</em></p>

<p>The countdown reaches zero. A new request is authorized. The room offers one action, take it or wait another minute.</p>
  `,
  exits: [
    { label: "200 OK: proceed to room 42", target: 42, flavor: "Request authorized" },
    { label: "429 retry to room 177", target: 177, flavor: "Too many requests" },
    { label: "Escalate to room 185", target: 185, flavor: "SRE will adjust the limits" },
    { label: "Bypass the limiter to room 1", target: 1, flavor: "Hard reset" },
  ],
  hint: "The rate limiter allows exactly one successful request: room 42, the Answer Room, the only endpoint with infinite rate allowance. Take the 200 OK path.",
  correct: 42,
},

178: {
  id: 178, title: "The Blue/Green Deploy",
  description: `
<p>The room is split exactly in half. The left side is blue—old version, stable, familiar. The right side is green—new version, untested, suspiciously optimistic. A load balancer in the center slowly shifts traffic from blue to green, one percentage point at a time. It's currently at 87% green.</p>

<p>Blue side: room numbers you've seen before, paths you've walked, mistakes you've made. It's comfortable. Green side: room 128, glowing with the promise of a successful deployment. The green deployment notes read: <em>"Room 128 — The Fibonacci Staircase — true path verified. Health checks: passing. Rollback plan: room 1."</em></p>

<p>A deployment engineer watches both sides through a split-screen monitor. <em>"Green is healthy. 128 is returning 200s. Cut over."</em> She flips the switch. The blue side dims. The green side is now production.</p>
  `,
  exits: [
    { label: "Green deployment to room 128", target: 128, flavor: "Traffic shifted: 100% green" },
    { label: "Rollback to blue at room 1", target: 1, flavor: "The safe choice, as always" },
    { label: "A/B test to room 183", target: 183, flavor: "Split the traffic" },
    { label: "Canary release to room 171", target: 171, flavor: "1% of traffic goes first" },
  ],
  hint: "Green is healthy. Room 128, the Fibonacci Staircase, is passing all health checks and is on the true path. The deployment engineer says cut over. Trust the green deploy.",
  correct: 128,
},

179: {
  id: 179, title: "The Twelve-Factor Room",
  description: `
<p>Twelve commandments are carved into twelve stone tablets arranged in a semicircle. They describe how to build a proper application—or, apparently, how to navigate a clockwork house. Factor I: <em>"One codebase, one path."</em> Factor III: <em>"Store config in the environment."</em> Factor XII: <em>"Treat the true path as an admin process."</em></p>

<p>You have violated at least nine of the twelve factors by being in this room. A compliance auditor—a brass automaton with a checklist longer than its arm—marks each violation with a red stamp. <em>"Factor II: Explicitly declare dependencies. You depend on room 1. You are not in room 1. Non-compliant."</em></p>

<p>The auditor stamps your forehead. <strong>"NON-COMPLIANT. REMEDIATION: RETURN TO ROOM 1. BECOME TWELVE-FACTOR COMPLIANT."</strong> The stamps are indelible. The auditor is relentless. Factor VI states: <em>"Execute the app as one or more stateless processes."</em> You are the process. Room 1 is stateless.</p>
  `,
  exits: [
    { label: "Become compliant at room 1", target: 1, flavor: "Factor I: one codebase, one path" },
    { label: "Appeal Factor XII at room 162", target: 162, flavor: "The audit continues" },
    { label: "Declare dependencies at room 163", target: 163, flavor: "docker-compose as penance" },
    { label: "Check Factor VII at room 192", target: 192, flavor: "Port binding won't help" },
  ],
  hint: "The twelve-factor auditor is clear: you're non-compliant. Room 1 is the remediation. Return there to satisfy Factor I (one codebase, one path) and begin the true path.",
  correct: 1,
},

180: {
  id: 180, title: "The Eventual Consistency Room",
  description: `
<p>The room can't decide what it is. One moment it's a library. Then it's a kitchen. Then briefly, confusingly, a municipal swimming pool. Eventual consistency means all replicas will <em>eventually</em> agree, but right now the replicas are having a vigorous disagreement about fundamental reality.</p>

<p>A distributed systems textbook lies open to the page on the CAP theorem. Someone has underlined: <em>"You can have two of three: Consistency, Availability, Partition tolerance."</em> This room chose Availability and Partition tolerance, which means it's always open and always reachable but absolutely never consistent.</p>

<p>Eventually—after several more identity crises—the room settles into a shape: the Cartographer's Office. Room 20. The maps are slightly wrong and the stuffed door is facing the wrong way, but it's <em>eventually</em> correct. <em>"Convergence achieved,"</em> announces a monotone voice. <em>"Consistency window: 47 seconds."</em></p>
  `,
  exits: [
    { label: "Accept eventual convergence to room 20", target: 20, flavor: "Close enough to consistent" },
    { label: "Demand strong consistency at room 181", target: 181, flavor: "The CAP theorem disagrees" },
    { label: "Partition yourself to room 1", target: 1, flavor: "Network split detected" },
    { label: "Sacrifice availability to room 191", target: 191, flavor: "503 Service Unavailable" },
  ],
  hint: "The room eventually converges to room 20, the Cartographer's Office, which is on the true path. Accept eventual consistency. The maps will be close enough. Room 20 leads to 42.",
  correct: 20,
},

181: {
  id: 181, title: "The CAP Theorem",
  description: `
<p>Three enormous pillars hold up the ceiling—labeled <strong>C</strong> (Consistency), <strong>A</strong> (Availability), and <strong>P</strong> (Partition Tolerance). A sign warns: <em>"YOU MAY LEAN ON AT MOST TWO."</em> The third pillar you ignore will crumble, and the ceiling will sag in that direction, which is architecturally terrifying but distributed-systems-ly accurate.</p>

<p>Room 91—the DNS room, port 53's upstream resolver—is accessible only through the AP path (Available and Partition Tolerant, eventually consistent). A network diagram on the floor shows: <em>"Room 91 → port 53 resolution → true path. Choose AP. Accept that the room number might be slightly wrong for a few milliseconds. It's 91. Probably. Eventually. Yes, 91."</em></p>

<p>The Consistency pillar bears a sticky note: <em>"If you need strong consistency, try a relational database. Or room 1. Same energy."</em></p>
  `,
  exits: [
    { label: "AP path to room 91", target: 91, flavor: "Eventually consistent, always available" },
    { label: "CP path to room 1", target: 1, flavor: "Consistent but unavailable for a bit" },
    { label: "CA path to room 180", target: 180, flavor: "No partition tolerance—good luck" },
    { label: "Ignore the theorem to room 179", target: 179, flavor: "The auditor has opinions" },
  ],
  hint: "The network diagram shows room 91 through the AP path. Room 91 is on the true path. Choose Availability and Partition Tolerance. Accept eventual consistency. The room number is 91. Probably. Definitely.",
  correct: 91,
},

182: {
  id: 182, title: "The Incarnation of Good",
  description: `
<p>Where Evil's office was obsidian and spreadsheets, Good's office is warm oak and stained glass. The Incarnation of Good—per the cosmology—sits in a high-backed chair, radiating benevolence and a faint smell of fresh bread. A nameplate: <strong>"Orlene — Acting Incarnation of Good — Appointments: Unnecessary."</strong></p>

<p>Orlene smiles. <em>"You've come far. Nineteen rooms on the true path, one remaining. The Final Corridor—room 169—is through the stained glass. 13 squared. 200 tiles. HTTP 200. You know this already. You've always known."</em></p>

<p>The stained glass depicts the entire true path: a hex clock, a binary tree, an HTML horse, thirty-three fingers on a piano, a stuffed door, the answer 42, Spinal Tap's eleven, the Plumber's Elbow, a ballroom waltz, a Fibonacci stair, DNS port 53, the 12th Fibonacci number, bogosort, and a golden thread ending at a garden. <em>"The thread is yours,"</em> Orlene says. <em>"Walk it home."</em></p>
  `,
  exits: [
    { label: "Through the stained glass to room 169", target: 169, flavor: "The golden thread pulls taut" },
    { label: "Thank Good and return to room 1", target: 1, flavor: "Orlene waves gently" },
    { label: "Visit Evil for a second opinion at room 165", target: 165, flavor: "Evil says the same thing" },
    { label: "Ask about Fate's tapestry at room 197", target: 197, flavor: "It's the same thread" },
  ],
  hint: "The Incarnation of Good confirms it: room 169, the Final Corridor, is through the stained glass. You're one room away from the end. The stained glass shows the entire true path. Walk it home.",
  correct: 169,
},

183: {
  id: 183, title: "The Smoke Test",
  description: `
<p>The room is filled with smoke. Not dangerous smoke—<em>diagnostic</em> smoke. In the early days of electronics, engineers would power up a new circuit and watch for smoke. If nothing smoked, it probably worked. This room is testing whether <em>you</em> work.</p>

<p>A test harness wraps around the room's perimeter: green lights for assertions that pass, red for failures. <strong>"assert(player.hasVisitedTruePath) — PARTIAL. assert(player.knowsNextRoom) — TESTING..."</strong> The harness evaluates. A green light flickers on: <em>"Room 144 — the Bogosort Chamber — detected in player's navigation graph. Smoke test: PASS."</em></p>

<p>A QA engineer emerges from the smoke, clipboard in hand. <em>"You pass. Room 144 is your next waypoint. It's on the true path—the 12th Fibonacci number, if you're counting, and you should always be counting."</em> She stamps your forehead. It says <strong>"QA APPROVED."</strong></p>
  `,
  exits: [
    { label: "QA-approved path to room 144", target: 144, flavor: "All assertions passing" },
    { label: "Run regression tests at room 196", target: 196, flavor: "More tests, more smoke" },
    { label: "Fail gracefully to room 1", target: 1, flavor: "assert(false) — back to start" },
    { label: "Skip tests to room 194", target: 194, flavor: "--no-verify, the coward's flag" },
  ],
  hint: "The smoke test passes. The QA engineer approves. Room 144, the Bogosort Chamber, is on the true path—it's the 12th Fibonacci number (144). Follow the green lights.",
  correct: 144,
},

184: {
  id: 184, title: "The Rubber Band Architecture",
  description: `
<p>The room stretches. Literally—the walls are made of some elastic material that expands when you push and contracts when you pull. The architecture is rubber band architecture: it scales, but only under tension, and it snaps back unpredictably when you let go.</p>

<p>A load diagram shows the room's current elasticity: <em>"Stretch factor: 77%. Optimal target: Room 77. The Bogosort Chamber's predecessor. If you can reach 77, you can reach 144."</em> The rubber bands hum at a frequency of 77 Hz, because subtlety died somewhere around room 50.</p>

<p>A stress test runs in real time. The rubber walls are at maximum extension. An engineer's note: <em>"Do NOT exceed 100% stretch. The room will either reach room 77 or snap back to room 1. Both are acceptable outcomes. One is better."</em></p>
  `,
  exits: [
    { label: "Stretch to room 77", target: 77, flavor: "77% elasticity, perfectly tuned" },
    { label: "Snap back to room 1", target: 1, flavor: "Elastic recoil" },
    { label: "Test at 100% to room 164", target: 164, flavor: "The rubber screams" },
    { label: "Release tension to room 180", target: 180, flavor: "The walls wobble inconsistently" },
  ],
  hint: "The stretch factor is 77%. The frequency is 77 Hz. Room 77 is the target and it's on the true path. Stretch there before the rubber snaps you back to room 1.",
  correct: 77,
},

185: {
  id: 185, title: "SRE On-Call",
  description: `
<p>Your pager goes off at 3:47 AM. You are not an SRE. You do not have a pager. And yet, here you are, in a room that is entirely a PagerDuty incident. The alert reads: <strong>"SEV-1: Player lost in Clockwork House. Impact: total. Customers affected: 1 (you)."</strong></p>

<p>A runbook pulls up automatically on a screen embedded in the wall. Step 1: <em>"Verify the player is alive."</em> You are. Step 2: <em>"Route to nearest true path room."</em> The runbook calculates: <strong>"Nearest true path node: Room 128 — The Fibonacci Staircase. ETA: 1 exit."</strong> Step 3: <em>"Resolve incident. Go back to sleep."</em></p>

<p>The on-call rotation schedule shows that you've been on-call for this house since you entered. There is no rotation. There is only you. The escalation policy escalates to you. The backup escalates to also you.</p>
  `,
  exits: [
    { label: "Follow the runbook to room 128", target: 128, flavor: "Step 2: route to true path" },
    { label: "Escalate to yourself at room 162", target: 162, flavor: "The postmortem is yours too" },
    { label: "Acknowledge and return to room 1", target: 1, flavor: "Incident acknowledged" },
    { label: "Snooze the alert to room 192", target: 192, flavor: "It will page again in 5 minutes" },
  ],
  hint: "The runbook says room 128, the Fibonacci Staircase, is the nearest true path node. Follow the runbook. It's 3:47 AM and you're on-call. Just follow the runbook.",
  correct: 128,
},

186: {
  id: 186, title: "The Technical Interview",
  description: `
<p>A whiteboard. A marker. A panel of three interviewers—brass automatons in business casual. The lead interviewer speaks: <em>"Please reverse a linked list on the whiteboard."</em> The whiteboard already has a linked list drawn on it. The nodes are room numbers: <strong>1 → 4 → 8 → 16 → 33 → 20 → 42 → 64</strong>.</p>

<p>You reverse it and write: <strong>64 → 42 → 20 → 33 → 16 → 8 → 4 → 1</strong>. The interviewer frowns. <em>"Now traverse it forward to node 64. That's the 64-bit memory palace. It's on the true path. We were testing whether you could find it, not whether you could reverse it."</em></p>

<p>A second interviewer adds: <em>"Follow-up: what's the time complexity of finding the right room?" "O(1),"</em> you answer, <em>"because you just told me."</em> They mark <strong>HIRE</strong> on your scorecard. The exit to room 64 unlocks.</p>
  `,
  exits: [
    { label: "Accept the offer to room 64", target: 64, flavor: "HIRE — strong yes" },
    { label: "Negotiate salary at room 1", target: 1, flavor: "Counter-offer: start over" },
    { label: "Ask about work-life balance at room 185", target: 185, flavor: "The on-call schedule is concerning" },
    { label: "Decline and freelance at room 194", target: 194, flavor: "Hot fix consulting" },
  ],
  hint: "The interviewers told you: room 64, the 64-bit memory palace, is on the true path. The linked list had it. The traversal found it. O(1) — because they just told you.",
  correct: 64,
},

187: {
  id: 187, title: "The Legacy Migration",
  description: `
<p>The room is half-renovated. The left side runs COBOL on punch cards. The right side runs microservices on Kubernetes. In the middle, a data migration pipeline pumps records from one world to the other, losing approximately 3% of its data per transfer and gaining 12% new data that nobody can explain.</p>

<p>A project manager's Gantt chart covers an entire wall. The migration was scheduled for 6 months. It has been running for 11 years. The current phase is labeled: <em>"Phase 2b (revised) (final) (FINAL final) (ok actually final): Route player to Room 1."</em></p>

<p>A legacy developer—the last person who understands the COBOL side—sits in the corner eating lunch. She has been eating the same lunch for 11 years because the migration froze her lunch schedule too. <em>"Room 1,"</em> she says between bites. <em>"Everything migrates to room 1 eventually."</em></p>
  `,
  exits: [
    { label: "Complete the migration to room 1", target: 1, flavor: "Phase 2b (FINAL final) complete" },
    { label: "Roll back the migration to room 155", target: 155, flavor: "Back to COBOL" },
    { label: "Consult the Gantt chart at room 164", target: 164, flavor: "11 years of revisions" },
    { label: "Ask the legacy dev at room 171", target: 171, flavor: "She knows things" },
  ],
  hint: "The migration has been running for 11 years and the conclusion is always the same: room 1. The legacy developer confirms it. The Gantt chart confirms it. Migrate to room 1.",
  correct: 1,
},

188: {
  id: 188, title: "The Pair of Docs",
  description: `
<p>Two doctors—a <em>pair of docs</em>, if you will, and the house absolutely will—stand at podiums in a debate hall. Dr. A holds a stethoscope. Dr. B holds an API reference. They are a pair of docs. They are also a <em>paradox</em>. The pun has achieved structural integrity and now supports load-bearing walls.</p>

<p>Dr. A diagnoses the house: <em>"The patient presents with non-Euclidean geometry, recursive architecture, and an unhealthy number of rooms. Prognosis: Room 53. DNS resolution will clear the symptoms."</em> Dr. B consults the API reference: <em>"GET /rooms/53 returns 200 OK. Port 53 resolves all names. The documentation is clear, even if the pun isn't."</em></p>

<p>A third doctor enters. <em>"I'm the Doc string,"</em> she says. <em>"I describe the function but nobody reads me."</em> The pair of docs prescribe room 53 in triplicate. The pun apologizes for itself. It does not mean it.</p>
  `,
  exits: [
    { label: "Fill the prescription at room 53", target: 53, flavor: "DNS: the best medicine" },
    { label: "Get a second opinion at room 156", target: 156, flavor: "The ducks are not medical doctors" },
    { label: "Check the API docs at room 190", target: 190, flavor: "Nobody reads these either" },
    { label: "Discharge yourself to room 1", target: 1, flavor: "Against medical advice" },
  ],
  hint: "The pair of docs—both the medical one and the API reference one—prescribe room 53. Port 53 is DNS. Room 53 is on the true path. Take the prescription. Ignore the pun.",
  correct: 53,
},

189: {
  id: 189, title: "The Continuous Integration Pipeline",
  description: `
<p>The room is a pipeline—literally. Tubes and conveyor belts carry code from one stage to the next: <strong>BUILD → TEST → LINT → DEPLOY</strong>. Your progress through the house is being treated as a commit, and it must pass all checks before merging to the true path.</p>

<p>BUILD: <em>pass</em>. You exist. TEST: <em>fail — "player.location !== truePath[expected]"</em>. The test is correct. You're not on the true path. LINT: <em>warning — "unused rooms visited: 14"</em>. DEPLOY: <em>blocked — "cannot deploy until tests pass."</em></p>

<p>A CI bot comments on your commit: <em>"This PR cannot be merged. Please fix failing tests and resubmit. Suggestion: return to room 1, the base branch, and follow the true path from the beginning."</em> The bot has no empathy. The bot has only rules. The bot is correct.</p>
  `,
  exits: [
    { label: "Fix tests by returning to room 1", target: 1, flavor: "Resubmitting from base branch" },
    { label: "Force merge to room 154", target: 154, flavor: "The PR reviewer objects" },
    { label: "Skip CI to room 194", target: 194, flavor: "--no-verify, again" },
    { label: "Read the lint warnings at room 190", target: 190, flavor: "14 unused rooms, really" },
  ],
  hint: "The CI pipeline is honest: your tests fail because you're not on the true path. Room 1 is the base branch. Return there, follow the true path, and your tests will pass.",
  correct: 1,
},

190: {
  id: 190, title: "The Documentation Room",
  description: `
<p>The room is empty except for a single README.md projected on the wall. It was last updated 847 days ago. It reads: <em>"# Clockwork House \n\n## Getting Started \n\nRun \`npm install\` and then enter room 1. \n\n## Usage \n\nFollow the clues. \n\n## Contributing \n\nDon't."</em></p>

<p>That's it. That's the entire documentation. A "Docs Wanted" label floats in the corner, aging gracefully into irrelevance. A search box on the wall returns: <em>"No results found for 'how to escape.' Did you mean: 'room 1'?"</em></p>

<p>A technical writer's ghost haunts the room. She died waiting for the engineering team to review her documentation PR. Her ghost writes excellent docs that nobody will ever read. She whispers: <em>"Room 1. It's in the README. It's always been in the README."</em></p>
  `,
  exits: [
    { label: "Follow the README to room 1", target: 1, flavor: "npm install && enter room 1" },
    { label: "Search for better docs at room 188", target: 188, flavor: "The pair of docs might help" },
    { label: "File a docs issue at room 154", target: 154, flavor: "PR: add escape instructions" },
    { label: "Read the source code at room 192", target: 192, flavor: "The code is the documentation now" },
  ],
  hint: "The README is sparse but correct: enter room 1. The technical writer's ghost confirms it. The search results confirm it. Room 1 is where the true path begins. RTFM.",
  correct: 1,
},

191: {
  id: 191, title: "The Status Page",
  description: `
<p>A public-facing status page displays the health of every room in the house. Most show green: <strong>"OPERATIONAL."</strong> Room 151-153 show yellow: <strong>"DEGRADED — Stack Overflow loop detected."</strong> This room shows red: <strong>"MAJOR OUTAGE — you are here instead of on the true path."</strong></p>

<p>An incident history scrolls past. Every incident has the same resolution: <em>"Player returned to room 1. Service restored."</em> The MTTR (Mean Time To Room 1) is displayed prominently: <strong>"Average: 4.7 rooms. Your current: 7+ rooms."</strong> You are below average. The status page does not sugarcoat this.</p>

<p>A subscribe button offers updates: <em>"Get notified when the player stops being lost."</em> Zero subscribers. The status page has trust issues, having been green during three separate catastrophic failures. <em>"All systems operational,"</em> it claims, while you stand in a red-status room. Classic.</p>
  `,
  exits: [
    { label: "Resolve the incident at room 1", target: 1, flavor: "Service restored" },
    { label: "Check component status at room 170", target: 170, flavor: "The load test is still running" },
    { label: "View incident history at room 162", target: 162, flavor: "Same resolution every time" },
    { label: "Subscribe to updates at room 192", target: 192, flavor: "Zero other subscribers" },
  ],
  hint: "The status page is red because you're here. Every incident resolves the same way: return to room 1. Your MTTR is above average. Go to room 1 and bring the average down.",
  correct: 1,
},

192: {
  id: 192, title: "The Runbook",
  description: `
<p>A laminated binder sits on a steel desk. The cover: <strong>"RUNBOOK: What To Do When A Player Is Lost In The Clockwork House (rev. 47)."</strong> It has been revised 47 times. Each revision adds one line: <em>"Return the player to room 1."</em> The first 46 revisions say the same thing. Revision 47 adds: <em>"Seriously."</em></p>

<p>The runbook's troubleshooting flowchart is a single node: <em>"Is the player in room 1? If no: send to room 1. If yes: follow the true path."</em> There are no other nodes. The flowchart was designed by someone who understood both the problem and the solution and saw no reason to complicate either.</p>

<p>A post-it on the binder: <em>"If you're reading this runbook, you're already in the wrong room. The runbook is not on the true path. Room 1 is. Go."</em></p>
  `,
  exits: [
    { label: "Execute the runbook to room 1", target: 1, flavor: "Step 1 of 1" },
    { label: "Question the runbook at room 162", target: 162, flavor: "The postmortem agrees with it" },
    { label: "Write a better runbook at room 190", target: 190, flavor: "The documentation room awaits" },
    { label: "Ignore the runbook to room 191", target: 191, flavor: "Status: still lost" },
  ],
  hint: "The runbook has been revised 47 times. All 47 revisions say the same thing: room 1. The flowchart has one node. The post-it is clear. Execute the runbook.",
  correct: 1,
},

193: {
  id: 193, title: "The War Room (Reprise)",
  description: `
<p>The war room has been reactivated. Screens line every wall showing the state of the house in real time. Red dots mark where you've been. Green dots mark the true path. A single gold dot pulses at room 169—the Final Corridor—one room from the end.</p>

<p>A general—brass, decorated, slightly oxidized—briefs you on the situation: <em>"Room 169. 13 squared. 200 tiles. HTTP 200 OK. The door reads 200. Everything converges there. All intelligence confirms: the Final Corridor is your next objective."</em></p>

<p>The tactical map zooms in. Room 169 is highlighted with approach vectors from this room. The general taps the map: <em>"Direct route. No ambiguity. No red herrings—well, one red herring. Someone wrote '169 + 31 = 200' on the wall. Ignore it. The math is right but the navigation is wrong. Door says 200. Go."</em></p>
  `,
  exits: [
    { label: "Advance to room 169", target: 169, flavor: "Objective in sight" },
    { label: "Request reinforcements at room 156", target: 156, flavor: "The ducks are not military" },
    { label: "Retreat to room 1", target: 1, flavor: "Strategic withdrawal" },
    { label: "Review intelligence at room 182", target: 182, flavor: "Good confirms the intel" },
  ],
  hint: "The general's briefing is clear: room 169, the Final Corridor, is the objective. All intelligence confirms it. Ignore the chalk equation. The door reads 200. Advance.",
  correct: 169,
},

194: {
  id: 194, title: "The Hot Fix",
  description: `
<p>The room is on fire. Not metaphorically—someone deployed a hot fix directly to production and the fix is, itself, hot. Flames lick the walls but don't burn them, because the fire is a CSS animation that someone forgot to scope to the correct div and it has leaked into physical reality.</p>

<p>A developer sits amid the flames, calmly typing. <em>"I'm fixing it,"</em> she says. <em>"I've been fixing it for three days. The fix introduces two new bugs for every one it solves. I am Sisyphus and the boulder is a JIRA ticket."</em> Her fix targets room 45—the Threshold—which is on the true path.</p>

<p>A deployment log scrolls: <em>"hotfix-451 → room 45. hotfix-452 → room 194 (this room, recursively). hotfix-453 → room 194 (still this room)."</em> The self-referential hot fix loop threatens to consume all available room. Deploy to 45 before it does.</p>
  `,
  exits: [
    { label: "Deploy the fix to room 45", target: 45, flavor: "hotfix-451: the one that works" },
    { label: "Hot fix the hot fix at room 194", target: 194, flavor: "hotfix-452: recursive" },
    { label: "Revert everything to room 1", target: 1, flavor: "git revert --all" },
    { label: "File a JIRA ticket at room 189", target: 189, flavor: "The boulder rolls on" },
  ],
  hint: "The developer's fix targets room 45, the Threshold, which is on the true path. Deploy hotfix-451 before the recursive loop consumes reality. Room 45 leads to the final stretch.",
  correct: 45,
},

195: {
  id: 195, title: "The Soft Delete",
  description: `
<p>Nothing in this room is truly gone. Every object has a <code>deleted_at</code> timestamp and a faint transparency, like a ghost that filed the proper paperwork. A chair you can almost sit in. A table that's 60% there. A clock that ticks in italics.</p>

<p>A database administrator—soft-deleted herself, flickering at 40% opacity—explains: <em>"Soft deletes preserve data for recovery. You've been soft-deleted from the true path. Your <code>on_true_path</code> flag is set to false. But the record persists. You can be restored."</em></p>

<p>A RESTORE button on the wall glows. Below it: <em>"UPDATE player SET on_true_path = true, current_room = 1 WHERE deleted_at IS NOT NULL."</em> The SQL is valid. The DBA hovers her transparent finger over the execute button. <em>"Say the word and I'll restore you. Room 1. Fresh start. No data loss."</em></p>
  `,
  exits: [
    { label: "RESTORE to room 1", target: 1, flavor: "Record restored, flag set to true" },
    { label: "Remain soft-deleted at room 195", target: 195, flavor: "deleted_at: still now" },
    { label: "Hard delete to room 172", target: 172, flavor: "Garbage collection awaits" },
    { label: "Check the audit log at room 162", target: 162, flavor: "Every deletion is logged" },
  ],
  hint: "The DBA can restore you. The SQL is valid. Room 1 is where your on_true_path flag gets set back to true. Let the RESTORE run. No data loss. Clean recovery.",
  correct: 1,
},

196: {
  id: 196, title: "The End-to-End Test",
  description: `
<p>The room simulates the entire house in miniature. A model Clockwork House sits on a table, rooms the size of matchboxes, tiny brass gears turning. An end-to-end test runner moves a small figurine—unmistakably you—through the model, testing each path.</p>

<p>The test report prints in real time: <em>"Test 1: true path (1→4→8→16→33→20→42→11→37→6→45→50) — this test is outdated, path has been extended. Test 2: extended true path (1→4→8→16→33→20→42→127→64→11→37→91→6→128→53→144→77→45→169→200) — PASS."</em></p>

<p>The figurine completes the extended path and arrives at a tiny garden with a tiny fountain. A test assertion: <em>"expect(player.room).toBe(1) — the test starts at room 1. All E2E tests start at room 1."</em> The test runner resets the figurine to the entrance.</p>
  `,
  exits: [
    { label: "Reset to room 1 like the figurine", target: 1, flavor: "The E2E test starts here" },
    { label: "Examine test 2 at room 183", target: 183, flavor: "Smoke test the smoke test" },
    { label: "Skip the tests at room 194", target: 194, flavor: "--no-verify strikes again" },
    { label: "Report a flaky test at room 191", target: 191, flavor: "Status: intermittent" },
  ],
  hint: "The E2E test shows the entire extended true path. It starts at room 1. All tests start at room 1. Reset like the figurine and follow the path the test just proved works.",
  correct: 1,
},

197: {
  id: 197, title: "The Graduation",
  description: `
<p>Mortarboards hang from hooks. Diplomas line the walls—each one awarded to a player who found the true path. Most are dusty. A podium stands at the front, behind it a banner: <strong>"CONGRATULATIONS, CLASS OF WHENEVER YOU GET HERE."</strong></p>

<p>A dean of the house—a clockwork figure in academic regalia—reads from a scroll: <em>"You are hereby recognized for completing the prerequisites: curiosity, persistence, and the ability to count. Your final exam awaits in Room 169—the Final Corridor. Pass it, and you graduate to Room 200."</em></p>

<p>A yearbook sits open on a desk. Your photo is already in it, labeled: <em>"Most Likely to Eventually Find the Right Room."</em> The superlative is backhanded. The diploma is real. A tassel swings from the exit door, pointing to room 169.</p>
  `,
  exits: [
    { label: "Proceed to the final exam at room 169", target: 169, flavor: "The tassel turns" },
    { label: "Review the prerequisites at room 1", target: 1, flavor: "Back to freshman year" },
    { label: "Check the yearbook at room 182", target: 182, flavor: "Good gave you a nice quote" },
    { label: "Skip graduation at room 199", target: 199, flavor: "Penultimate regret" },
  ],
  hint: "The dean is sending you to your final exam: room 169, the Final Corridor. Pass it and you graduate to room 200. The tassel points the way. Walk the stage.",
  correct: 169,
},

198: {
  id: 198, title: "The Last Towel",
  description: `
<p>A single towel hangs on a brass hook in an otherwise empty room. It is the last towel in the house—all others have been claimed, lost, or evolved into sentient beings and left. This towel is clean, dry, and embroidered with the number <strong>42</strong> and, below it, in smaller thread: <strong>169</strong>.</p>

<p>A holographic Ford Prefect leans against the wall, arms crossed. <em>"You know what a hoopy frood would do? A hoopy frood would take that towel and walk through that door to room 169. The Final Corridor. Thirteen squared. Two hundred tiles. The last stretch before the garden."</em></p>

<p>He adjusts his holographic bathrobe. <em>"I've hitchhiked across the galaxy and I can tell you: every journey ends in a garden if you're lucky. Room 169 is your thumbing point. Stick out your thumb. Don't panic. And for Zaphod's sake, bring the towel."</em></p>
  `,
  exits: [
    { label: "Bring the towel to room 169", target: 169, flavor: "Don't Panic" },
    { label: "Return the towel to room 166", target: 166, flavor: "The closet has space" },
    { label: "Ask Ford about 42 at room 42", target: 42, flavor: "He's heard this one" },
    { label: "Panic and flee to room 1", target: 1, flavor: "Ford is disappointed in you" },
  ],
  hint: "Ford Prefect is clear: room 169, the Final Corridor, is your destination. Take the towel. Don't panic. The garden is one corridor away. Be a hoopy frood.",
  correct: 169,
},

199: {
  id: 199, title: "The Penultimate Room",
  description: `
<p>Room 199. The room before the room before the end. The penultimate of the penultimate. It knows what it is and it is not happy about it. A sign on the wall: <strong>"YOU ARE IN THE SECOND-TO-LAST ROOM. THIS IS NOT THE LAST ROOM. THE LAST ROOM IS 200. THE ROOM BEFORE THAT IS 169. GO TO 169."</strong></p>

<p>The room has decorated itself in silver, because silver is the second-place medal, and this room will always be second to last. A trophy case holds a single trophy: <em>"Runner-Up: Room That Is Almost But Not Quite The Final Room. Awarded annually since the house was built."</em></p>

<p>An existential crisis hangs in the air like humidity. The room whispers: <em>"Room 200 gets the garden. Room 169 gets to be the corridor. I get to be the room people pass through without noticing. My number doesn't even have mathematical significance. 199 is just... 199."</em> A door is labeled simply: <strong>"169 — where the actual story happens."</strong></p>
  `,
  exits: [
    { label: "The actual story at room 169", target: 169, flavor: "199 sighs behind you" },
    { label: "Console the room at room 199", target: 199, flavor: "It appreciates the gesture" },
    { label: "Visit the actual last room at room 198", target: 198, flavor: "The towel room, at least, has purpose" },
    { label: "Go all the way back to room 1", target: 1, flavor: "199 rooms from the end" },
  ],
  hint: "The room itself tells you: go to room 169, the Final Corridor. Room 199 knows its place in the hierarchy, and its place is to point you to 169. Don't linger. The room's existential crisis is not your problem.",
  correct: 169,
},

// ═══════════════════════════════════════════════════════════
// TRUE PATH: ROOM 200 — VICTORY
// ═══════════════════════════════════════════════════════════

200: {
  id: 200, title: "The Garden",
  victory: true,
  description: `
<p>Light. Real light—not the hex-clock glow of the Entrance Hall, not the binary flicker of the Clock Tower, not the fluorescent hum of a motivational dolphin poster. <em>Sunlight.</em> It falls through the canopy of an apple tree and dapples the grass with gold. You stand in a walled garden. Roses climb ancient stone. A fountain murmurs something that might be water and might be relief. The air smells of earth, of green things growing, of a world that follows Euclidean geometry and doesn't ask you to count anything.</p>

<p>On a bench beneath the apple tree: a brass key, a glass of something cold with condensation running down its side, and a note. You sit. The bench is warm. Nothing is trying to trick you.</p>

<p><em>"You found the way through two hundred rooms. The true path: 1, 4, 8, 16, 33, 20, 42, 127, 64, 11, 37, 91, 6, 128, 53, 144, 77, 45, 169, and here. Twenty rooms out of two hundred.</em></p>

<p><em>Along the way you may have encountered: a hex clock that told the truth at four o'clock, a binary tree with a horse face that you were told to ignore, an HTML horse whose attributes nobody should have checked, a composition for 33 fingers that served as a package.json for the Music Room, a localhost loopback at 127.0.0.1 where there's no place like home, a 64-bit memory palace where every address was a room, Spinal Tap's eleven in an observatory that goes to eleven, a DNS resolver on port 53 where all names find their way, the 12th Fibonacci number stacking stairs to 128, the bogosort that shuffles until the universe cooperates, an HTTP 200 OK confirming that everything is finally fine, a motivational dolphin who believed in you when the fluorescent light did not, the Incarnations of Good and Evil who both agreed on room 42, a false path that taught you what the true one wasn't, a typewriter that had opinions and wasn't afraid to type them, a node_modules directory heavier than the house itself, and a rubber duck council whose silence was the best debugging tool you ever had.</em></p>

<p><em>The house will miss you. It doesn't get many visitors who find all twenty doors. Most get lost around room 33 and end up arguing with the typewriter until the heat death of the universe.</em></p>

<p><em>Keep the key. Keep the towel. You're a hoopy frood who really knows where their towel is."</em></p>

<p>Behind you, the plain oak door of the Final Corridor closes softly. A single leaf falls from the apple tree into your glass. The fountain adjusts its murmur to something that sounds, improbably, like <em>"so long, and thanks for all the rooms."</em></p>

<p><strong>You have escaped the Clockwork House.</strong></p>
  `,
  exits: [
    { label: "Enter the house again", target: 1, flavor: "The key turns. The house sighs. The hex clock resets to four." },
  ],
  hint: "You made it. Two hundred rooms. Twenty doors. One stuffed door. One motivational dolphin. One rubber duck council. One towel. Enjoy your drink. Mind the leaf. Don't panic.",
  correct: null,
},

};

// ============================================================
// GAME STATE
// ============================================================
const TRUE_PATH = [1, 4, 8, 16, 33, 20, 42, 127, 64, 11, 37, 91, 6, 128, 53, 144, 77, 45, 169, 200];

let state = {
  currentRoom: 1,
  path: [1],
  visited: new Set([1]),
  steps: 0,
  won: false,
};

// ============================================================
// SAVE / LOAD
// ============================================================
function saveState() {
  const s = {
    currentRoom: state.currentRoom,
    path: state.path,
    visited: [...state.visited],
    steps: state.steps,
    won: state.won,
  };
  try { localStorage.setItem('clockwork-house-save-v4', JSON.stringify(s)); } catch(e) {}
}

function loadState() {
  try {
    const raw = localStorage.getItem('clockwork-house-save-v4');
    if (!raw) return false;
    const s = JSON.parse(raw);
    state.currentRoom = s.currentRoom;
    state.path = s.path;
    state.visited = new Set(s.visited);
    state.steps = s.steps;
    state.won = s.won || false;
    return true;
  } catch(e) { return false; }
}

// ============================================================
// RENDERING
// ============================================================
function render() {
  const room = ROOMS[state.currentRoom];
  if (!room) return;

  document.getElementById('stat-room').textContent = room.id;
  document.getElementById('stat-steps').textContent = state.steps;
  document.getElementById('stat-visited').textContent = state.visited.size;
  document.getElementById('stat-total').textContent = Object.keys(ROOMS).length;

  document.getElementById('room-number').textContent = `ROOM ${room.id}`;
  document.getElementById('room-title').textContent = room.title;
  document.getElementById('room-description').innerHTML = room.description.trim();

  const display = document.getElementById('room-display');
  display.classList.toggle('victory-glow', !!room.victory);

  const exitsEl = document.getElementById('exits');
  exitsEl.innerHTML = '';

  room.exits.forEach(exit => {
    const btn = document.createElement('button');
    btn.className = 'exit-btn';

    const numSpan = document.createElement('span');
    numSpan.className = 'exit-number';
    numSpan.textContent = exit.target;

    const textSpan = document.createElement('span');
    textSpan.className = 'exit-text';
    textSpan.textContent = exit.label;
    if (exit.flavor) textSpan.textContent += ` — ${exit.flavor}`;

    btn.appendChild(numSpan);
    btn.appendChild(textSpan);

    if (state.visited.has(exit.target)) {
      const visitTag = document.createElement('span');
      visitTag.className = 'exit-visited';
      visitTag.textContent = 'visited';
      btn.appendChild(visitTag);
    }

    btn.addEventListener('click', () => goToRoom(exit.target));
    exitsEl.appendChild(btn);
  });

  const pathDisplay = document.getElementById('path-display');
  const recent = state.path.slice(-10);
  pathDisplay.textContent = (state.path.length > 10 ? '… ' : '') + recent.join(' → ');

  document.getElementById('exits-label').style.display = room.victory ? 'none' : 'block';

  saveState();
}

function goToRoom(roomId) {
  if (!ROOMS[roomId]) return;

  const display = document.getElementById('room-display');
  display.classList.add('fade-out');

  setTimeout(() => {
    state.currentRoom = roomId;
    state.path.push(roomId);
    state.visited.add(roomId);
    state.steps++;

    if (ROOMS[roomId].victory) state.won = true;

    render();
    display.classList.remove('fade-out');
    window.scrollTo({ top: 0, behavior: 'smooth' });
  }, 300);
}

function goBack() {
  if (state.path.length <= 1) return;
  state.path.pop();
  const prevRoom = state.path[state.path.length - 1];
  state.currentRoom = prevRoom;
  state.steps++;
  render();
  window.scrollTo({ top: 0, behavior: 'smooth' });
}

// ============================================================
// HINTS / MAP
// ============================================================
function showHint() {
  const room = ROOMS[state.currentRoom];
  document.getElementById('hint-text').textContent = room.hint || "The walls have nothing to say.";
  document.getElementById('hint-overlay').classList.add('visible');
}
function closeHint() { document.getElementById('hint-overlay').classList.remove('visible'); }

function showMap() {
  const container = document.getElementById('map-rooms');
  container.innerHTML = '';
  const ids = Object.keys(ROOMS).map(Number).sort((a,b) => a - b);
  ids.forEach(id => {
    const room = ROOMS[id];
    const div = document.createElement('div');
    const isCurrent = id === state.currentRoom;
    const isVisited = state.visited.has(id);
    div.className = `map-room ${isCurrent ? 'current' : isVisited ? 'visited' : 'unvisited'}`;

    const num = document.createElement('span');
    num.className = 'map-room-num';
    num.textContent = id;

    const name = document.createElement('span');
    name.className = 'map-room-name';
    name.textContent = isVisited ? room.title : '???';

    const tag = document.createElement('span');
    tag.className = 'map-room-tag';
    tag.textContent = isCurrent ? 'HERE' : isVisited ? '✓' : '';

    div.appendChild(num);
    div.appendChild(name);
    div.appendChild(tag);
    container.appendChild(div);
  });
  document.getElementById('map-overlay').classList.add('visible');
}
function closeMap() { document.getElementById('map-overlay').classList.remove('visible'); }

function restartGame() {
  state = { currentRoom: 1, path: [1], visited: new Set([1]), steps: 0, won: false };
  render();
}

// ============================================================
// KEYBOARD
// ============================================================
document.addEventListener('keydown', (e) => {
  if (e.key === 'Escape') { closeHint(); closeMap(); return; }
  if (e.key === 'h' && !e.ctrlKey && !e.metaKey) { showHint(); return; }
  if (e.key === 'm' && !e.ctrlKey && !e.metaKey) { showMap(); return; }
  if (e.key === 'b' && !e.ctrlKey && !e.metaKey) { goBack(); return; }

  const digit = parseInt(e.key);
  if (!isNaN(digit)) handleDigit(digit);
});

let digitBuffer = '';
let digitTimeout = null;

function handleDigit(d) {
  digitBuffer += d;
  clearTimeout(digitTimeout);
  const room = ROOMS[state.currentRoom];
  if (!room) return;

  const exactMatch = room.exits.find(ex => ex.target === parseInt(digitBuffer));
  const couldBeMore = room.exits.some(ex => String(ex.target).startsWith(digitBuffer) && String(ex.target) !== digitBuffer);

  if (exactMatch && !couldBeMore) {
    digitBuffer = '';
    goToRoom(exactMatch.target);
    return;
  }

  digitTimeout = setTimeout(() => {
    const num = parseInt(digitBuffer);
    digitBuffer = '';
    const match = room.exits.find(ex => ex.target === num);
    if (match) goToRoom(match.target);
  }, 500);
}

// ============================================================
// INIT
// ============================================================
loadState();
render();
</script>
</body>
</html>
